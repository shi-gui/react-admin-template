import{r as y,g as ei,m as ti,a as ni,z as fn,b as mn,F as Vt,i as Zt,_ as Pe,C as ii,c as Ae,d as ri,u as oi,D as ai,e as Lt,f as si,V as li,h as hi,S as ui,j as gn,k as Ye,R as ci,l as jt,w as Gt,n as di,o as pi,T as fi,p as mi,Q as gi,q as vi,s as yi,t as bi,N as vn,v as wi,E as xi,x as Pi,L as _i,y as Ci,A as Ei,B as ki,G as Ri,W as Ii,H as Si,I as Oi,J as Ai,K as Ti,M as Bi,O as yn,P as bn,U as k,X as Mi,Y as zi,Z as Di,$ as te,a0 as Fi,a1 as Xt,a2 as Yt,a3 as Vi,a4 as Li,a5 as ji,a6 as Ui,a7 as $i,a8 as Ni,a9 as Wi,aa as Hi,ab as qi,ac as Zi}from"./index-f0bb976d.js";import{C as wn,R as Gi}from"./row-c424928a.js";import{C as Xi}from"./index-93a94c6f.js";import"./responsiveObserver-133d72ef.js";const Kt=o=>typeof o=="object"&&o!=null&&o.nodeType===1,Qt=(o,h)=>(!h||o!=="hidden")&&o!=="visible"&&o!=="clip",zt=(o,h)=>{if(o.clientHeight<o.scrollHeight||o.clientWidth<o.scrollWidth){const l=getComputedStyle(o,null);return Qt(l.overflowY,h)||Qt(l.overflowX,h)||(n=>{const a=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!a&&(a.clientHeight<n.scrollHeight||a.clientWidth<n.scrollWidth)})(o)}return!1},Rt=(o,h,l,n,a,u,r,p)=>u<o&&r>h||u>o&&r<h?0:u<=o&&p<=l||r>=h&&p>=l?u-o-n:r>h&&p<l||u<o&&p>l?r-h+a:0,Yi=o=>{const h=o.parentElement;return h??(o.getRootNode().host||null)},Jt=(o,h)=>{var l,n,a,u;if(typeof document>"u")return[];const{scrollMode:r,block:p,inline:m,boundary:f,skipOverflowHiddenElements:w}=h,x=typeof f=="function"?f:W=>W!==f;if(!Kt(o))throw new TypeError("Invalid target");const _=document.scrollingElement||document.documentElement,P=[];let R=o;for(;Kt(R)&&x(R);){if(R=Yi(R),R===_){P.push(R);break}R!=null&&R===document.body&&zt(R)&&!zt(document.documentElement)||R!=null&&zt(R,w)&&P.push(R)}const O=(n=(l=window.visualViewport)==null?void 0:l.width)!=null?n:innerWidth,B=(u=(a=window.visualViewport)==null?void 0:a.height)!=null?u:innerHeight,{scrollX:A,scrollY:C}=window,{height:E,width:T,top:z,right:D,bottom:N,left:I}=o.getBoundingClientRect();let b=p==="start"||p==="nearest"?z:p==="end"?N:z+E/2,V=m==="center"?I+T/2:m==="end"?D:I;const Z=[];for(let W=0;W<P.length;W++){const F=P[W],{height:H,width:G,top:X,right:$,bottom:K,left:Q}=F.getBoundingClientRect();if(r==="if-needed"&&z>=0&&I>=0&&N<=B&&D<=O&&z>=X&&N<=K&&I>=Q&&D<=$)return Z;const g=getComputedStyle(F),L=parseInt(g.borderLeftWidth,10),ae=parseInt(g.borderTopWidth,10),ne=parseInt(g.borderRightWidth,10),j=parseInt(g.borderBottomWidth,10);let S=0,U=0;const ie="offsetWidth"in F?F.offsetWidth-F.clientWidth-L-ne:0,re="offsetHeight"in F?F.offsetHeight-F.clientHeight-ae-j:0,oe="offsetWidth"in F?F.offsetWidth===0?0:G/F.offsetWidth:0,Ce="offsetHeight"in F?F.offsetHeight===0?0:H/F.offsetHeight:0;if(_===F)S=p==="start"?b:p==="end"?b-B:p==="nearest"?Rt(C,C+B,B,ae,j,C+b,C+b+E,E):b-B/2,U=m==="start"?V:m==="center"?V-O/2:m==="end"?V-O:Rt(A,A+O,O,L,ne,A+V,A+V+T,T),S=Math.max(0,S+C),U=Math.max(0,U+A);else{S=p==="start"?b-X-ae:p==="end"?b-K+j+re:p==="nearest"?Rt(X,K,H,ae,j+re,b,b+E,E):b-(X+H/2)+re/2,U=m==="start"?V-Q-L:m==="center"?V-(Q+G/2)+ie/2:m==="end"?V-$+ne+ie:Rt(Q,$,G,L,ne+ie,V,V+T,T);const{scrollLeft:de,scrollTop:M}=F;S=Math.max(0,Math.min(M+S/Ce,F.scrollHeight-H/Ce+re)),U=Math.max(0,Math.min(de+U/oe,F.scrollWidth-G/oe+ie)),b+=M-S,V+=de-U}Z.push({el:F,top:S,left:U})}return Z},Ki=o=>o===!1?{block:"end",inline:"nearest"}:(h=>h===Object(h)&&Object.keys(h).length!==0)(o)?o:{block:"start",inline:"nearest"};function Qi(o,h){if(!o.isConnected||!(n=>{let a=n;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(o))return;if((n=>typeof n=="object"&&typeof n.behavior=="function")(h))return h.behavior(Jt(o,h));const l=typeof h=="boolean"||h==null?void 0:h.behavior;for(const{el:n,top:a,left:u}of Jt(o,Ki(h)))n.scroll({top:a,left:u,behavior:l})}function It(o){const[h,l]=y.useState(o);return y.useEffect(()=>{const n=setTimeout(()=>{l(o)},o.length?0:10);return()=>{clearTimeout(n)}},[o]),h}const Ji=o=>{const{componentCls:h}=o,l=`${h}-show-help`,n=`${h}-show-help-item`;return{[l]:{transition:`opacity ${o.motionDurationSlow} ${o.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[n]:{overflow:"hidden",transition:`height ${o.motionDurationSlow} ${o.motionEaseInOut},
                     opacity ${o.motionDurationSlow} ${o.motionEaseInOut},
                     transform ${o.motionDurationSlow} ${o.motionEaseInOut} !important`,[`&${n}-appear, &${n}-enter`]:{transform:"translateY(-5px)",opacity:0,["&-active"]:{transform:"translateY(0)",opacity:1}},[`&${n}-leave-active`]:{transform:"translateY(-5px)"}}}}},er=Ji,tr=o=>({legend:{display:"block",width:"100%",marginBottom:o.marginLG,padding:0,color:o.colorTextDescription,fontSize:o.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${o.lineWidth}px ${o.lineType} ${o.colorBorder}`},label:{fontSize:o.fontSize},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},[`input[type='file']:focus,
  input[type='radio']:focus,
  input[type='checkbox']:focus`]:{outline:0,boxShadow:`0 0 0 ${o.controlOutlineWidth}px ${o.controlOutline}`},output:{display:"block",paddingTop:15,color:o.colorText,fontSize:o.fontSize,lineHeight:o.lineHeight}}),en=(o,h)=>{const{formItemCls:l}=o;return{[l]:{[`${l}-label > label`]:{height:h},[`${l}-control-input`]:{minHeight:h}}}},nr=o=>{const{componentCls:h}=o;return{[o.componentCls]:Object.assign(Object.assign(Object.assign({},mn(o)),tr(o)),{[`${h}-text`]:{display:"inline-block",paddingInlineEnd:o.paddingSM},"&-small":Object.assign({},en(o,o.controlHeightSM)),"&-large":Object.assign({},en(o,o.controlHeightLG))})}},ir=o=>{const{formItemCls:h,iconCls:l,componentCls:n,rootPrefixCls:a}=o;return{[h]:Object.assign(Object.assign({},mn(o)),{marginBottom:o.marginLG,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden.${a}-row`]:{display:"none"},"&-has-warning":{[`${h}-split`]:{color:o.colorError}},"&-has-error":{[`${h}-split`]:{color:o.colorWarning}},[`${h}-label`]:{display:"inline-block",flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:`${o.lineHeight} - 0.25em`,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:o.controlHeight,color:o.colorTextHeading,fontSize:o.fontSize,[`> ${l}`]:{fontSize:o.fontSize,verticalAlign:"top"},[`&${h}-required:not(${h}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:o.marginXXS,color:o.colorError,fontSize:o.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${n}-hide-required-mark &`]:{display:"none"}},[`${h}-optional`]:{display:"inline-block",marginInlineStart:o.marginXXS,color:o.colorTextDescription,[`${n}-hide-required-mark &`]:{display:"none"}},[`${h}-tooltip`]:{color:o.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:o.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:o.marginXXS/2,marginInlineEnd:o.marginXS},[`&${h}-no-colon::after`]:{content:'" "'}}},[`${h}-control`]:{display:"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${a}-col-'"]):not([class*="' ${a}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:o.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[h]:{"&-explain, &-extra":{clear:"both",color:o.colorTextDescription,fontSize:o.fontSize,lineHeight:o.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:o.controlHeightSM,transition:`color ${o.motionDurationMid} ${o.motionEaseOut}`},"&-explain":{"&-error":{color:o.colorError},"&-warning":{color:o.colorWarning}}},[`&-with-help ${h}-explain`]:{height:"auto",opacity:1},[`${h}-feedback-icon`]:{fontSize:o.fontSize,textAlign:"center",visibility:"visible",animationName:fn,animationDuration:o.motionDurationMid,animationTimingFunction:o.motionEaseOutBack,pointerEvents:"none","&-success":{color:o.colorSuccess},"&-error":{color:o.colorError},"&-warning":{color:o.colorWarning},"&-validating":{color:o.colorPrimary}}})}},rr=o=>{const{componentCls:h,formItemCls:l,rootPrefixCls:n}=o;return{[`${h}-horizontal`]:{[`${l}-label`]:{flexGrow:0},[`${l}-control`]:{flex:"1 1 0",minWidth:0},[`${l}-label.${n}-col-24 + ${l}-control`]:{minWidth:"unset"}}}},or=o=>{const{componentCls:h,formItemCls:l}=o;return{[`${h}-inline`]:{display:"flex",flexWrap:"wrap",[l]:{flex:"none",marginInlineEnd:o.margin,marginBottom:0,"&-row":{flexWrap:"nowrap"},"&-with-help":{marginBottom:o.marginLG},[`> ${l}-label,
        > ${l}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${l}-label`]:{flex:"none"},[`${h}-text`]:{display:"inline-block"},[`${l}-has-feedback`]:{display:"inline-block"}}}}},vt=o=>({margin:0,padding:`0 0 ${o.paddingXS}px`,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{display:"none"}}}),ar=o=>{const{componentCls:h,formItemCls:l}=o;return{[`${l} ${l}-label`]:vt(o),[h]:{[l]:{flexWrap:"wrap",[`${l}-label,
          ${l}-control`]:{flex:"0 0 100%",maxWidth:"100%"}}}}},sr=o=>{const{componentCls:h,formItemCls:l,rootPrefixCls:n}=o;return{[`${h}-vertical`]:{[l]:{"&-row":{flexDirection:"column"},"&-label > label":{height:"auto"},[`${h}-item-control`]:{width:"100%"}}},[`${h}-vertical ${l}-label,
      .${n}-col-24${l}-label,
      .${n}-col-xl-24${l}-label`]:vt(o),[`@media (max-width: ${o.screenXSMax}px)`]:[ar(o),{[h]:{[`.${n}-col-xs-24${l}-label`]:vt(o)}}],[`@media (max-width: ${o.screenSMMax}px)`]:{[h]:{[`.${n}-col-sm-24${l}-label`]:vt(o)}},[`@media (max-width: ${o.screenMDMax}px)`]:{[h]:{[`.${n}-col-md-24${l}-label`]:vt(o)}},[`@media (max-width: ${o.screenLGMax}px)`]:{[h]:{[`.${n}-col-lg-24${l}-label`]:vt(o)}}}},Ut=ei("Form",(o,h)=>{let{rootPrefixCls:l}=h;const n=ti(o,{formItemCls:`${o.componentCls}-item`,rootPrefixCls:l});return[nr(n),ir(n),er(n),rr(n),or(n),sr(n),ni(n),fn]}),tn=[];function Dt(o,h,l){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof o=="string"?o:`${h}-${n}`,error:o,errorStatus:l}}function xn(o){let{help:h,helpStatus:l,errors:n=tn,warnings:a=tn,className:u,fieldId:r,onVisibleChanged:p}=o;const{prefixCls:m}=y.useContext(Vt),f=`${m}-item-explain`,[,w]=Ut(m),x=y.useMemo(()=>Zt(m),[m]),_=It(n),P=It(a),R=y.useMemo(()=>h!=null?[Dt(h,"help",l)]:[].concat(Pe(_.map((B,A)=>Dt(B,"error","error",A))),Pe(P.map((B,A)=>Dt(B,"warning","warning",A)))),[h,l,_,P]),O={};return r&&(O.id=`${r}_help`),y.createElement(ii,{motionDeadline:x.motionDeadline,motionName:`${m}-show-help`,visible:!!R.length,onVisibleChanged:p},B=>{const{className:A,style:C}=B;return y.createElement("div",Object.assign({},O,{className:Ae(f,A,u,w),style:C,role:"alert"}),y.createElement(ri,Object.assign({keys:R},Zt(m),{motionName:`${m}-show-help-item`,component:!1}),E=>{const{key:T,error:z,errorStatus:D,className:N,style:I}=E;return y.createElement("div",{key:T,className:Ae(N,{[`${f}-${D}`]:D}),style:I},z)}))})}const lr=["parentNode"],hr="form_item";function Pt(o){return o===void 0||o===!1?[]:Array.isArray(o)?o:[o]}function Pn(o,h){if(!o.length)return;const l=o.join("_");return h?`${h}_${l}`:lr.includes(l)?`${hr}_${l}`:l}function nn(o){return Pt(o).join("_")}function _n(o){const[h]=oi(),l=y.useRef({}),n=y.useMemo(()=>o??Object.assign(Object.assign({},h),{__INTERNAL__:{itemRef:a=>u=>{const r=nn(a);u?l.current[r]=u:delete l.current[r]}},scrollToField:function(a){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Pt(a),p=Pn(r,n.__INTERNAL__.name),m=p?document.getElementById(p):null;m&&Qi(m,Object.assign({scrollMode:"if-needed",block:"nearest"},u))},getFieldInstance:a=>{const u=nn(a);return l.current[u]}}),[o,h]);return[n]}var ur=globalThis&&globalThis.__rest||function(o,h){var l={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&h.indexOf(n)<0&&(l[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(o);a<n.length;a++)h.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(o,n[a])&&(l[n[a]]=o[n[a]]);return l};const cr=(o,h)=>{const l=y.useContext(ai),{getPrefixCls:n,direction:a,form:u}=y.useContext(Lt),{prefixCls:r,className:p,rootClassName:m,size:f,disabled:w=l,form:x,colon:_,labelAlign:P,labelWrap:R,labelCol:O,wrapperCol:B,hideRequiredMark:A,layout:C="horizontal",scrollToFirstError:E,requiredMark:T,onFinishFailed:z,name:D}=o,N=ur(o,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),I=si(f),b=y.useContext(li),V=y.useMemo(()=>T!==void 0?T:u&&u.requiredMark!==void 0?u.requiredMark:!A,[A,T,u]),Z=_??(u==null?void 0:u.colon),W=n("form",r),[F,H]=Ut(W),G=Ae(W,{[`${W}-${C}`]:!0,[`${W}-hide-required-mark`]:V===!1,[`${W}-rtl`]:a==="rtl",[`${W}-${I}`]:I},H,p,m),[X]=_n(x),{__INTERNAL__:$}=X;$.name=D;const K=y.useMemo(()=>({name:D,labelAlign:P,labelCol:O,labelWrap:R,wrapperCol:B,vertical:C==="vertical",colon:Z,requiredMark:V,itemRef:$.itemRef,form:X}),[D,P,O,B,C,Z,V,X]);y.useImperativeHandle(h,()=>X);const Q=(L,ae)=>{if(L){let ne={block:"nearest"};typeof L=="object"&&(ne=L),X.scrollToField(ae,ne)}},g=L=>{if(z==null||z(L),L.errorFields.length){const ae=L.errorFields[0].name;if(E!==void 0){Q(E,ae);return}u&&u.scrollToFirstError!==void 0&&Q(u.scrollToFirstError,ae)}};return F(y.createElement(hi,{disabled:w},y.createElement(ui,{size:I},y.createElement(gn,{validateMessages:b},y.createElement(Ye.Provider,{value:K},y.createElement(ci,Object.assign({id:D},N,{name:D,onFinishFailed:g,form:X,className:G})))))))},dr=y.forwardRef(cr),pr=dr,Cn=()=>{const{status:o,errors:h=[],warnings:l=[]}=y.useContext(jt);return{status:o,errors:h,warnings:l}};Cn.Context=jt;const fr=Cn;function mr(o){const[h,l]=y.useState(o),n=y.useRef(null),a=y.useRef([]),u=y.useRef(!1);y.useEffect(()=>(u.current=!1,()=>{u.current=!0,Gt.cancel(n.current),n.current=null}),[]);function r(p){u.current||(n.current===null&&(a.current=[],n.current=Gt(()=>{n.current=null,l(m=>{let f=m;return a.current.forEach(w=>{f=w(f)}),f})})),a.current.push(p))}return[h,r]}function gr(){const{itemRef:o}=y.useContext(Ye),h=y.useRef({});function l(n,a){const u=a&&typeof a=="object"&&a.ref,r=n.join("_");return(h.current.name!==r||h.current.originRef!==u)&&(h.current.name=r,h.current.originRef=u,h.current.ref=di(o(n),u)),h.current.ref}return l}const vr=o=>{const{prefixCls:h,status:l,wrapperCol:n,children:a,errors:u,warnings:r,_internalItemRender:p,extra:m,help:f,fieldId:w,marginBottom:x,onErrorVisibleChanged:_}=o,P=`${h}-item`,R=y.useContext(Ye),O=n||R.wrapperCol||{},B=Ae(`${P}-control`,O.className),A=y.useMemo(()=>Object.assign({},R),[R]);delete A.labelCol,delete A.wrapperCol;const C=y.createElement("div",{className:`${P}-control-input`},y.createElement("div",{className:`${P}-control-input-content`},a)),E=y.useMemo(()=>({prefixCls:h,status:l}),[h,l]),T=x!==null||u.length||r.length?y.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},y.createElement(Vt.Provider,{value:E},y.createElement(xn,{fieldId:w,errors:u,warnings:r,help:f,helpStatus:l,className:`${P}-explain-connected`,onVisibleChanged:_})),!!x&&y.createElement("div",{style:{width:0,height:x}})):null,z={};w&&(z.id=`${w}_extra`);const D=m?y.createElement("div",Object.assign({},z,{className:`${P}-extra`}),m):null,N=p&&p.mark==="pro_table_render"&&p.render?p.render(o,{input:C,errorList:T,extra:D}):y.createElement(y.Fragment,null,C,T,D);return y.createElement(Ye.Provider,{value:A},y.createElement(wn,Object.assign({},O,{className:B}),N))},yr=vr;var br=globalThis&&globalThis.__rest||function(o,h){var l={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&h.indexOf(n)<0&&(l[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(o);a<n.length;a++)h.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(o,n[a])&&(l[n[a]]=o[n[a]]);return l};function wr(o){return o?typeof o=="object"&&!y.isValidElement(o)?o:{title:o}:null}const xr=o=>{let{prefixCls:h,label:l,htmlFor:n,labelCol:a,labelAlign:u,colon:r,required:p,requiredMark:m,tooltip:f}=o;var w;const[x]=pi("Form"),{vertical:_,labelAlign:P,labelCol:R,labelWrap:O,colon:B}=y.useContext(Ye);if(!l)return null;const A=a||R||{},C=u||P,E=`${h}-item-label`,T=Ae(E,C==="left"&&`${E}-left`,A.className,{[`${E}-wrap`]:!!O});let z=l;const D=r===!0||B!==!1&&r!==!1;D&&!_&&typeof l=="string"&&l.trim()!==""&&(z=l.replace(/[:|：]\s*$/,""));const I=wr(f);if(I){const{icon:V=y.createElement(gi,null)}=I,Z=br(I,["icon"]),W=y.createElement(fi,Object.assign({},Z),y.cloneElement(V,{className:`${h}-item-tooltip`,title:""}));z=y.createElement(y.Fragment,null,z,W)}m==="optional"&&!p&&(z=y.createElement(y.Fragment,null,z,y.createElement("span",{className:`${h}-item-optional`,title:""},(x==null?void 0:x.optional)||((w=mi.Form)===null||w===void 0?void 0:w.optional))));const b=Ae({[`${h}-item-required`]:p,[`${h}-item-required-mark-optional`]:m==="optional",[`${h}-item-no-colon`]:!D});return y.createElement(wn,Object.assign({},A,{className:T}),y.createElement("label",{htmlFor:n,className:b,title:typeof l=="string"?l:""},z))},Pr=xr;var _r=globalThis&&globalThis.__rest||function(o,h){var l={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&h.indexOf(n)<0&&(l[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(o);a<n.length;a++)h.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(o,n[a])&&(l[n[a]]=o[n[a]]);return l};const Cr={success:wi,warning:xi,error:Pi,validating:_i};function Er(o){const{prefixCls:h,className:l,rootClassName:n,style:a,help:u,errors:r,warnings:p,validateStatus:m,meta:f,hasFeedback:w,hidden:x,children:_,fieldId:P,required:R,isRequired:O,onSubItemMetaChange:B}=o,A=_r(o,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange"]),C=`${h}-item`,{requiredMark:E}=y.useContext(Ye),T=y.useRef(null),z=It(r),D=It(p),N=u!=null,I=!!(N||r.length||p.length),b=!!T.current&&vi(T.current),[V,Z]=y.useState(null);yi(()=>{if(I&&T.current){const $=getComputedStyle(T.current);Z(parseInt($.marginBottom,10))}},[I,b]);const W=$=>{$||Z(null)},H=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,K="";const Q=$?z:f.errors,g=$?D:f.warnings;return m!==void 0?K=m:f.validating?K="validating":Q.length?K="error":g.length?K="warning":(f.touched||w&&f.validated)&&(K="success"),K}(),G=y.useMemo(()=>{let $;if(w){const K=H&&Cr[H];$=K?y.createElement("span",{className:Ae(`${C}-feedback-icon`,`${C}-feedback-icon-${H}`)},y.createElement(K,null)):null}return{status:H,errors:r,warnings:p,hasFeedback:w,feedbackIcon:$,isFormItemInput:!0}},[H,w]),X=Ae(C,l,n,{[`${C}-with-help`]:N||z.length||D.length,[`${C}-has-feedback`]:H&&w,[`${C}-has-success`]:H==="success",[`${C}-has-warning`]:H==="warning",[`${C}-has-error`]:H==="error",[`${C}-is-validating`]:H==="validating",[`${C}-hidden`]:x});return y.createElement("div",{className:X,style:a,ref:T},y.createElement(Gi,Object.assign({className:`${C}-row`},bi(A,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol"])),y.createElement(Pr,Object.assign({htmlFor:P},o,{requiredMark:E,required:R??O,prefixCls:h})),y.createElement(yr,Object.assign({},o,f,{errors:z,warnings:D,prefixCls:h,status:H,help:u,marginBottom:V,onErrorVisibleChanged:W}),y.createElement(vn.Provider,{value:B},y.createElement(jt.Provider,{value:G},_)))),!!V&&y.createElement("div",{className:`${C}-margin-offset`,style:{marginBottom:-V}}))}function kr(o){if(typeof o=="function")return o;const h=Ci(o);return h.length<=1?h[0]:h}const Rr="__SPLIT__",Ir=y.memo(o=>{let{children:h}=o;return h},(o,h)=>o.value===h.value&&o.update===h.update&&o.childProps.length===h.childProps.length&&o.childProps.every((l,n)=>l===h.childProps[n]));function Sr(o){return o!=null}function rn(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function Or(o){const{name:h,noStyle:l,className:n,dependencies:a,prefixCls:u,shouldUpdate:r,rules:p,children:m,required:f,label:w,messageVariables:x,trigger:_="onChange",validateTrigger:P,hidden:R,help:O}=o,{getPrefixCls:B}=y.useContext(Lt),{name:A}=y.useContext(Ye),C=kr(m),E=typeof C=="function",T=y.useContext(vn),{validateTrigger:z}=y.useContext(Ei),D=P!==void 0?P:z,N=Sr(h),I=B("form",u),[b,V]=Ut(I),Z=y.useContext(ki),W=y.useRef(),[F,H]=mr({}),[G,X]=Ri(()=>rn()),$=j=>{const S=Z==null?void 0:Z.getKey(j.name);if(X(j.destroy?rn():j,!0),l&&O!==!1&&T){let U=j.name;if(j.destroy)U=W.current||U;else if(S!==void 0){const[ie,re]=S;U=[ie].concat(Pe(re)),W.current=U}T(j,U)}},K=(j,S)=>{H(U=>{const ie=Object.assign({},U),oe=[].concat(Pe(j.name.slice(0,-1)),Pe(S)).join(Rr);return j.destroy?delete ie[oe]:ie[oe]=j,ie})},[Q,g]=y.useMemo(()=>{const j=Pe(G.errors),S=Pe(G.warnings);return Object.values(F).forEach(U=>{j.push.apply(j,Pe(U.errors||[])),S.push.apply(S,Pe(U.warnings||[]))}),[j,S]},[F,G.errors,G.warnings]),L=gr();function ae(j,S,U){return l&&!R?j:y.createElement(Er,Object.assign({key:"row"},o,{className:Ae(n,V),prefixCls:I,fieldId:S,isRequired:U,errors:Q,warnings:g,meta:G,onSubItemMetaChange:K}),j)}if(!N&&!E&&!a)return b(ae(C));let ne={};return typeof w=="string"?ne.label=w:h&&(ne.label=String(h)),x&&(ne=Object.assign(Object.assign({},ne),x)),b(y.createElement(Ii,Object.assign({},o,{messageVariables:ne,trigger:_,validateTrigger:D,onMetaChange:$}),(j,S,U)=>{const ie=Pt(h).length&&S?S.name:[],re=Pn(ie,A),oe=f!==void 0?f:!!(p&&p.some(M=>{if(M&&typeof M=="object"&&M.required&&!M.warningOnly)return!0;if(typeof M=="function"){const be=M(U);return be&&be.required&&!be.warningOnly}return!1})),Ce=Object.assign({},j);let de=null;if(Array.isArray(C)&&N)de=C;else if(!(E&&(!(r||a)||N))){if(!(a&&!E&&!N))if(Si(C)){const M=Object.assign(Object.assign({},C.props),Ce);if(M.id||(M.id=re),O||Q.length>0||g.length>0||o.extra){const ke=[];(O||Q.length>0)&&ke.push(`${re}_help`),o.extra&&ke.push(`${re}_extra`),M["aria-describedby"]=ke.join(" ")}Q.length>0&&(M["aria-invalid"]="true"),oe&&(M["aria-required"]="true"),Oi(C)&&(M.ref=L(ie,C)),new Set([].concat(Pe(Pt(_)),Pe(Pt(D)))).forEach(ke=>{M[ke]=function(){for(var Je,yt,Ke,we,Qe,_t=arguments.length,Re=new Array(_t),xe=0;xe<_t;xe++)Re[xe]=arguments[xe];(Ke=Ce[ke])===null||Ke===void 0||(Je=Ke).call.apply(Je,[Ce].concat(Re)),(Qe=(we=C.props)[ke])===null||Qe===void 0||(yt=Qe).call.apply(yt,[we].concat(Re))}});const Ee=[M["aria-required"],M["aria-invalid"],M["aria-describedby"]];de=y.createElement(Ir,{value:Ce[o.valuePropName||"value"],update:C,childProps:Ee},Ai(C,M))}else E&&(r||a)&&!N?de=C(U):de=C}return ae(de,re,oe)}))}const En=Or;En.useStatus=fr;const Ar=En;var Tr=globalThis&&globalThis.__rest||function(o,h){var l={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&h.indexOf(n)<0&&(l[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(o);a<n.length;a++)h.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(o,n[a])&&(l[n[a]]=o[n[a]]);return l};const Br=o=>{var{prefixCls:h,children:l}=o,n=Tr(o,["prefixCls","children"]);const{getPrefixCls:a}=y.useContext(Lt),u=a("form",h),r=y.useMemo(()=>({prefixCls:u,status:"error"}),[u]);return y.createElement(Ti,Object.assign({},n),(p,m,f)=>y.createElement(Vt.Provider,{value:r},l(p.map(w=>Object.assign(Object.assign({},w),{fieldKey:w.key})),m,{errors:f.errors,warnings:f.warnings})))},Mr=Br;function zr(){const{form:o}=y.useContext(Ye);return o}const Te=pr;Te.Item=Ar;Te.List=Mr;Te.ErrorList=xn;Te.useForm=_n;Te.useFormInstance=zr;Te.useWatch=Bi;Te.Provider=gn;Te.create=()=>{};const xt=Te;var kn={exports:{}};/*!
* RAFManager v0.1.0
*
* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/(function(o,h){(function(l,n){o.exports=n()})(yn,function(){return function(){for(var l=["ms","moz","webkit","o"],n=0;n<l.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[l[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l[n]+"CancelAnimationFrame"]||window[l[n]+"CancelRequestAnimationFrame"]}(),{timer:0,state:"stop",animations:[],add:function(l){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,a={callback:l,fps:n,n:60/n,param:arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i:0};return this.animations.push(a),this.animations.length>=1&&this.start(),this},getIndex:function(l){for(var n=0;n<this.animations.length;n++)if(this.animations[n].callback===l)return n;return-1},remove:function(l){if(!(this.getIndex(l)<0))return this.deleteMap(l),this.animations.length===0&&this.stop(),this},deleteMap:function(l){var n=this.getIndex(l),a=this.animations[n];for(var u in a)delete a[u];this.animations.splice(n,1)},start:function(){if(this.state!=="start")return this.state="start",this.tick(),this},stop:function(){if(this.state!=="stop")return this.state="stop",cancelAnimationFrame(this.timer),this},tick:function(){var l=this;this.timer=requestAnimationFrame(function(){l.tick()});for(var n=0;n<this.animations.length;n++){var a=this.animations[n],u=a.callback,r=a.param;a.i++,a.i>=a.n&&(u(r),a.i=0)}}}})})(kn);var Dr=kn.exports;const q=bn(Dr);var Rn={exports:{}};/*!
* Proton v4.2.1
* https://github.com/drawcall/Proton
*
* Copyright 2013-2020, A-JIE
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/(function(o,h){(function(l,n){o.exports=n()})(yn,function(){var l=3.1415926,n={PI:l,PIx2:2*l,PI_2:l/2,PI_180:l/180,N180_PI:180/l,Infinity:-999,isInfinity:function(e){return e===this.Infinity||e===1/0},randomAToB:function(e,t,i){return 2<arguments.length&&i!==void 0&&i?Math.floor(Math.random()*(t-e))+e:e+Math.random()*(t-e)},randomFloating:function(e,t,i){return this.randomAToB(e-t,e+t,i)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},randomZone:function(){},floor:function(e,t){return t=1<arguments.length&&t!==void 0?t:4,t=Math.pow(10,t),Math.floor(e*t)/t},degreeTransform:function(e){return e*l/180},toColor16:function(e){return"#"+e.toString(16)}},a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(e,t,i){return t&&p(e.prototype,t),i&&p(e,i),e};function p(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function m(e,t,i){e===null&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,t);if(s!==void 0)return"value"in s?s.value:(s=s.get,s!==void 0?s.call(i):void 0);if((e=Object.getPrototypeOf(e))!==null)return m(e,t,i)}var f=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},w=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t},x=(r(_,[{key:"getValue",value:function(e){return e=0<arguments.length&&e!==void 0&&e,this.isArray?b.getRandFromArray(this.a):this.center?n.randomFloating(this.a,this.b,e):n.randomAToB(this.a,this.b,e)}}],[{key:"setSpanValue",value:function(e,t,i){return e instanceof _?e:t===void 0?new _(e):i===void 0?new _(e,t):new _(e,t,i)}},{key:"getSpanValue",value:function(e){return e instanceof _?e.getValue():e}}]),_);function _(e,t,i){u(this,_),b.isArray(e)?(this.isArray=!0,this.a=e):(this.isArray=!1,this.a=b.initValue(e,1),this.b=b.initValue(t,this.a),this.center=b.initValue(i,!1))}var P=function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1},R=function(e,t){return[1,0,0,0,1,0,e,t,1]},O=function(i){var t=Math.cos(i),i=Math.sin(i);return[t,-i,0,i,t,0,0,0,1]},B=function(e,t){return[e,0,0,0,t,0,0,0,1]},A=function(me,ge){var i=me[0],s=me[1],d=me[2],v=me[3],Y=me[4],fe=me[5],J=me[6],ee=me[7],Xe=me[8],se=ge[0],Se=ge[1],mt=ge[2],gt=ge[3],le=ge[4],he=ge[5],Mt=ge[6],me=ge[7],ge=ge[8];return[i*se+s*gt+d*Mt,i*Se+s*le+d*me,i*mt+s*he+d*ge,v*se+Y*gt+fe*Mt,v*Se+Y*le+fe*me,v*mt+Y*he+fe*ge,J*se+ee*gt+Xe*Mt,J*Se+ee*le+Xe*me,J*mt+ee*he+Xe*ge]},C={createCanvas:function(e,t,i,v){var d=3<arguments.length&&v!==void 0?v:"absolute",v=document.createElement("canvas");return v.id=e,v.width=t,v.height=i,v.style.opacity=0,v.style.position=d,this.transform(v,-500,-500,0,0),v},createDiv:function(e,t,i){var s=document.createElement("div");return s.id=e,s.style.position="absolute",this.resize(s,t,i),s},resize:function(e,t,i){e.style.width=t+"px",e.style.height=i+"px",e.style.marginLeft=-t/2+"px",e.style.marginTop=-i/2+"px"},transform:function(e,t,i,s,d){e.style.willChange="transform";var v="translate("+t+"px, "+i+"px) scale("+s+") rotate("+d+"deg)";this.css3(e,"transform",v)},transform3d:function(e,t,i,s,d){e.style.willChange="transform",d="translate3d("+t+"px, "+i+"px, 0) scale("+s+") rotate("+d+"deg)",this.css3(e,"backfaceVisibility","hidden"),this.css3(e,"transform",d)},css3:function(e,t,i){var s=t.charAt(0).toUpperCase()+t.substr(1);e.style["Webkit"+s]=i,e.style["Moz"+s]=i,e.style["O"+s]=i,e.style["ms"+s]=i,e.style[""+t]=i}},E={},T={},z=0,D=function(e,t,i){return e.drawImage(t,i.x,i.y),t=e.getImageData(i.x,i.y,i.width,i.height),e.clearRect(i.x,i.y,i.width,i.height),t},N=function(e,t,i){var s=typeof e=="string"?e:e.src;E[s]?t(E[s],i):((e=new Image).onload=function(d){E[s]=d.target,t(E[s],i)},e.src=s)},I=function(e,t,i){var s,d,v=e.src;return T[v]||(s=P(e.width),d=P(e.height),(d=C.createCanvas("proton_canvas_cache_"+ ++z,s,d)).getContext("2d").drawImage(e,0,0,e.width,e.height),T[v]=d),t&&t(T[v],i),T[v]},b={initValue:function(e,t){return e=e??t},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},emptyArray:function(e){e&&(e.length=0)},toArray:function(e){return this.isArray(e)?e:[e]},getRandFromArray:function(e){return e?e[Math.floor(e.length*Math.random())]:null},emptyObject:function(e,t){var i,s=1<arguments.length&&t!==void 0?t:null;for(i in e)s&&-1<s.indexOf(i)||delete e[i]},classApply:function(e,t){return t=1<arguments.length&&t!==void 0?t:null,new(t?e.bind.apply(e,[null].concat(t)):e)},setVectorVal:function(e,t){t=1<arguments.length&&t!==void 0?t:null,t&&(this.hasProp(t,"x")&&(e.p.x=t.x),this.hasProp(t,"y")&&(e.p.y=t.y),this.hasProp(t,"vx")&&(e.v.x=t.vx),this.hasProp(t,"vy")&&(e.v.y=t.vy),this.hasProp(t,"ax")&&(e.a.x=t.ax),this.hasProp(t,"ay")&&(e.a.y=t.ay),this.hasProp(t,"p")&&e.p.copy(t.p),this.hasProp(t,"v")&&e.v.copy(t.v),this.hasProp(t,"a")&&e.a.copy(t.a),this.hasProp(t,"position")&&e.p.copy(t.position),this.hasProp(t,"velocity")&&e.v.copy(t.velocity),this.hasProp(t,"accelerate")&&e.a.copy(t.accelerate))},hasProp:function(e,t){return!!e&&e[t]!==void 0},setProp:function(e,t){for(var i in t)e.hasOwnProperty(i)&&(e[i]=x.getSpanValue(t[i]));return e},getImageData:function(e,t,i){return D(e,t,i)},destroyAll:function(e,t){for(var i=1<arguments.length&&t!==void 0?t:null,s=e.length;s--;){try{e[s].destroy(i)}catch{}delete e[s]}e.length=0},assign:function(e,t){if(typeof Object.assign=="function")return Object.assign(e,t);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}},V={},Z={_index:0,_cache:{},id:function(e){return V[e]!==void 0&&V[e]!==null||(V[e]=0),e+"_"+V[e]++},getId:function(e){var t=this.getIdFromCache(e);return t||(t="PUID_"+this._index++,this._cache[t]=e,t)},getIdFromCache:function(e){var t,i=void 0;for(i in this._cache)if((t=this._cache[i])===e||this.isBody(t,e)&&t.src===e.src)return i;return null},isBody:function(e,t){return(e===void 0?"undefined":a(e))==="object"&&(t===void 0?"undefined":a(t))==="object"&&e.isInner&&t.isInner},getTarget:function(e){return this._cache[e]}},W=(r(F,[{key:"get",value:function(e,t,i){var s=void 0;return i=i||e.__puid||Z.getId(e),(s=this.cache[i]&&0<this.cache[i].length?this.cache[i].pop():this.createOrClone(e,t)).__puid=e.__puid||i,s}},{key:"expire",value:function(e){return this.getCache(e.__puid).push(e)}},{key:"createOrClone",value:function(e,t){return this.total++,this.create?this.create(e,t):typeof e=="function"?b.classApply(e,t):e.clone()}},{key:"getCount",value:function(){var e,t=0;for(e in this.cache)t+=this.cache[e].length;return t++}},{key:"destroy",value:function(){for(var e in this.cache)this.cache[e].length=0,delete this.cache[e]}},{key:"getCache",value:function(e){return e=0<arguments.length&&e!==void 0?e:"default",this.cache[e]||(this.cache[e]=[]),this.cache[e]}}]),F);function F(e){u(this,F),this.total=0,this.cache={}}var H=(r(G,[{key:"update",value:function(s,d){this.add(s,d);var i=this.getEmitter(),s=this.getRenderer(),d="";switch(this.type){case 2:d+="emitter:"+this.proton.emitters.length+"<br>",i&&(d+="em speed:"+i.emitSpeed+"<br>"),i&&(d+="pos:"+this.getEmitterPos(i));break;case 3:i&&(d+="initializes:"+i.initializes.length+"<br>"),i&&(d+='<span style="display:inline-block;">'+this.concatArr(i.initializes)+"</span><br>"),i&&(d+="behaviours:"+i.behaviours.length+"<br>"),i&&(d+='<span style="display:inline-block;">'+this.concatArr(i.behaviours)+"</span><br>");break;case 4:s&&(d+=s.name+"<br>"),s&&(d+="body:"+this.getCreatedNumber(s)+"<br>");break;default:d+="particles:"+this.proton.getCount()+"<br>",d+="pool:"+this.proton.pool.getCount()+"<br>",d+="total:"+this.proton.pool.total}this.container.innerHTML=d}},{key:"add",value:function(e,t){var i=this;if(!this.container){this.type=1,this.container=document.createElement("div"),this.container.style.cssText=["position:absolute;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this.container.addEventListener("click",function(v){i.type++,4<i.type&&(i.type=1)},!1);var s=void 0,d=void 0;switch(e){case 2:s="#201",d="#f08";break;case 3:s="#020",d="#0f0";break;default:s="#002",d="#0ff"}this.container.style["background-color"]=s,this.container.style.color=d}this.container.parentNode||(t=t||this.body||document.body).appendChild(this.container)}},{key:"getEmitter",value:function(){return this.proton.emitters[this.emitterIndex]}},{key:"getRenderer",value:function(){return this.proton.renderers[this.rendererIndex]}},{key:"concatArr",value:function(e){var t="";if(!e||!e.length)return t;for(var i=0;i<e.length;i++)t+=(e[i].name||"").substr(0,1)+".";return t}},{key:"getCreatedNumber",value:function(e){return e.pool.total||e.cpool&&e.cpool.total||0}},{key:"getEmitterPos",value:function(e){return Math.round(e.p.x)+","+Math.round(e.p.y)}}]),G);function G(e){u(this,G),this.proton=e,this.container=null,this.type=1,this.emitterIndex=0,this.rendererIndex=0}var X=(r($,[{key:"addEventListener",value:function(e,t){return this._listeners?this.removeEventListener(e,t):this._listeners={},this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),t}},{key:"removeEventListener",value:function(e,t){if(this._listeners&&this._listeners[e]){for(var i=this._listeners[e],s=i.length,d=0;d<s;d++)if(i[d]===t){s===1?delete this._listeners[e]:i.splice(d,1);break}}}},{key:"removeAllEventListeners",value:function(e){e?this._listeners&&delete this._listeners[e]:this._listeners=null}},{key:"dispatchEvent",value:function(e,t){var i=!1,s=this._listeners;if(e&&s){var d=s[e];if(!d)return i;for(var v=void 0,Y=d.length;Y--;)v=d[Y],i=i||v(t)}return!!i}},{key:"hasEventListener",value:function(e){var t=this._listeners;return!(!t||!t[e])}}],[{key:"bind",value:function(e){e.prototype.dispatchEvent=$.prototype.dispatchEvent,e.prototype.hasEventListener=$.prototype.hasEventListener,e.prototype.addEventListener=$.prototype.addEventListener,e.prototype.removeEventListener=$.prototype.removeEventListener,e.prototype.removeAllEventListeners=$.prototype.removeAllEventListeners}}]),$);function $(){u(this,$),this._listeners=null}var K=(r(Q,[{key:"calculate",value:function(e,t,i){this.eulerIntegrate(e,t,i)}},{key:"eulerIntegrate",value:function(e,t,i){e.sleep||(e.old.p.copy(e.p),e.old.v.copy(e.v),e.a.multiplyScalar(1/e.mass),e.v.add(e.a.multiplyScalar(t)),e.p.add(e.old.v.multiplyScalar(t)),i&&e.v.multiplyScalar(i),e.a.clear())}}]),Q);function Q(e){u(this,Q),this.type=e}var g=(r(L,[{key:"addRenderer",value:function(e){e.init(this),this.renderers.push(e)}},{key:"removeRenderer",value:function(e){var t=this.renderers.indexOf(e);this.renderers.splice(t,1),e.remove(this)}},{key:"addEmitter",value:function(e){this.emitters.push(e),(e.parent=this).dispatchEvent(L.EMITTER_ADDED,e)}},{key:"removeEmitter",value:function(e){var t=this.emitters.indexOf(e);this.emitters.splice(t,1),e.parent=null,this.dispatchEvent(L.EMITTER_REMOVED,e)}},{key:"update",value:function(){this._fps==="auto"?(this.dispatchEvent(L.PROTON_UPDATE),L.USE_CLOCK?(this.then||(this.then=new Date().getTime()),this.now=new Date().getTime(),this.elapsed=.001*(this.now-this.then),this.amendChangeTabsBug(),0<this.elapsed&&this.emittersUpdate(this.elapsed),this.then=this.now):this.emittersUpdate(L.DEFAULT_INTERVAL),this.dispatchEvent(L.PROTON_UPDATE_AFTER)):(this.then||(this.then=new Date().getTime()),this.now=new Date().getTime(),this.elapsed=.001*(this.now-this.then),this.elapsed>this._interval&&(this.dispatchEvent(L.PROTON_UPDATE),this.emittersUpdate(this._interval),this.then=this.now-this.elapsed%this._interval*1e3,this.dispatchEvent(L.PROTON_UPDATE_AFTER)))}},{key:"emittersUpdate",value:function(e){for(var t=this.emitters.length;t--;)this.emitters[t].update(e)}},{key:"amendChangeTabsBug",value:function(){L.amendChangeTabsBug&&.5<this.elapsed&&(this.then=new Date().getTime(),this.elapsed=0)}},{key:"getCount",value:function(){for(var e=0,t=this.emitters.length;t--;)e+=this.emitters[t].particles.length;return e}},{key:"getAllParticles",value:function(){for(var e=[],t=this.emitters.length;t--;)e=e.concat(this.emitters[t].particles);return e}},{key:"destroyAllEmitters",value:function(){b.destroyAll(this.emitters)}},{key:"destroy",value:function(e){function t(){i.time=0,i.then=0,i.pool.destroy(),b.destroyAll(i.emitters),b.destroyAll(i.renderers,i.getAllParticles())}var i=this;0<arguments.length&&e!==void 0&&e?setTimeout(t,200):t()}},{key:"fps",set:function(e){this._fps=e,this._interval=e==="auto"?L.DEFAULT_INTERVAL:n.floor(1/e,7)},get:function(){return this._fps}}]),L);function L(e){u(this,L),this.emitters=[],this.renderers=[],this.time=0,this.now=0,this.then=0,this.elapsed=0,this.stats=new H(this),this.pool=new W(80),this.integrationType=b.initValue(e,L.EULER),this.integrator=new K(this.integrationType),this._fps="auto",this._interval=L.DEFAULT_INTERVAL}g.USE_CLOCK=!1,g.MEASURE=100,g.EULER="euler",g.RK2="runge-kutta2",g.PARTICLE_CREATED="PARTICLE_CREATED",g.PARTICLE_UPDATE="PARTICLE_UPDATE",g.PARTICLE_SLEEP="PARTICLE_SLEEP",g.PARTICLE_DEAD="PARTICLE_DEAD",g.EMITTER_ADDED="EMITTER_ADDED",g.EMITTER_REMOVED="EMITTER_REMOVED",g.PROTON_UPDATE="PROTON_UPDATE",g.PROTON_UPDATE_AFTER="PROTON_UPDATE_AFTER",g.DEFAULT_INTERVAL=.0167,g.amendChangeTabsBug=!0,X.bind(g);var ae=(r(ne,[{key:"reset",value:function(){this.r=255,this.g=255,this.b=255}}]),ne);function ne(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255,i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:255;u(this,ne),this.r=e,this.g=t,this.b=i}var j={easeLinear:function(e){return e},easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInSine:function(e){return 1-Math.cos(e*n.PI_2)},easeOutSine:function(e){return Math.sin(e*n.PI_2)},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return e===0?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return e===1?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e===0?0:e===1?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return--e*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},getEasing:function(e){return typeof e=="function"?e:this[e]||this.easeLinear}},S=(r(U,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"getGradient",value:function(){return this.x!==0?Math.atan2(this.y,this.x):0<this.y?n.PI_2:this.y<0?-n.PI_2:void 0}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return t!==void 0?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this)}},{key:"addXY",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"sub",value:function(e,t){return t!==void 0?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this)}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"divideScalar",value:function(e){return e!==0?(this.x/=e,this.y/=e):this.set(0,0),this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"negate",value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"rotate",value:function(e){var t=this.x,i=this.y;return this.x=t*Math.cos(e)+i*Math.sin(e),this.y=-t*Math.sin(e)+i*Math.cos(e),this}},{key:"distanceToSquared",value:function(i){var t=this.x-i.x,i=this.y-i.y;return t*t+i*i}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"clone",value:function(){return new U(this.x,this.y)}}]),U);function U(e,t){u(this,U),this.x=e||0,this.y=t||0}var ie=(r(re,[{key:"getDirection",value:function(){return Math.atan2(this.v.x,-this.v.y)*n.N180_PI}},{key:"reset",value:function(){return this.life=1/0,this.age=0,this.dead=!1,this.sleep=!1,this.body=null,this.sprite=null,this.parent=null,this.energy=1,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.easing=j.easeLinear,this.rgb.reset(),b.emptyObject(this.data),this.removeAllBehaviours(),this}},{key:"update",value:function(e,t){this.sleep||(this.age+=e,this.applyBehaviours(e,t)),this.age<this.life?(t=this.easing(this.age/this.life),this.energy=Math.max(1-t,0)):this.destroy()}},{key:"applyBehaviours",value:function(e,t){for(var i=this.behaviours.length,s=void 0,s=0;s<i;s++)this.behaviours[s]&&this.behaviours[s].applyBehaviour(this,e,t)}},{key:"addBehaviour",value:function(e){this.behaviours.push(e),e.hasOwnProperty("parents")&&e.parents.push(this),e.initialize(this)}},{key:"addBehaviours",value:function(e){for(var t=e.length,i=void 0,i=0;i<t;i++)this.addBehaviour(e[i])}},{key:"removeBehaviour",value:function(e){e=this.behaviours.indexOf(e),-1<e&&(this.behaviours.splice(e,1).parents=null)}},{key:"removeAllBehaviours",value:function(){b.emptyArray(this.behaviours)}},{key:"destroy",value:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}]),re);function re(e){u(this,re),this.id="",this.old={},this.data={},this.behaviours=[],this.p=[],this.v=[],this.a=[],this.rgb={},this.name="Particle",this.id=Z.id(this.name),this.old={},this.data={},this.behaviours=[],this.p=new S,this.v=new S,this.a=new S,this.old.p=new S,this.old.v=new S,this.old.a=new S,this.rgb=new ae,this.reset(),e&&b.setProp(this,e)}var oe={hexToRgb:function(e){return e=e.charAt(0)==="#"?e.substring(1,7):e,{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},rgbToHex:function(e){return"rgb("+e.r+", "+e.g+", "+e.b+")"},getHex16FromParticle:function(e){return 65536*Number(e.rgb.r)+256*Number(e.rgb.g)+Number(e.rgb.b)}},Ce=(r(de,[{key:"set",value:function(e,t){return this.r=e,this.tha=t,this}},{key:"setR",value:function(e){return this.r=e,this}},{key:"setTha",value:function(e){return this.tha=e,this}},{key:"copy",value:function(e){return this.r=e.r,this.tha=e.tha,this}},{key:"toVector",value:function(){return new S(this.getX(),this.getY())}},{key:"getX",value:function(){return this.r*Math.sin(this.tha)}},{key:"getY",value:function(){return-this.r*Math.cos(this.tha)}},{key:"normalize",value:function(){return this.r=1,this}},{key:"equals",value:function(e){return e.r===this.r&&e.tha===this.tha}},{key:"clear",value:function(){return this.r=0,this.tha=0,this}},{key:"clone",value:function(){return new de(this.r,this.tha)}}]),de);function de(e,t){u(this,de),this.r=Math.abs(e)||0,this.tha=t||0}var M={create:function(e){var t=new Float32Array(9);return e&&this.set(e,t),t},set:function(e,t){for(var i=0;i<9;i++)t[i]=e[i];return t},multiply:function(le,he,i){var s=le[0],d=le[1],v=le[2],Y=le[3],fe=le[4],J=le[6],ee=le[7],Xe=he[0],se=he[1],Se=he[2],mt=he[3],gt=he[4],le=he[6],he=he[7];return i[0]=Xe*s+se*Y,i[1]=Xe*d+se*fe,i[2]=v*Se,i[3]=mt*s+gt*Y,i[4]=mt*d+gt*fe,i[6]=le*s+he*Y+J,i[7]=le*d+he*fe+ee,i},inverse:function(J,t){var i=J[0],s=J[1],ee=J[3],d=J[4],v=J[6],Y=J[7],fe=-ee,J=Y*ee-d*v,ee=1/(i*d+s*fe);return t[0]=d*ee,t[1]=-s*ee,t[3]=fe*ee,t[4]=i*ee,t[6]=J*ee,t[7]=(-Y*i+s*v)*ee,t},multiplyVec2:function(e,d,i){var s=d[0],d=d[1];return i[0]=s*e[0]+d*e[3]+e[6],i[1]=s*e[1]+d*e[4]+e[7],i}},be=(f(Ee,x),r(Ee,[{key:"getValue",value:function(){var e=b.getRandFromArray(this._arr);return e==="random"||e==="Random"?n.randomColor():e}}],[{key:"createArraySpan",value:function(e){return e?e instanceof Ee?e:new Ee(e):null}}]),Ee);function Ee(e){u(this,Ee);var t=w(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this));return t._arr=b.toArray(e),t}var ke=(r(Je,[{key:"contains",value:function(e,t){return e<=this.right&&e>=this.x&&t<=this.bottom&&t>=this.y}}]),Je);function Je(e,t,i,s){u(this,Je),this.x=e,this.y=t,this.width=i,this.height=s,this.bottom=this.y+this.height,this.right=this.x+this.width}var yt=(r(Ke,[{key:"init",value:function(){this.startTime=0,this.nextTime=this.timePan.getValue()}},{key:"getValue",value:function(e){return this.startTime+=e,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),this.numPan.b===1?.5<this.numPan.getValue(!1)?1:0:this.numPan.getValue(!0)):0}}]),Ke);function Ke(e,t){u(this,Ke),this.numPan=x.setSpanValue(b.initValue(e,1)),this.timePan=x.setSpanValue(b.initValue(t,1)),this.startTime=0,this.nextTime=0,this.init()}var we=(r(Qe,[{key:"reset",value:function(){}},{key:"init",value:function(e,t){t?this.initialize(t):this.initialize(e)}},{key:"initialize",value:function(){}}]),Qe);function Qe(){u(this,Qe)}var _t=(f(Re,we),r(Re,[{key:"initialize",value:function(e){this.lifePan.a===1/0?e.life=1/0:e.life=this.lifePan.getValue()}}]),Re);function Re(e,t,i){u(this,Re);var s=w(this,(Re.__proto__||Object.getPrototypeOf(Re)).call(this));return s.lifePan=x.setSpanValue(e,t,i),s.name="Life",s}var xe=(r(Ot,[{key:"getPosition",value:function(){}},{key:"crossing",value:function(){}}]),Ot);function Ot(){u(this,Ot),this.vector=new S(0,0),this.random=0,this.crossType="dead",this.alert=!0}var Ct=(f(et,xe),r(et,[{key:"getPosition",value:function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector}},{key:"crossing",value:function(){this.alert&&(console.error("Sorry, PointZone does not support crossing method!"),this.alert=!1)}}]),et);function et(e,t){u(this,et);var i=w(this,(et.__proto__||Object.getPrototypeOf(et)).call(this));return i.x=e,i.y=t,i}var Sn=(f(tt,we),r(tt,[{key:"reset",value:function(e){this.zone=b.initValue(e,new Ct)}},{key:"initialize",value:function(e){this.zone.getPosition(),e.p.x=this.zone.vector.x,e.p.y=this.zone.vector.y}}]),tt);function tt(e){u(this,tt);var t=w(this,(tt.__proto__||Object.getPrototypeOf(tt)).call(this));return t.zone=b.initValue(e,new Ct),t.name="Position",t}var On=(f(nt,we),r(nt,[{key:"reset",value:function(e,t,i){this.rPan=x.setSpanValue(e),this.thaPan=x.setSpanValue(t),this.type=b.initValue(i,"vector")}},{key:"normalizeVelocity",value:function(e){return e*g.MEASURE}},{key:"initialize",value:function(e){var t;this.type==="p"||this.type==="P"||this.type==="polar"?(t=new Ce(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*n.PI_180),e.v.x=t.getX(),e.v.y=t.getY()):(e.v.x=this.normalizeVelocity(this.rPan.getValue()),e.v.y=this.normalizeVelocity(this.thaPan.getValue()))}}]),nt);function nt(e,t,i){u(this,nt);var s=w(this,(nt.__proto__||Object.getPrototypeOf(nt)).call(this));return s.rPan=x.setSpanValue(e),s.thaPan=x.setSpanValue(t),s.type=b.initValue(i,"vector"),s.name="Velocity",s}var An=(f(it,we),r(it,[{key:"initialize",value:function(e){e.mass=this.massPan.getValue()}}]),it);function it(e,t,i){u(this,it);var s=w(this,(it.__proto__||Object.getPrototypeOf(it)).call(this));return s.massPan=x.setSpanValue(e,t,i),s.name="Mass",s}var Tn=(f(rt,we),r(rt,[{key:"reset",value:function(e,t,i){this.radius=x.setSpanValue(e,t,i)}},{key:"initialize",value:function(e){e.radius=this.radius.getValue(),e.data.oldRadius=e.radius}}]),rt);function rt(e,t,i){u(this,rt);var s=w(this,(rt.__proto__||Object.getPrototypeOf(rt)).call(this));return s.radius=x.setSpanValue(e,t,i),s.name="Radius",s}var Bn=(f(ot,we),r(ot,[{key:"initialize",value:function(e){var t=this.image.getValue();e.body=typeof t=="string"?{width:this.w,height:this.h,src:t,isInner:!0,inner:!0}:t}},{key:"setSpanValue",value:function(e){return e instanceof be?e:new be(e)}}]),ot);function ot(e,t,i){u(this,ot);var s=w(this,(ot.__proto__||Object.getPrototypeOf(ot)).call(this));return s.image=s.setSpanValue(e),s.w=b.initValue(t,20),s.h=b.initValue(i,s.w),s.name="Body",s}var pe=(r(Et,[{key:"reset",value:function(e,t){this.life=b.initValue(e,1/0),this.easing=j.getEasing(t)}},{key:"normalizeForce",value:function(e){return e.multiplyScalar(g.MEASURE)}},{key:"normalizeValue",value:function(e){return e*g.MEASURE}},{key:"initialize",value:function(){}},{key:"calculate",value:function(e,t){this.age+=t,this.age>=this.life||this.dead?(this.energy=0,this.dead=!0,this.destroy()):(e=this.easing(e.age/e.life),this.energy=Math.max(1-e,0))}},{key:"destroy",value:function(){for(var e=this.parents.length;e--;)this.parents[e].removeBehaviour(this);this.parents.length=0}}]),Et);function Et(e,t){u(this,Et),this.life=b.initValue(e,1/0),this.easing=j.getEasing(t),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.id="Behaviour_"+Et.id++,this.name="Behaviour"}pe.id=0;var $t=(f(Be,pe),r(Be,[{key:"reset",value:function(e,t,i,s){this.force=this.normalizeForce(new S(e,t)),i&&m(Be.prototype.__proto__||Object.getPrototypeOf(Be.prototype),"reset",this).call(this,i,s)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.a.add(this.force)}}]),Be);function Be(e,t,i,s){return u(this,Be),s=w(this,(Be.__proto__||Object.getPrototypeOf(Be)).call(this,i,s)),s.force=s.normalizeForce(new S(e,t)),s.name="Force",s}var Nt=(f(Me,pe),r(Me,[{key:"reset",value:function(e,t,i,s,d){this.targetPosition=b.initValue(e,new S),this.radius=b.initValue(i,1e3),this.force=b.initValue(this.normalizeValue(t),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new S,this.lengthSq=0,s&&m(Me.prototype.__proto__||Object.getPrototypeOf(Me.prototype),"reset",this).call(this,s,d)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(e.p),this.lengthSq=this.attractionForce.lengthSq(),4e-5<this.lengthSq&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),e.a.add(this.attractionForce))}}]),Me);function Me(e,t,i,s,d){return u(this,Me),d=w(this,(Me.__proto__||Object.getPrototypeOf(Me)).call(this,s,d)),d.targetPosition=b.initValue(e,new S),d.radius=b.initValue(i,1e3),d.force=b.initValue(d.normalizeValue(t),100),d.radiusSq=d.radius*d.radius,d.attractionForce=new S,d.lengthSq=0,d.name="Attraction",d}var Mn=(f(ze,pe),r(ze,[{key:"reset",value:function(e,t,i,s,d){this.panFoce=new S(e,t),this.panFoce=this.normalizeForce(this.panFoce),this.delay=i,s&&m(ze.prototype.__proto__||Object.getPrototypeOf(ze.prototype),"reset",this).call(this,s,d)}},{key:"initialize",value:function(e){e.data.time=0}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.data.time+=t,e.data.time>=this.delay&&(e.a.addXY(n.randomAToB(-this.panFoce.x,this.panFoce.x),n.randomAToB(-this.panFoce.y,this.panFoce.y)),e.data.time=0)}}]),ze);function ze(e,t,i,s,d){return u(this,ze),d=w(this,(ze.__proto__||Object.getPrototypeOf(ze)).call(this,s,d)),d.reset(e,t,i),d.time=0,d.name="RandomDrift",d}var zn=(f(De,$t),r(De,[{key:"reset",value:function(e,t,i){m(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"reset",this).call(this,0,e,t,i)}}]),De);function De(e,t,i){return u(this,De),i=w(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,0,e,t,i)),i.name="Gravity",i}var Dn=(f(Fe,pe),r(Fe,[{key:"reset",value:function(e,t,i,s,d){this.emitter=b.initValue(e,null),this.mass=b.initValue(t,!0),this.callback=b.initValue(i,null),this.collisionPool=[],this.delta=new S,s&&m(Fe.prototype.__proto__||Object.getPrototypeOf(Fe.prototype),"reset",this).call(this,s,d)}},{key:"applyBehaviour",value:function(e,t,i){for(var s,d,v,Y,fe,J,ee=(this.emitter?this.emitter.particles:this.pool).slice(i),Xe=ee.length,se=void 0,Se=void 0,Se=0;Se<Xe;Se++)(se=ee[Se])!==e&&(this.delta.copy(se.p),this.delta.sub(e.p),(s=this.delta.lengthSq())<=(J=e.radius+se.radius)*J&&(d=J-Math.sqrt(s),d+=.5,v=e.mass+se.mass,Y=this.mass?se.mass/v:.5,fe=this.mass?e.mass/v:.5,e.p.add(this.delta.clone().normalize().multiplyScalar(d*-Y)),se.p.add(this.delta.normalize().multiplyScalar(d*fe)),this.callback&&this.callback(e,se)))}}]),Fe);function Fe(e,t,i,s,d){return u(this,Fe),d=w(this,(Fe.__proto__||Object.getPrototypeOf(Fe)).call(this,s,d)),d.reset(e,t,i),d.name="Collision",d}var Fn=(f(Ve,pe),r(Ve,[{key:"reset",value:function(e,t,i,s){this.zone=e,this.zone.crossType=b.initValue(t,"dead"),i&&m(Ve.prototype.__proto__||Object.getPrototypeOf(Ve.prototype),"reset",this).call(this,i,s)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.zone.crossing(e)}}]),Ve);function Ve(e,t,i,s){return u(this,Ve),s=w(this,(Ve.__proto__||Object.getPrototypeOf(Ve)).call(this,i,s)),s.reset(e,t),s.name="CrossZone",s}var Vn=(f(Le,pe),r(Le,[{key:"reset",value:function(e,t,i,s){this.same=t==null,this.a=x.setSpanValue(b.initValue(e,1)),this.b=x.setSpanValue(t),i&&m(Le.prototype.__proto__||Object.getPrototypeOf(Le.prototype),"reset",this).call(this,i,s)}},{key:"initialize",value:function(e){e.data.alphaA=this.a.getValue(),this.same?e.data.alphaB=e.data.alphaA:e.data.alphaB=this.b.getValue()}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.alpha=e.data.alphaB+(e.data.alphaA-e.data.alphaB)*this.energy,e.alpha<.001&&(e.alpha=0)}}]),Le);function Le(e,t,i,s){return u(this,Le),s=w(this,(Le.__proto__||Object.getPrototypeOf(Le)).call(this,i,s)),s.reset(e,t),s.name="Alpha",s}var Ln=(f(je,pe),r(je,[{key:"reset",value:function(e,t,i,s){this.same=t==null,this.a=x.setSpanValue(b.initValue(e,1)),this.b=x.setSpanValue(t),i&&m(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"reset",this).call(this,i,s)}},{key:"initialize",value:function(e){e.data.scaleA=this.a.getValue(),e.data.oldRadius=e.radius,e.data.scaleB=this.same?e.data.scaleA:this.b.getValue()}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.scale=e.data.scaleB+(e.data.scaleA-e.data.scaleB)*this.energy,e.scale<1e-4&&(e.scale=0),e.radius=e.data.oldRadius*e.scale}}]),je);function je(e,t,i,s){return u(this,je),s=w(this,(je.__proto__||Object.getPrototypeOf(je)).call(this,i,s)),s.reset(e,t),s.name="Scale",s}var jn=(f(Ue,pe),r(Ue,[{key:"reset",value:function(e,t,i,s,d){this.same=t==null,this.a=x.setSpanValue(b.initValue(e,"Velocity")),this.b=x.setSpanValue(b.initValue(t,0)),this.style=b.initValue(i,"to"),s&&m(Ue.prototype.__proto__||Object.getPrototypeOf(Ue.prototype),"reset",this).call(this,s,d)}},{key:"initialize",value:function(e){e.rotation=this.a.getValue(),e.data.rotationA=this.a.getValue(),this.same||(e.data.rotationB=this.b.getValue())}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.same?this.a.a!=="V"&&this.a.a!=="Velocity"&&this.a.a!=="v"||(e.rotation=e.getDirection()):this.style==="to"||this.style==="TO"||this.style==="_"?e.rotation+=e.data.rotationB+(e.data.rotationA-e.data.rotationB)*this.energy:e.rotation+=e.data.rotationB}}]),Ue);function Ue(e,t,i,s,d){return u(this,Ue),d=w(this,(Ue.__proto__||Object.getPrototypeOf(Ue)).call(this,s,d)),d.reset(e,t,i),d.name="Rotate",d}var Un=(f($e,pe),r($e,[{key:"reset",value:function(e,t,i,s){this.a=be.createArraySpan(e),this.b=be.createArraySpan(t),i&&m($e.prototype.__proto__||Object.getPrototypeOf($e.prototype),"reset",this).call(this,i,s)}},{key:"initialize",value:function(e){e.color=this.a.getValue(),e.data.colorA=oe.hexToRgb(e.color),this.b&&(e.data.colorB=oe.hexToRgb(this.b.getValue()))}},{key:"applyBehaviour",value:function(e,t,i){this.b?(this.calculate(e,t,i),e.rgb.r=e.data.colorB.r+(e.data.colorA.r-e.data.colorB.r)*this.energy,e.rgb.g=e.data.colorB.g+(e.data.colorA.g-e.data.colorB.g)*this.energy,e.rgb.b=e.data.colorB.b+(e.data.colorA.b-e.data.colorB.b)*this.energy,e.rgb.r=Math.floor(e.rgb.r),e.rgb.g=Math.floor(e.rgb.g),e.rgb.b=Math.floor(e.rgb.b)):(e.rgb.r=e.data.colorA.r,e.rgb.g=e.data.colorA.g,e.rgb.b=e.data.colorA.b)}}]),$e);function $e(e,t,i,s){return u(this,$e),s=w(this,($e.__proto__||Object.getPrototypeOf($e)).call(this,i,s)),s.reset(e,t),s.name="Color",s}var At="changing",$n=(f(Ne,pe),r(Ne,[{key:"setAngleAndForce",value:function(e,t){this.force=At,this.angle=n.PI/2,e==="right"?this.angle=n.PI/2:e==="left"?this.angle=-n.PI/2:e==="random"?this.angle="random":e instanceof x?(this.angle="span",this.span=e):e&&(this.angle=e),String(t).toLowerCase()==="changing"||String(t).toLowerCase()==="chang"||String(t).toLowerCase()==="auto"?this.force=At:t&&(this.force=t)}},{key:"reset",value:function(e,t,i,s){this.angle=n.PI/2,this.setAngleAndForce(e,t),i&&m(Ne.prototype.__proto__||Object.getPrototypeOf(Ne.prototype),"reset",this).call(this,i,s)}},{key:"initialize",value:function(e){this.angle==="random"?e.data.cangle=n.randomAToB(-n.PI,n.PI):this.angle==="span"&&(e.data.cangle=this.span.getValue()),e.data.cyclone=new S(0,0)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),t=void 0,i=e.v.getGradient(),this.angle==="random"||this.angle==="span"?i+=e.data.cangle:i+=this.angle,t=this.force===At?e.v.length()/100:this.force,e.data.cyclone.x=t*Math.cos(i),e.data.cyclone.y=t*Math.sin(i),e.data.cyclone=this.normalizeForce(e.data.cyclone),e.a.add(e.data.cyclone)}}]),Ne);function Ne(e,t,i,s){return u(this,Ne),s=w(this,(Ne.__proto__||Object.getPrototypeOf(Ne)).call(this,i,s)),s.setAngleAndForce(e,t),s.name="Cyclone",s}var Nn=(f(We,Nt),r(We,[{key:"reset",value:function(e,t,i,s,d){m(We.prototype.__proto__||Object.getPrototypeOf(We.prototype),"reset",this).call(this,e,t,i,s,d),this.force*=-1}}]),We);function We(e,t,i,s,d){return u(this,We),d=w(this,(We.__proto__||Object.getPrototypeOf(We)).call(this,e,t,i,s,d)),d.force*=-1,d.name="Repulsion",d}var Wn=(f(He,pe),r(He,[{key:"reset",value:function(e,t,i,s){this.distanceVec=new S,this.centerPoint=b.initValue(e,new S),this.force=b.initValue(this.normalizeValue(t),100),i&&m(He.prototype.__proto__||Object.getPrototypeOf(He.prototype),"reset",this).call(this,i,s)}},{key:"initialize",value:function(){}},{key:"applyBehaviour",value:function(e,t){this.distanceVec.set(this.centerPoint.x-e.p.x,this.centerPoint.y-e.p.y);var i,s=this.distanceVec.lengthSq();s!==0&&(i=this.distanceVec.length(),i=this.force*t/(s*i),e.v.x+=i*this.distanceVec.x,e.v.y+=i*this.distanceVec.y)}}]),He);function He(e,t,i,s){return u(this,He),s=w(this,(He.__proto__||Object.getPrototypeOf(He)).call(this,i,s)),s.distanceVec=new S,s.centerPoint=b.initValue(e,new S),s.force=b.initValue(s.normalizeValue(t),100),s.name="GravityWell",s}var Hn={initialize:function(e,t,i){for(var s=i.length,d=void 0,d=0;d<s;d++)i[d]instanceof we?i[d].init(e,t):this.init(e,t,i[d]);this.bindEmitter(e,t)},init:function(e,t,i){b.setProp(t,i),b.setVectorVal(t,i)},bindEmitter:function(e,t){e.bindEmitter&&(t.p.add(e.p),t.v.add(e.v),t.a.add(e.a),t.v.rotate(n.degreeTransform(e.rotation)))}},kt=(f(at,ie),r(at,[{key:"emit",value:function(e,t){this.stoped=!1,this.emitTime=0,this.totalTime=b.initValue(e,1/0),t===!0||t==="life"||t==="destroy"?this.life=e==="once"?1:this.totalTime:isNaN(t)||(this.life=t),this.rate.init()}},{key:"stop",value:function(){this.totalTime=-1,this.emitTime=0,this.stoped=!0}},{key:"preEmit",value:function(e){var t=this.stoped,i=this.emitTime,s=this.totalTime;for(this.stoped=!1,this.emitTime=0,this.totalTime=e,this.rate.init();.0167<e;)e-=.0167,this.update(.0167);this.stoped=t,this.emitTime=i+Math.max(e,0),this.totalTime=s}},{key:"removeAllParticles",value:function(){for(var e=this.particles.length;e--;)this.particles[e].dead=!0}},{key:"addSelfInitialize",value:function(e){e.init?e.init(this):this.initAll()}},{key:"addInitialize",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var s=t.length;s--;)this.initializes.push(t[s])}},{key:"removeInitialize",value:function(e){e=this.initializes.indexOf(e),-1<e&&this.initializes.splice(e,1)}},{key:"removeAllInitializers",value:function(){b.emptyArray(this.initializes)}},{key:"addBehaviour",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var s=arguments.length;s--;){var d=t[s];this.behaviours.push(d),d.parents&&d.parents.push(this)}}},{key:"removeBehaviour",value:function(e){var t=this.behaviours.indexOf(e);return this.behaviours.splice(t,1),e.parents&&(t=e.parents.indexOf(e),e.parents.splice(t,1)),t}},{key:"removeAllBehaviours",value:function(){b.emptyArray(this.behaviours)}},{key:"update",value:function(e){this.age+=e,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(e),this.integrate(e)}},{key:"integrate",value:function(e){if(this.parent){var t=1-this.damping;this.parent.integrator.calculate(this,e,t);for(var s=void 0,i=void 0,s=this.particles.length-1;0<=s;s--)(i=this.particles[s]).update(e,s),this.parent.integrator.calculate(i,e,t),this.dispatch("PARTICLE_UPDATE",i),i.dead&&(this.dispatch("PARTICLE_DEAD",i),this.parent.pool.expire(i),this.particles.splice(s,1))}}},{key:"dispatch",value:function(e,t){this.parent&&this.parent.dispatchEvent(e,t),this.bindEvent&&this.dispatchEvent(e,t)}},{key:"emitting",value:function(e){if(this.totalTime==="once"){var t=void 0,i=this.rate.getValue(99999);for(0<i&&(this.emitSpeed=i),t=0;t<i;t++)this.createParticle();this.totalTime="none"}else if(this.emitTime+=e,this.emitTime<this.totalTime){var s=this.rate.getValue(e),d=void 0;for(0<s&&(this.emitSpeed=s),d=0;d<s;d++)this.createParticle()}}},{key:"createParticle",value:function(e,t){var i=this.parent.pool.get(ie);return this.setupParticle(i,e,t),this.dispatch("PARTICLE_CREATED",i),i}},{key:"setupParticle",value:function(e,t,i){var s=this.initializes,d=this.behaviours;t&&(s=b.toArray(t)),i&&(d=b.toArray(i)),e.reset(),Hn.initialize(this,e,s),e.addBehaviours(d),(e.parent=this).particles.push(e)}},{key:"remove",value:function(){this.stop(),b.destroyAll(this.particles)}},{key:"destroy",value:function(){this.dead=!0,this.remove(),this.removeAllInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this)}}]),at);function at(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return u(this,at),e=w(this,(at.__proto__||Object.getPrototypeOf(at)).call(this,e)),e.particles=[],e.behaviours=[],e.initializes=[],e.emitTime=0,e.emitSpeed=0,e.totalTime=-1,e.damping=.006,e.bindEmitter=!0,e.rate=new yt(1,.1),e.name="Emitter",e.id=Z.id(e.name),e}X.bind(kt);var qn=(f(qe,kt),r(qe,[{key:"addSelfBehaviour",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var d=void 0,s=t.length,d=0;d<s;d++){var v=t[d];this.selfBehaviours.push(v),v.initialize(this)}}},{key:"removeSelfBehaviour",value:function(e){e=this.selfBehaviours.indexOf(e),-1<e&&this.selfBehaviours.splice(e,1)}},{key:"update",value:function(e){if(m(qe.prototype.__proto__||Object.getPrototypeOf(qe.prototype),"update",this).call(this,e),!this.sleep)for(var t=this.selfBehaviours.length,i=void 0,i=0;i<t;i++)this.selfBehaviours[i].applyBehaviour(this,e,i)}}]),qe);function qe(e){return u(this,qe),e=w(this,(qe.__proto__||Object.getPrototypeOf(qe)).call(this,e)),e.selfBehaviours=[],e}var Zn=(f(Ie,kt),r(Ie,[{key:"initEventHandler",value:function(){var e=this;this.mousemoveHandler=function(t){return e.mousemove.call(e,t)},this.mousedownHandler=function(t){return e.mousedown.call(e,t)},this.mouseupHandler=function(t){return e.mouseup.call(e,t)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)}},{key:"emit",value:function(){this._allowEmitting=!0}},{key:"stop",value:function(){this._allowEmitting=!1}},{key:"mousemove",value:function(e){e.layerX||e.layerX===0?(this.p.x+=(e.layerX-this.p.x)*this.ease,this.p.y+=(e.layerY-this.p.y)*this.ease):!e.offsetX&&e.offsetX!==0||(this.p.x+=(e.offsetX-this.p.x)*this.ease,this.p.y+=(e.offsetY-this.p.y)*this.ease),this._allowEmitting&&m(Ie.prototype.__proto__||Object.getPrototypeOf(Ie.prototype),"emit",this).call(this,"once")}},{key:"destroy",value:function(){m(Ie.prototype.__proto__||Object.getPrototypeOf(Ie.prototype),"destroy",this).call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)}}]),Ie);function Ie(e,t,i){return u(this,Ie),i=w(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,i)),i.mouseTarget=b.initValue(e,window),i.ease=b.initValue(t,.7),i._allowEmitting=!1,i.initEventHandler(),i}var Oe=(r(Tt,[{key:"setStroke",value:function(e,t){e=0<arguments.length&&e!==void 0?e:"#000000",t=1<arguments.length&&t!==void 0?t:1,this.stroke={color:e,thinkness:t}}},{key:"initHandler",value:function(){var e=this;this._protonUpdateHandler=function(){e.onProtonUpdate.call(e)},this._protonUpdateAfterHandler=function(){e.onProtonUpdateAfter.call(e)},this._emitterAddedHandler=function(t){e.onEmitterAdded.call(e,t)},this._emitterRemovedHandler=function(t){e.onEmitterRemoved.call(e,t)},this._particleCreatedHandler=function(t){e.onParticleCreated.call(e,t)},this._particleUpdateHandler=function(t){e.onParticleUpdate.call(e,t)},this._particleDeadHandler=function(t){e.onParticleDead.call(e,t)}}},{key:"init",value:function(e){(this.parent=e).addEventListener("PROTON_UPDATE",this._protonUpdateHandler),e.addEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),e.addEventListener("EMITTER_ADDED",this._emitterAddedHandler),e.addEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),e.addEventListener("PARTICLE_CREATED",this._particleCreatedHandler),e.addEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),e.addEventListener("PARTICLE_DEAD",this._particleDeadHandler)}},{key:"resize",value:function(){}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){this.parent.removeEventListener("PROTON_UPDATE",this._protonUpdateHandler),this.parent.removeEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),this.parent.removeEventListener("EMITTER_ADDED",this._emitterAddedHandler),this.parent.removeEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),this.parent.removeEventListener("PARTICLE_CREATED",this._particleCreatedHandler),this.parent.removeEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),this.parent.removeEventListener("PARTICLE_DEAD",this._particleDeadHandler),this.parent=null}},{key:"onProtonUpdate",value:function(){}},{key:"onProtonUpdateAfter",value:function(){}},{key:"onEmitterAdded",value:function(){}},{key:"onEmitterRemoved",value:function(){}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(){}},{key:"onParticleDead",value:function(){}}]),Tt);function Tt(e,t){u(this,Tt),this.pool=new W,this.element=e,this.stroke=t,this.circleConf={isCircle:!0},this.initHandler(),this.name="BaseRenderer"}var Gn=(f(st,Oe),r(st,[{key:"resize",value:function(e,t){this.element.width=e,this.element.height=t}},{key:"onProtonUpdate",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"onParticleCreated",value:function(e){e.body?N(e.body,this.addImg2Body,e):e.color=e.color||"#ff0000"}},{key:"onParticleUpdate",value:function(e){e.body?e.body instanceof Image&&this.drawImage(e):this.drawCircle(e)}},{key:"onParticleDead",value:function(e){e.body=null}},{key:"addImg2Body",value:function(e,t){t.body=e}},{key:"drawImage",value:function(e){var t,i=e.body.width*e.scale|0,s=e.body.height*e.scale|0,d=e.p.x-i/2,v=e.p.y-s/2;e.color?(e.data.buffer||(e.data.buffer=this.createBuffer(e.body)),(t=e.data.buffer.getContext("2d")).clearRect(0,0,e.data.buffer.width,e.data.buffer.height),t.globalAlpha=e.alpha,t.drawImage(e.body,0,0),t.globalCompositeOperation="source-atop",t.fillStyle=oe.rgbToHex(e.rgb),t.fillRect(0,0,e.data.buffer.width,e.data.buffer.height),t.globalCompositeOperation="source-over",t.globalAlpha=1,this.context.drawImage(e.data.buffer,0,0,e.data.buffer.width,e.data.buffer.height,d,v,i,s)):(this.context.save(),this.context.globalAlpha=e.alpha,this.context.translate(e.p.x,e.p.y),this.context.rotate(n.degreeTransform(e.rotation)),this.context.translate(-e.p.x,-e.p.y),this.context.drawImage(e.body,0,0,e.body.width,e.body.height,d,v,i,s),this.context.globalAlpha=1,this.context.restore())}},{key:"drawCircle",value:function(e){e.rgb?this.context.fillStyle="rgba("+e.rgb.r+","+e.rgb.g+","+e.rgb.b+","+e.alpha+")":this.context.fillStyle=e.color,this.context.beginPath(),this.context.arc(e.p.x,e.p.y,e.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()}},{key:"createBuffer",value:function(e){if(e instanceof Image){var t=e.width+"_"+e.height,i=this.bufferCache[t];return i||((i=document.createElement("canvas")).width=e.width,i.height=e.height,this.bufferCache[t]=i),i}}}]),st);function st(e){return u(this,st),e=w(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,e)),e.stroke=null,e.context=e.element.getContext("2d"),e.bufferCache={},e.name="CanvasRenderer",e}var Xn=(f(lt,Oe),r(lt,[{key:"onParticleCreated",value:function(e){e.body?N(e.body,this.addImg2Body,e):(e.body=this.pool.get(this.circleConf,e),this.element.appendChild(e.body))}},{key:"onParticleUpdate",value:function(e){this.bodyReady(e)&&(this.transform3d?C.transform3d(e.body,e.p.x,e.p.y,e.scale,e.rotation):C.transform(e.body,e.p.x,e.p.y,e.scale,e.rotation),e.body.style.opacity=e.alpha,e.body.isCircle&&(e.body.style.backgroundColor=e.color||"#ff0000"))}},{key:"onParticleDead",value:function(e){this.bodyReady(e)&&(this.element.removeChild(e.body),this.pool.expire(e.body),e.body=null)}},{key:"bodyReady",value:function(e){return a(e.body)==="object"&&e.body&&!e.body.isInner}},{key:"addImg2Body",value:function(e,t){t.dead||(t.body=this.pool.get(e,t),C.resize(t.body,e.width,e.height),this.element.appendChild(t.body))}},{key:"createBody",value:function(e,t){return e.isCircle?this.createCircle(t):this.createSprite(e,t)}},{key:"createCircle",value:function(e){var t=C.createDiv(e.id+"_dom",2*e.radius,2*e.radius);return t.style.borderRadius=e.radius+"px",this.stroke&&(t.style.borderColor=this.stroke.color,t.style.borderWidth=this.stroke.thinkness+"px"),t.isCircle=!0,t}},{key:"createSprite",value:function(s,t){var i=typeof s=="string"?s:s.src,s=C.createDiv(t.id+"_dom",s.width,s.height);return s.style.backgroundImage="url("+i+")",s}}]),lt);function lt(e){u(this,lt);var t=w(this,(lt.__proto__||Object.getPrototypeOf(lt)).call(this,e));return t.stroke=null,t.pool.create=function(i,s){return t.createBody(i,s)},t.addImg2Body=t.addImg2Body.bind(t),t.transform3d=!1,t.name="DomRenderer",t}var Yn=(f(ht,Oe),r(ht,[{key:"onParticleCreated",value:function(e){e.body?this.createSprite(e):this.createCircle(e),this.element.addChild(e.body)}},{key:"onParticleUpdate",value:function(e){e.body&&(e.body.x=e.p.x,e.body.y=e.p.y,e.body.alpha=e.alpha,e.body.scaleX=e.body.scaleY=e.scale,e.body.rotation=e.rotation)}},{key:"onParticleDead",value:function(e){e.body&&(e.body.parent&&e.body.parent.removeChild(e.body),this.pool.expire(e.body),e.body=null),e.graphics&&this.pool.expire(e.graphics)}},{key:"createSprite",value:function(e){e.body=this.pool.get(e.body),e.body.parent||e.body.image&&(e.body.regX=e.body.image.width/2,e.body.regY=e.body.image.height/2)}},{key:"createCircle",value:function(e){var t=this.pool.get(createjs.Graphics);this.stroke&&(this.stroke instanceof String?t.beginStroke(this.stroke):t.beginStroke("#000000")),t.beginFill(e.color||"#ff0000").drawCircle(0,0,e.radius);var i=this.pool.get(createjs.Shape,[t]);e.body=i,e.graphics=t}}]),ht);function ht(e,t){return u(this,ht),e=w(this,(ht.__proto__||Object.getPrototypeOf(ht)).call(this,e)),e.stroke=t,e.name="EaselRenderer",e}var Kn=(f(ut,Oe),r(ut,[{key:"resize",value:function(e,t){this.element.width=e,this.element.height=t}},{key:"createImageData",value:function(e){this.rectangle=e||new ke(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onProtonUpdate",value:function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)}},{key:"onProtonUpdateAfter",value:function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(e){this.imageData&&this.setPixel(this.imageData,Math.floor(e.p.x-this.rectangle.x),Math.floor(e.p.y-this.rectangle.y),e)}},{key:"setPixel",value:function(e,t,i,s){var d=s.rgb;t<0||t>this.element.width||i<0||i>this.elementwidth||(t=4*((i>>0)*e.width+(t>>0)),e.data[t]=d.r,e.data[1+t]=d.g,e.data[2+t]=d.b,e.data[3+t]=255*s.alpha)}},{key:"onParticleDead",value:function(){}}]),ut);function ut(e,t){return u(this,ut),e=w(this,(ut.__proto__||Object.getPrototypeOf(ut)).call(this,e)),e.context=e.element.getContext("2d"),e.imageData=null,e.rectangle=null,e.rectangle=t,e.createImageData(t),e.name="PixelRenderer",e}var bt=void 0,Qn=(f(Ze,Oe),r(Ze,[{key:"setPIXI",value:function(e){try{bt=e||{Sprite:{}},this.createFromImage=bt.Sprite.from||bt.Sprite.fromImage}catch{}}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(e){e.body?e.body=this.pool.get(e.body,e):e.body=this.pool.get(this.circleConf,e),this.blendMode&&(e.body.blendMode=this.blendMode),this.element.addChild(e.body)}},{key:"onParticleUpdate",value:function(e){this.transform(e,e.body),this.setColor!==!0&&this.color!==!0||(e.body.tint=oe.getHex16FromParticle(e))}},{key:"onParticleDead",value:function(e){this.element.removeChild(e.body),this.pool.expire(e.body),e.body=null}},{key:"destroy",value:function(e){m(Ze.prototype.__proto__||Object.getPrototypeOf(Ze.prototype),"destroy",this).call(this),this.pool.destroy();for(var t=e.length;t--;){var i=e[t];i.body&&this.element.removeChild(i.body)}}},{key:"transform",value:function(e,t){t.x=e.p.x,t.y=e.p.y,t.alpha=e.alpha,t.scale.x=e.scale,t.scale.y=e.scale,t.rotation=e.rotation*n.PI_180}},{key:"createBody",value:function(e,t){return e.isCircle?this.createCircle(t):this.createSprite(e)}},{key:"createSprite",value:function(e){return e=e.isInner?this.createFromImage(e.src):new bt.Sprite(e),e.anchor.x=.5,e.anchor.y=.5,e}},{key:"createCircle",value:function(e){var t,i=new bt.Graphics;return this.stroke&&(t=this.stroke instanceof String?this.stroke:0,i.beginStroke(t)),i.beginFill(e.color||36077),i.drawCircle(0,0,e.radius),i.endFill(),i}}]),Ze);function Ze(e,t){u(this,Ze);var i=w(this,(Ze.__proto__||Object.getPrototypeOf(Ze)).call(this,e));return i.stroke=t,i.color=!1,i.setColor=!1,i.blendMode=null,i.pool.create=function(s,d){return i.createBody(s,d)},i.setPIXI(window.PIXI),i.name="PixiRenderer",i}var Jn=(r(Bt,[{key:"set",value:function(e,t){t===0?M.set(e,this.mats[0]):M.multiply(this.mats[t-1],e,this.mats[t]),this.size=Math.max(this.size,t+1)}},{key:"push",value:function(e){this.size===0?M.set(e,this.mats[0]):M.multiply(this.mats[this.size-1],e,this.mats[this.size]),this.size++}},{key:"pop",value:function(){0<this.size&&this.size--}},{key:"top",value:function(){return this.mats[this.size-1]}}]),Bt);function Bt(){u(this,Bt),this.mats=[];for(var e=this.size=0;e<20;e++)this.mats.push(M.create([0,0,0,0,0,0,0,0,0]))}f(Ge,Oe),r(Ge,[{key:"init",value:function(e){m(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"init",this).call(this,e),this.resize(this.element.width,this.element.height)}},{key:"resize",value:function(e,t){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/e,this.smat[4]=1/t,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,e,t),this.element.width=e,this.element.height=t}},{key:"setMaxRadius",value:function(e){this.circleCanvasURL=this.createCircle(e)}},{key:"getVertexShader",value:function(){return["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join(`
`)}},{key:"getFragmentShader",value:function(){return["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join(`
`)}},{key:"initVar",value:function(){this.mstack=new Jn,this.umat=M.create([2,0,1,0,-2,0,-1,1,1]),this.smat=M.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}}},{key:"blendEquation",value:function(e){this.gl.blendEquation(this.gl[e])}},{key:"blendFunc",value:function(e,t){this.gl.blendFunc(this.gl[e],this.gl[t])}},{key:"getShader",value:function(e,t,i){return i=i?e.createShader(e.FRAGMENT_SHADER):e.createShader(e.VERTEX_SHADER),e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(alert(e.getShaderInfoLog(i)),null)}},{key:"initShaders",value:function(){var e=this.getShader(this.gl,this.getFragmentShader(),!0),t=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,t),this.gl.attachShader(this.sprogram,e),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)}},{key:"initBuffers",value:function(){var e;this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,3,1,0,2,3]),this.gl.STATIC_DRAW);for(var i=void 0,t=[],i=0;i<100;i++)t.push(i);for(e=new Uint16Array(t),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.STATIC_DRAW),t=[],i=0;i<100;i++)t.push(i,i+1,i+2);e=new Uint16Array(t),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.STATIC_DRAW)}},{key:"createCircle",value:function(i){this.circleCanvasRadius=P(b.initValue(i,32));var t=C.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),i=t.getContext("2d");return i.beginPath(),i.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),i.closePath(),i.fillStyle="#FFF",i.fill(),t.toDataURL()}},{key:"drawImg2Canvas",value:function(e){var t=e.body.width,i=e.body.height,s=P(e.body.width),d=P(e.body.height),v=e.body.width/s,Y=e.body.height/d;this.texturebuffers[e.data.src]||(this.texturebuffers[e.data.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),e.data.texture=this.texturebuffers[e.data.src][0],e.data.vcBuffer=this.texturebuffers[e.data.src][1],e.data.tcBuffer=this.texturebuffers[e.data.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,v,0,0,Y,Y,Y]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,t,0,0,i,t,i]),this.gl.STATIC_DRAW),d=e.data.canvas.getContext("2d").getImageData(0,0,s,d),this.gl.bindTexture(this.gl.TEXTURE_2D,e.data.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,d),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),e.data.textureLoaded=!0,e.data.textureWidth=t,e.data.textureHeight=i}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(e){e.data.textureLoaded=!1,e.data.tmat=M.create(),e.data.tmat[8]=1,e.data.imat=M.create(),e.data.imat[8]=1,e.body?N(e.body,this.addImg2Body,e):(N(this.circleCanvasURL,this.addImg2Body,e),e.data.oldScale=e.radius/this.circleCanvasRadius)}},{key:"addImg2Body",value:function(e,t){t.dead||(t.body=e,t.data.src=e.src,t.data.canvas=I(e),t.data.oldScale=1,this.drawImg2Canvas(t))}},{key:"onParticleUpdate",value:function(e){e.data.textureLoaded&&(this.updateMatrix(e),this.gl.uniform3f(this.sprogram.color,e.rgb.r/255,e.rgb.g/255,e.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,e.data.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())}},{key:"onParticleDead",value:function(){}},{key:"updateMatrix",value:function(e){var t=R(-e.data.textureWidth/2,-e.data.textureHeight/2),i=R(e.p.x,e.p.y),d=e.rotation*n.PI_180,s=O(d),d=e.scale*e.data.oldScale,d=B(d,d),d=A(t,d),d=A(d,s);d=A(d,i),M.inverse(d,e.data.imat),d[2]=e.alpha,this.mstack.push(d)}}]),X=Ge;function Ge(e){return u(this,Ge),e=w(this,(Ge.__proto__||Object.getPrototypeOf(Ge)).call(this,e)),e.gl=e.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),e.gl||alert("Sorry your browser do not suppest WebGL!"),e.initVar(),e.setMaxRadius(),e.initShaders(),e.initBuffers(),e.gl.blendEquation(e.gl.FUNC_ADD),e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA),e.gl.enable(e.gl.BLEND),e.addImg2Body=e.addImg2Body.bind(e),e.name="WebGLRenderer",e}f(wt,Oe),Oe=wt;function wt(e){return u(this,wt),e=w(this,(wt.__proto__||Object.getPrototypeOf(wt)).call(this,e)),e.name="CustomRenderer",e}var Wt=(f(ct,xe),r(ct,[{key:"getPosition",value:function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector}},{key:"getDirection",value:function(e,t){var i=this.dy,s=-this.dx;return 0<(i*e+s*t+this.dot)*(s==0?1:s)}},{key:"getDistance",value:function(e,t){return(this.dy*e+-this.dx*t+this.dot)/Math.sqrt(this.xxyy)}},{key:"getSymmetric",value:function(e){var s=e.getGradient(),t=2*(this.getGradient()-s),i=e.x,s=e.y;return e.x=i*Math.cos(t)-s*Math.sin(t),e.y=i*Math.sin(t)+s*Math.cos(t),e}},{key:"getGradient",value:function(){return Math.atan2(this.dy,this.dx)}},{key:"rangeOut",value:function(e){if(Math.abs(this.getGradient())<=n.PI/4){if(e.p.x<=this.maxx&&e.p.x>=this.minx)return!0}else if(e.p.y<=this.maxy&&e.p.y>=this.miny)return!0;return!1}},{key:"getLength",value:function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}},{key:"crossing",value:function(e){this.crossType==="dead"?this.direction===">"||this.direction==="R"||this.direction==="right"||this.direction==="down"?this.rangeOut(e)&&this.getDirection(e.p.x,e.p.y)&&(e.dead=!0):this.rangeOut(e)&&(this.getDirection(e.p.x,e.p.y)||(e.dead=!0)):this.crossType==="bound"?this.rangeOut(e)&&this.getDistance(e.p.x,e.p.y)<=e.radius&&(this.dx===0?e.v.x*=-1:this.dy===0?e.v.y*=-1:this.getSymmetric(e.v)):this.crossType==="cross"&&this.alert&&(console.error("Sorry, LineZone does not support cross method!"),this.alert=!1)}}]),ct);function ct(e,t,i,s,d){u(this,ct);var v=w(this,(ct.__proto__||Object.getPrototypeOf(ct)).call(this));return 0<=i-e?(v.x1=e,v.y1=t,v.x2=i,v.y2=s):(v.x1=i,v.y1=s,v.x2=e,v.y2=t),v.dx=v.x2-v.x1,v.dy=v.y2-v.y1,v.minx=Math.min(v.x1,v.x2),v.miny=Math.min(v.y1,v.y2),v.maxx=Math.max(v.x1,v.x2),v.maxy=Math.max(v.y1,v.y2),v.dot=v.x2*v.y1-v.x1*v.y2,v.xxyy=v.dx*v.dx+v.dy*v.dy,v.gradient=v.getGradient(),v.length=v.getLength(),v.direction=b.initValue(d,">"),v}var Ht=(f(dt,xe),r(dt,[{key:"getPosition",value:function(){return this.angle=n.PIx2*Math.random(),this.randomRadius=Math.random()*this.radius,this.vector.x=this.x+this.randomRadius*Math.cos(this.angle),this.vector.y=this.y+this.randomRadius*Math.sin(this.angle),this.vector}},{key:"setCenter",value:function(e,t){this.center.x=e,this.center.y=t}},{key:"crossing",value:function(e){var t=e.p.distanceTo(this.center);this.crossType==="dead"?t-e.radius>this.radius&&(e.dead=!0):this.crossType==="bound"?t+e.radius>=this.radius&&this.getSymmetric(e):this.crossType==="cross"&&this.alert&&(console.error("Sorry, CircleZone does not support cross method!"),this.alert=!1)}},{key:"getSymmetric",value:function(e){var s=e.v.getGradient(),t=2*(this.getGradient(e)-s),i=e.v.x,s=e.v.y;e.v.x=i*Math.cos(t)-s*Math.sin(t),e.v.y=i*Math.sin(t)+s*Math.cos(t)}},{key:"getGradient",value:function(e){return-n.PI_2+Math.atan2(e.p.y-this.center.y,e.p.x-this.center.x)}}]),dt);function dt(e,t,i){u(this,dt);var s=w(this,(dt.__proto__||Object.getPrototypeOf(dt)).call(this));return s.x=e,s.y=t,s.radius=i,s.angle=0,s.center={x:e,y:t},s}var qt=(f(pt,xe),r(pt,[{key:"getPosition",value:function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector}},{key:"crossing",value:function(e){this.crossType==="dead"?((e.p.x+e.radius<this.x||e.p.x-e.radius>this.x+this.width)&&(e.dead=!0),(e.p.y+e.radius<this.y||e.p.y-e.radius>this.y+this.height)&&(e.dead=!0)):this.crossType==="bound"?(e.p.x-e.radius<this.x?(e.p.x=this.x+e.radius,e.v.x*=-1):e.p.x+e.radius>this.x+this.width&&(e.p.x=this.x+this.width-e.radius,e.v.x*=-1),e.p.y-e.radius<this.y?(e.p.y=this.y+e.radius,e.v.y*=-1):e.p.y+e.radius>this.y+this.height&&(e.p.y=this.y+this.height-e.radius,e.v.y*=-1)):this.crossType==="cross"&&(e.p.x+e.radius<this.x&&e.v.x<=0?e.p.x=this.x+this.width+e.radius:e.p.x-e.radius>this.x+this.width&&0<=e.v.x&&(e.p.x=this.x-e.radius),e.p.y+e.radius<this.y&&e.v.y<=0?e.p.y=this.y+this.height+e.radius:e.p.y-e.radius>this.y+this.height&&0<=e.v.y&&(e.p.y=this.y-e.radius))}}]),pt);function pt(e,t,i,s){u(this,pt);var d=w(this,(pt.__proto__||Object.getPrototypeOf(pt)).call(this));return d.x=e,d.y=t,d.width=i,d.height=s,d}f(ft,xe),r(ft,[{key:"reset",value:function(e,t,i,s){this.imageData=e,this.x=b.initValue(t,0),this.y=b.initValue(i,0),this.d=b.initValue(s,2),this.vectors=[],this.setVectors()}},{key:"setVectors",value:function(){for(var s=void 0,e=void 0,t=this.imageData.width,i=this.imageData.height,s=0;s<t;s+=this.d)for(e=0;e<i;e+=this.d){var d=4*((e>>0)*t+(s>>0));0<this.imageData.data[3+d]&&this.vectors.push({x:s+this.x,y:e+this.y})}return this.vector}},{key:"getBound",value:function(e,t){return e=4*((t>>0)*this.imageData.width+(e>>0)),0<this.imageData.data[3+e]}},{key:"getPosition",value:function(){var e=b.getRandFromArray(this.vectors);return this.vector.copy(e)}},{key:"getColor",value:function(e,t){return e-=this.x,e=4*(((t-=this.y)>>0)*this.imageData.width+(e>>0)),{r:this.imageData.data[e],g:this.imageData.data[1+e],b:this.imageData.data[2+e],a:this.imageData.data[3+e]}}},{key:"crossing",value:function(e){this.crossType==="dead"?this.getBound(e.p.x-this.x,e.p.y-this.y)?e.dead=!0:e.dead=!1:this.crossType==="bound"&&(this.getBound(e.p.x-this.x,e.p.y-this.y)||e.v.negate())}}]),f=ft;function ft(e,t,i,s){u(this,ft);var d=w(this,(ft.__proto__||Object.getPrototypeOf(ft)).call(this));return d.reset(e,t,i,s),d}return r={addEventListener:function(e,t){e.addEventListener("PROTON_UPDATE_AFTER",function(){return t()})},getStyle:function(e){return e=oe.hexToRgb(0<arguments.length&&e!==void 0?e:"#ff0000"),"rgba("+e.r+", "+e.g+", "+e.b+", 0.5)"},drawZone:function(e,t,i,s){var d=t.getContext("2d"),v=this.getStyle();this.addEventListener(e,function(){s&&d.clearRect(0,0,t.width,t.height),i instanceof Ct?(d.beginPath(),d.fillStyle=v,d.arc(i.x,i.y,10,0,2*Math.PI,!0),d.fill(),d.closePath()):i instanceof Wt?(d.beginPath(),d.strokeStyle=v,d.moveTo(i.x1,i.y1),d.lineTo(i.x2,i.y2),d.stroke(),d.closePath()):i instanceof qt?(d.beginPath(),d.strokeStyle=v,d.drawRect(i.x,i.y,i.width,i.height),d.stroke(),d.closePath()):i instanceof Ht&&(d.beginPath(),d.strokeStyle=v,d.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),d.stroke(),d.closePath())})},drawEmitter:function(e,t,i,s){var d=t.getContext("2d"),v=this.getStyle();this.addEventListener(e,function(){s&&d.clearRect(0,0,t.width,t.height),d.beginPath(),d.fillStyle=v,d.arc(i.p.x,i.p.y,10,0,2*Math.PI,!0),d.fill(),d.closePath()})}},g.Particle=ie,g.Pool=W,g.Util=b,g.ColorUtil=oe,g.MathUtil=n,g.Vector2D=g.Vector=S,g.Polar2D=g.Polar=Ce,g.ArraySpan=be,g.Rectangle=ke,g.Rate=yt,g.ease=j,g.Span=x,g.Mat3=M,g.getSpan=function(e,t,i){return new x(e,t,i)},g.createArraySpan=be.createArraySpan,g.Initialize=g.Init=we,g.Life=g.L=_t,g.Position=g.P=Sn,g.Velocity=g.V=On,g.Mass=g.M=An,g.Radius=g.R=Tn,g.Body=g.B=Bn,g.Behaviour=pe,g.Force=g.F=$t,g.Attraction=g.A=Nt,g.RandomDrift=g.RD=Mn,g.Gravity=g.G=zn,g.Collision=Dn,g.CrossZone=Fn,g.Alpha=Vn,g.Scale=g.S=Ln,g.Rotate=jn,g.Color=Un,g.Repulsion=Nn,g.Cyclone=$n,g.GravityWell=Wn,g.Emitter=kt,g.BehaviourEmitter=qn,g.FollowEmitter=Zn,g.Zone=xe,g.LineZone=Wt,g.CircleZone=Ht,g.PointZone=Ct,g.RectZone=qt,g.ImageZone=f,g.CanvasRenderer=Gn,g.DomRenderer=Xn,g.EaselRenderer=Yn,g.PixiRenderer=Qn,g.PixelRenderer=Kn,g.WebGLRenderer=g.WebGlRenderer=X,g.CustomRenderer=Oe,g.Debug=r,b.assign(g,j),g})})(Rn);var Fr=Rn.exports;const c=bn(Fr);var In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ue=function(o,h){if(!(o instanceof h))throw new TypeError("Cannot call a class as a function")},ce=function(){function o(h,l){for(var n=0;n<l.length;n++){var a=l[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(h,a.key,a)}}return function(h,l,n){return l&&o(h.prototype,l),n&&o(h,n),h}}(),ve=function(o,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);o.prototype=Object.create(h&&h.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(o,h):o.__proto__=h)},ye=function(o,h){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:o},Vr=function(){function o(){ue(this,o),this.list=[]}return ce(o,[{key:"set",value:function(l,n){this.list.push({probability:l,target:n,a:0,b:1}),this.calculation()}},{key:"calculation",value:function(){for(var l=0,n=0;n<this.list.length;n++)l+=this.list[n].probability;for(var a=0;a<this.list.length;a++){var u=this.list[a],r=u.probability/l;u.a=a===0?0:this.list[a-1].b,u.b=u.a+r}}},{key:"getResult",value:function(){for(var l=Math.random(),n=0;n<this.list.length;n++){var a=this.list[n];if(l<=a.b&&l>a.a)return a.target}return this.list[0].target}}]),o}(),_e=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n._iid=0,n._oid=0,n.size={width:0,height:0},n.canvasRef=k.createRef(),n}return ce(h,[{key:"componentDidMount",value:function(){var n=this;this._oid=setTimeout(function(){n.initCanvas(),n.resize=n.resize.bind(n),window.addEventListener("resize",n.resize)},100);var a=this.getCanvas();this.props.onCanvasDidMount&&this.props.onCanvasDidMount(a)}},{key:"initCanvas",value:function(){var n=this.getCanvas();if(this.props.globalCompositeOperation){var a=n.getContext("2d");a.globalCompositeOperation=this.props.globalCompositeOperation}var u=this.setCanvasSize(n),r=u.width,p=u.height;this.heartbeatDetectionCanvasSize(n),this.props.onCanvasInited(n,r,p)}},{key:"getCanvas",value:function(){var n=this.canvasRef.current;return n}},{key:"heartbeatDetectionCanvasSize",value:function(n){var a=this;this._iid=setInterval(function(){if(a.canvasRef.current){var u=a.canvasRef.current.clientHeight;if(u!==a.size.height){var r=a.setCanvasSize(n),p=r.width,m=r.height;a.props.onResize&&a.props.onResize(p,m)}}},1e3/10)}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",this.resize),clearInterval(this._iid),clearTimeout(this._oid)}catch{}}},{key:"resize",value:function(){var n=this.getCanvas(),a=this.setCanvasSize(n),u=a.width,r=a.height;this.props.onResize&&this.props.onResize(u,r)}},{key:"setCanvasSize",value:function(n){var a=this.canvasRef.current.clientWidth,u=this.canvasRef.current.clientHeight;return this.size.width=a,this.size.height=u,n.width=a,n.height=u,{width:a,height:u}}},{key:"handleWaypointEnter",value:function(){q.start()}},{key:"handleWaypointLeave",value:function(){q.stop()}},{key:"getStyle",value:function(){var n=this.props.bg,a={width:"100%",height:"100%"};return n===!0?a=Object.assign(a,{position:"absolute",zIndex:-1,top:0,left:0}):n&&(typeof n>"u"?"undefined":In(n))==="object"&&(a=Object.assign(a,n)),a}},{key:"handleMouseDown",value:function(n){this.props.onMouseDown&&this.props.onMouseDown(n)}},{key:"render",value:function(){return k.createElement("canvas",{className:"particles-bg-canvas-self",ref:this.canvasRef,onMouseDown:this.handleMouseDown.bind(this),style:this.getStyle()})}}]),h}(k.Component);function Lr(o){var h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return h?{r:parseInt(h[1],16),g:parseInt(h[2],16),b:parseInt(h[3],16)}:{}}function St(o,h){var l=void 0;return o?(l=Lr(o),"rgba("+l.r+","+l.g+","+l.b+", "+h+")"):null}var on=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),this.createMiniEmitter(n),q.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onResize",value:function(){}},{key:"createProton",value:function(n,a,u){var r=this,p=n.getContext("2d");this.proton=new c;var m=new c.Emitter;m.rate=new c.Rate(this.props.num?new c.Span(this.props.num):new c.Span(4,9),new c.Span(.8,1.3)),m.addInitialize(new c.Mass(1)),m.addInitialize(new c.Radius(1,50)),m.addInitialize(new c.Life(5,6)),m.addInitialize(new c.Velocity(new c.Span(5,8),new c.Span(30,70),"polar")),m.addBehaviour(new c.Alpha(1,0)),m.addBehaviour(new c.Color(["#36aaf3","#fd769c","#94ff22","#ffa545","#ffffff"])),m.addBehaviour(new c.Scale(.7,1)),m.addBehaviour(new c.Gravity(3)),m.addBehaviour(new c.Collision(m)),m.addBehaviour(this.customDeadBehaviour(n)),m.addBehaviour(new c.CrossZone(new c.RectZone(0,0,n.width,n.height),"bound")),m.p.x=Math.min(500,Math.max(n.width/2-400,50)),m.p.y=n.height/2+50,m.emit(),this.proton.addEmitter(m);var f=new c.CanvasRenderer(n);f.onProtonUpdate=function(){p.fillStyle=St(r.props.color,.2)||"rgba(255, 255, 255, 0.2)",p.fillRect(0,0,n.width,n.height)},this.proton.addRenderer(f)}},{key:"customDeadBehaviour",value:function(n){var a=this;return{initialize:function(r){},applyBehaviour:function(r){r.p.y+r.radius>=n.height&&r.radius>9&&(a.miniEmitteing(r),r.dead=!0)}}}},{key:"createMiniEmitter",value:function(n){var a=new c.Emitter;a.rate=new c.Rate(new c.Span(3,6),new c.Span(1,2)),a.addInitialize(new c.Mass(1)),a.radiusInitialize=new c.Radius,a.addInitialize(a.radiusInitialize),a.addInitialize(new c.Life(.5,1)),a.addInitialize(new c.V(new c.Span(1.5,3),new c.Span(0,70,!0),"polar")),a.colorBehaviour=new c.Color("#ffffff"),a.addBehaviour(new c.Alpha(1,0)),a.addBehaviour(a.colorBehaviour),a.addBehaviour(new c.Gravity(4)),a.addBehaviour(new c.Collision(a)),a.addBehaviour(new c.CrossZone(new c.RectZone(0,0,n.width,n.height),"bound")),this.proton.addEmitter(a),this.miniEmitter=a}},{key:"miniEmitteing",value:function(n){var a=this.miniEmitter;a.radiusInitialize.reset(n.radius*.05,n.radius*.2),a.colorBehaviour.reset(n.color),a.p.x=n.p.x,a.p.y=n.p.y,a.emit("once")}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),Ft=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.colors=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),q.add(this.renderProton)}},{key:"onResize",value:function(){}},{key:"createProton",value:function(n,a,u){this.proton=new c;var r=new c.Emitter;r.rate=new c.Rate(this.props.num?new c.Span(this.props.num):new c.Span(5,8),new c.Span(.1,.25)),r.addInitialize(new c.Mass(1)),r.addInitialize(new c.Radius(20,200)),r.addInitialize(new c.Life(2,4)),r.addInitialize(new c.Position(new c.RectZone(0,0,a,u))),r.addBehaviour(new c.Alpha(0,1,1/0,c.easeOutCubic)),r.addBehaviour(new c.Scale(1,0,1/0,c.easeOutCubic)),r.addBehaviour(new c.Color(this.colors,"random")),r.emit(),this.proton.addEmitter(r);var p=new c.CanvasRenderer(n);this.proton.addRenderer(p)}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),jr=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.colors=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),q.add(this.renderProton)}},{key:"onResize",value:function(n,a){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(n,a)}},{key:"getProp",value:function(n,a){var u=this.props.config||{},r=u[n]||a;return Array.isArray(r)?new c.Span(r[0],r[1]):r}},{key:"getArrProp",value:function(n,a){var u=this.props.config||{},r=u[n]||a;return r?Array.isArray(r)?r:[r,r]:null}},{key:"createProton",value:function(n,a,u){var r=this.getProp("num",[5,8]),p=this.getProp("rps",[.1,.2]),m=this.getProp("mass",1),f=this.getProp("radius",[10,30]),w=this.getProp("life",[2,3]),x=this.getProp("body"),_=this.getProp("position"),P=this.getProp("v",[2,3]),R=this.getProp("tha",[-15,15]),O=this.getArrProp("alpha"),B=this.getArrProp("scale"),A=this.getArrProp("color"),C=this.getProp("cross","dead"),E=this.getProp("random"),T=this.getArrProp("rotate"),z=this.getProp("g"),D=this.getArrProp("f"),N=this.getProp("emitter");this.proton=new c;var I=void 0;N==="follow"?I=new c.FollowEmitter:I=new c.Emitter,I.rate=new c.Rate(r,p),I.addInitialize(new c.Mass(m)),I.addInitialize(new c.Radius(f)),I.addInitialize(new c.Life(w)),I.addInitialize(new c.Velocity(P,R,"polar")),x&&I.addInitialize(new c.Body(x));var b=void 0;_==="all"||_==="screen"?b=new c.Position(new c.RectZone(0,0,n.width,n.height)):(typeof _>"u"?"undefined":In(_))==="object"?b=new c.Position(new c.RectZone(_.x,_.y,_.width,_.height)):(I.p.x=n.width/2,I.p.y=n.height/2),I.addInitialize(b);var V=O?new c.Alpha(O[0],O[1]):new c.Alpha(0,1),Z=B?new c.Scale(B[0],B[1]):new c.Scale(1,.2),W=A?new c.Color(A[0],A[1]):new c.Color(this.colors);I.addBehaviour(V),I.addBehaviour(Z),x||I.addBehaviour(W),T&&(T[0]===!0||T[0]==="rotate"?I.addBehaviour(new c.Rotate):I.addBehaviour(new c.Rotate(T[0],T[1])));var F=new c.RectZone(0,0,n.width,n.height),H=new c.CrossZone(F,C);I.addBehaviour(H),E&&I.addBehaviour(new c.RandomDrift(E,E,.05)),z&&I.addBehaviour(new c.G(z)),D&&I.addBehaviour(new c.F(D[0],D[1])),I.emit(),this.proton.addEmitter(I);var G=this.createRenderer(n);this.proton.addRenderer(G),this.emitter=I,this.crossZoneBehaviour=H}},{key:"createRenderer",value:function(n){var a=n.width,u=n.height,r=n.getContext("2d"),p=new c.CanvasRenderer(n),m=this.getProp("onUpdate");m&&(p.onProtonUpdate=function(){m(r,a,u)});var f=this.getProp("onParticleCreated");f&&(p.onParticleCreated=function(x){f(r,x)});var w=this.getProp("onParticleUpdate");return w&&(p.onParticleUpdate=function(x){w(r,x)}),p}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"handleMouseDown",value:function(n){var a=this.getProp("onMouseDown");a&&a(n)}},{key:"render",value:function(){var n=this.props.globalCompositeOperation||this.props.operation||"source-over";return k.createElement(_e,{bg:this.props.bg,onMouseDown:this.handleMouseDown.bind(this),globalCompositeOperation:n,onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),an=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"onCanvasDidMount",value:function(n){this.props.color&&(n.style.backgroundColor=this.props.color)}},{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),q.add(this.renderProton)}},{key:"onResize",value:function(n,a){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(n,a)}},{key:"createProton",value:function(n,a,u){this.proton=new c;var r=new c.Emitter;r.damping=.008,r.rate=new c.Rate(this.props.num?this.props.num:250),r.addInitialize(new c.Mass(1)),r.addInitialize(new c.Radius(4)),r.addInitialize(new c.Velocity(new c.Span(1.5),new c.Span(0,360),"polar"));var p={x:a/2,y:u/2},m=new c.Attraction(p,0,0),f=new c.CrossZone(new c.RectZone(0,0,n.width,n.height),"cross");r.addBehaviour(new c.Color("random")),r.addBehaviour(m,f),r.addBehaviour(new c.RandomDrift(10,10,.05)),r.p.x=n.width/2,r.p.y=n.height/2,r.emit("once"),this.proton.addEmitter(r),this.proton.addRenderer(this.createRenderer(n)),this.crossZoneBehaviour=f}},{key:"createRenderer",value:function(n){var a=this,u=n.getContext("2d"),r=new c.CanvasRenderer(n);return r.onProtonUpdate=function(){u.fillStyle=St(a.props.color,.02)||"rgba(0, 0, 0, 0.02)",u.fillRect(0,0,n.width,n.height)},r.onParticleUpdate=function(p){u.beginPath(),u.strokeStyle=p.color,u.lineWidth=1,u.moveTo(p.old.p.x,p.old.p.y),u.lineTo(p.p.x,p.p.y),u.closePath(),u.stroke()},r}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),sn=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.hue=0,n.index=0,n.colorTemplate="hsla(hue,80%,50%, 0.75)",n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"onCanvasDidMount",value:function(n){this.props.color&&(n.style.backgroundColor=this.props.color)}},{key:"onCanvasInited",value:function(n,a,u){this.canvas=n,this.createProton(n,a,u),q.add(this.renderProton)}},{key:"onResize",value:function(n,a){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(n,a)}},{key:"createProton",value:function(n,a,u){this.proton=new c;var r=new c.Emitter;r.damping=.008,r.rate=new c.Rate(this.props.num?this.props.num:150),r.addInitialize(new c.Mass(1)),r.addInitialize(new c.Radius(8)),r.addInitialize(new c.V(new c.Span(.1,.5),new c.Span(0,360),"polar")),r.addInitialize(new c.Position(new c.CircleZone(n.width/2,n.height/2,100)));var p=new c.CrossZone(new c.RectZone(0,0,n.width,n.height),"cross");r.addBehaviour(p),this.repulsion=new c.Repulsion({x:n.width/2,y:n.height/2-100},3,300),this.attraction=new c.Attraction({x:n.width/2,y:n.height/2},3,200),r.addBehaviour(this.attraction,this.repulsion),r.addBehaviour(new c.Color("random")),r.addBehaviour(new c.RandomDrift(20,15,.15)),r.emit("once"),this.proton.addEmitter(r),this.proton.addRenderer(this.createRenderer(n)),this.crossZoneBehaviour=p}},{key:"createRenderer",value:function(n){var a=this,u=n.getContext("2d"),r=new c.CanvasRenderer(n);return r.onProtonUpdate=function(){a.hue+=1,u.fillStyle=St(a.props.color,.02)||"rgba(0, 0, 0, 0.02)",u.fillRect(0,0,n.width,n.height)},r.onParticleCreated=function(p){p.data.begin=c.MathUtil.randomAToB(1,120),p.data.tha=c.MathUtil.randomAToB(0,Math.PI*2)},r.onParticleUpdate=function(p){var m=p.data.begin+a.hue;p.color=a.colorTemplate.replace("hue",m%360);var f=3/4,w=p.radius*(1-f)*Math.cos(p.data.tha+=.01)+p.radius*f;u.beginPath(),u.fillStyle=p.color,u.arc(p.p.x,p.p.y,w,0,Math.PI*2,!0),u.closePath(),u.fill()},r}},{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"renderProton",value:function(){var n=this.canvas;this.proton.update(),this.index%200===0&&(this.attraction.targetPosition.x=Math.random()*n.width,this.attraction.targetPosition.y=Math.random()*n.height,this.repulsion.targetPosition.x=Math.random()*n.width,this.repulsion.targetPosition.y=Math.random()*n.height),this.index++}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),ln=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.colors=["#fad390","#81ecec","#ffffff","#badc58","#f9ca24","#FEA47F"],n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasDidMount",value:function(n){}},{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),q.add(this.renderProton)}},{key:"onResize",value:function(n,a){var u=150;this.crossZoneBehaviour.zone.width=n+2*u,this.crossZoneBehaviour.zone.height=a+2*u,this.proton.renderers[0].resize(n,a)}},{key:"createProton",value:function(n,a,u){this.proton=new c;var r=new c.Emitter;r.rate=new c.Rate(this.props.num?this.props.num:50),r.damping=0,r.addInitialize(new c.Mass(1)),r.addInitialize(new c.Radius(4,70)),r.addInitialize(new c.Velocity(new c.Span(2,10),new c.Span(0),"polar")),r.addInitialize(new c.Position(new c.LineZone(0,n.height,n.width,n.height)));var p=150,m=new c.CrossZone(new c.RectZone(0-p,0-p,n.width+2*p,n.height+2*p),"cross");r.addBehaviour(m),r.addBehaviour(new c.Alpha(c.getSpan(.1,.55))),r.addBehaviour(new c.Color(this.colors)),r.emit("once"),this.proton.addEmitter(r);var f=this.createRenderer(n);this.proton.addRenderer(f),this.crossZoneBehaviour=m,r.preEmit(2)}},{key:"createRenderer",value:function(n){var a=n.getContext("2d"),u=new c.CustomRenderer;return u.onProtonUpdate=function(){a.clearRect(0,0,n.width,n.height)},u.onParticleCreated=function(r){var p=r.radius||60,m=c.MathUtil.randomAToB(100,200,"int");r.data.w=p,r.data.h=m},u.onParticleUpdate=function(r){var p=r.data.w,m=r.data.h;a.save(),a.globalAlpha=r.alpha,a.fillStyle=r.color,a.translate(r.p.x,r.p.y),a.rotate(c.MathUtil.degreeTransform(r.rotation)),a.translate(-r.p.x,-r.p.y),a.beginPath(),a.rect(r.p.x-p/2,r.p.y-m/2,p,m),a.closePath(),a.fill(),a.globalAlpha=1,a.restore()},u}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"lighter",onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),hn=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),q.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onResize",value:function(n,a){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(n,a)}},{key:"createProton",value:function(n,a,u){this.proton=new c;var r=new c.Emitter;r.rate=new c.Rate(this.props.num?new c.Span(this.props.num):new c.Span(100),new c.Span(.05,.2)),r.addInitialize(new c.Mass(1)),r.addInitialize(new c.Radius(1,4)),r.addInitialize(new c.Life(1/0));var p=new c.Position(new c.RectZone(0,0,a,u));r.addInitialize(p),r.addInitialize(new c.Velocity(new c.Span(.3,.6),new c.Span(0,360),"polar")),r.addBehaviour(new c.Alpha(c.getSpan(.2,.9))),r.addBehaviour(new c.Color(this.props.color||"#333")),this.crossZoneBehaviour=new c.CrossZone(new c.RectZone(0,0,a,u),"cross"),r.addBehaviour(this.crossZoneBehaviour),r.emit("once"),r.damping=0,this.proton.addEmitter(r),this.proton.addRenderer(this.createRenderer(n,r))}},{key:"createRenderer",value:function(n,a){var u=this,r=n.getContext("2d"),p=new c.CanvasRenderer(n),m=140;return p.onProtonUpdateAfter=function(){for(var f=a.particles,w=0;w<f.length;w++)for(var x=w+1;x<f.length;x++){var _=f[w],P=f[x],R=_.p.distanceTo(P.p);if(R<m){var O=(1-R/m)*.5;r.strokeStyle=St(u.props.color,O)||"rgba(3, 3, 3, "+O+")",r.beginPath(),r.moveTo(_.p.x,_.p.y),r.lineTo(P.p.x,P.p.y),r.closePath(),r.stroke()}}},p}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),un=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.colors=["#74b9ff","#e84393","#6c5ce7","#00b894","#fdcb6e","#006266","#1B1464"],n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),q.add(this.renderProton)}},{key:"onResize",value:function(n,a){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(n,a)}},{key:"createProton",value:function(n,a,u){this.proton=new c;var r=new c.Emitter;r.rate=new c.Rate(this.props.num||20),r.damping=.008,r.addInitialize(new c.Mass(1)),r.addInitialize(new c.Radius(30,600)),r.addInitialize(new c.Velocity(new c.Span(.5),new c.Span(0,360),"polar")),r.addInitialize(new c.Position(new c.RectZone(0,0,n.width,n.height)));var p=new c.CrossZone(new c.RectZone(0,0,n.width,n.height),"cross");r.addBehaviour(p),r.addBehaviour(new c.Alpha(c.getSpan(.35,.55))),r.addBehaviour(new c.Color(this.getColor())),r.addBehaviour(new c.RandomDrift(50,50,.5)),r.emit("once"),this.proton.addEmitter(r);var m=new c.CanvasRenderer(n);this.proton.addRenderer(m),this.crossZoneBehaviour=p}},{key:"getColor",value:function(){var n=this.colors;return this.props.color&&(Array.isArray(this.props.color)?n=this.props.color:n=[this.props.color]),n}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"darken",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),cn=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"onCanvasDidMount",value:function(n){}},{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),this.renderProton()}},{key:"onResize",value:function(n,a){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=a,this.proton.renderers[0].resize(n,a)}},{key:"createProton",value:function(n,a,u){this.proton=new c;var r=new c.Emitter;r.damping=.008,r.rate=new c.Rate(this.props.num?this.props.num:50),r.addInitialize(new c.Mass(1)),r.addInitialize(new c.Radius(5,9)),r.addInitialize(new c.Velocity(new c.Span(1.5),new c.Span(0,360),"polar")),r.addInitialize(new c.Position(new c.RectZone(0,0,a,u)));var p={x:a/2,y:u/2},m=new c.Attraction(p,0,0),f=new c.CrossZone(new c.RectZone(0,0,n.width,n.height),"bound");r.addBehaviour(new c.Color(this.props.color||"#bbb")),r.addBehaviour(m,f),r.addBehaviour(new c.RandomDrift(15,15,.05)),r.emit("once"),this.proton.addEmitter(r),this.proton.addRenderer(this.createRenderer(n)),this.crossZoneBehaviour=f}},{key:"createRenderer",value:function(n){var a=10,u=8,r=n.getContext("2d"),p=new c.CanvasRenderer(n);p.onProtonUpdate=function(){r.clearRect(0,0,n.width,n.height)},p.onParticleCreated=function(_){_.data.points=[],_.data.index=0},p.onParticleUpdate=function(_){w(_),_.data.index%u===0&&m(_),f(_),_.data.index++};var m=function(P){P.data.points.unshift(P.p.y),P.data.points.unshift(P.p.x),P.data.points.length>a&&(P.data.points.pop(),P.data.points.pop())},f=function(P){r.fillStyle=P.color,r.beginPath(),r.arc(P.p.x,P.p.y,P.radius,0,Math.PI*2,!0),r.closePath(),r.fill()},w=function(P){r.beginPath(),r.strokeStyle=P.color,r.moveTo(P.p.x,P.p.y);for(var R=P.data.points.length,O=0;O<R;O+=2){var B=P.data.points[O],A=P.data.points[O+1];r.lineWidth=x(O,R),r.lineTo(B,A),r.stroke()}},x=function(P,R){if(R<=2)return 1;var O=6,B=(O-1)/(2/R-1),A=1-B,C=(P+2)/R,E=B*C+A;return E=E>>0,E};return p}},{key:"renderProton",value:function(){var n=this;q.add(function(){n.proton.update()})}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),Ur=["#f6b93b","#18dcff","#cd84f1","#ED4C67","#ffffff","#b71540","#32ff7e","#ff3838"],dn=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"onCanvasInited",value:function(n,a,u){this.createProton(n),this.createEmitter({canvas:n,x:a/2,y:u/2,mainEmitter:!0,zone:"bound"}),q.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onResize",value:function(){}},{key:"createProton",value:function(n){this.proton=new c;var a=this.createRenderer(n);this.proton.addRenderer(a)}},{key:"createRenderer",value:function(n){var a=n.getContext("2d"),u=new c.CustomRenderer;u.onProtonUpdate=function(){a.clearRect(0,0,n.width,n.height)},u.onParticleCreated=function(p){p.data.count=c.MathUtil.randomAToB(3,10,!0)},u.onParticleUpdate=function(p){a.save(),a.globalAlpha=p.alpha,a.fillStyle=p.color,a.translate(p.p.x,p.p.y),a.rotate(c.MathUtil.degreeTransform(p.rotation)),a.translate(-p.p.x,-p.p.y),a.beginPath(),r(p,p.data.count),a.closePath(),a.fill(),a.globalAlpha=1,a.restore()},u.onParticleDead=function(p){};var r=function(m,f){if(f>=7)a.arc(m.p.x,m.p.y,m.radius,0,Math.PI*2,!0);else for(var w=m.radius,x=0;x<=f;x++){var _=m.p.x+w*Math.cos(Math.PI/180*360/f*x),P=m.p.y+w*Math.sin(Math.PI/180*360/f*x);x===0?a.moveTo(_,P):a.lineTo(_,P)}};return u}},{key:"createEmitter",value:function(n){var a=n.mainEmitter,u=n.canvas,r=n.x,p=n.y,m=n.radius,f=n.color,w=f===void 0?Ur:f,x=n.zone,_=x===void 0?"dead":x,P=n.once,R=P===void 0?"all":P,O=n.alpha,B=O===void 0?.85:O,A=n.gravity,C=A===void 0?3.5:A,E=this.proton.pool.get(c.Emitter);if(!E.completed){E.rate=new c.Rate(this.props.num?new c.Span(this.props.num):new c.Span(4,9),new c.Span(1.6,2.2));var T=a?new c.Radius(10,110):new c.Radius(3,m);E.addInitialize(new c.Mass(1)),E.addInitialize(T),E.addInitialize(new c.Life(3,6)),E.addInitialize(new c.Velocity(new c.Span(4,6),new c.Span(-90,90),"polar")),E.addBehaviour(new c.Alpha(B,.2)),E.addBehaviour(new c.Color(w)),E.addBehaviour(new c.Scale(1,.3)),E.addBehaviour(new c.Rotate),E.addBehaviour(new c.Gravity(C)),E.addBehaviour(this.customDeadBehaviour(u)),E.addBehaviour(new c.CrossZone(new c.RectZone(0,0,u.width,u.height),_))}E.p.x=r,E.p.y=p,R==="once"?E.emit("once"):E.emit(),this.proton.addEmitter(E)}},{key:"expireEmitter",value:function(n){var a=this;setTimeout(function(){n.completed=!0,a.proton.pool.expire(n),a.proton.removeEmitter(n)},500)}},{key:"customDeadBehaviour",value:function(n){var a=this;return{initialize:function(r){r.data=r.data||{},r.data.oldRadius=r.radius,r.data.emitterCount=0},applyBehaviour:function(r){r.radius<5||r.data.emitterCount>=2||r.radius<=1/3*r.data.oldRadius&&(r.data.emitterCount++,a.createEmitter({canvas:n,x:r.p.x,y:r.p.y,radius:r.radius*(1/2),alpha:.5,gravity:5,color:r.color,once:"once"}))}}}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),pn=function(o){ve(h,o);function h(l){ue(this,h);var n=ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l));return n.colors=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],n.renderProton=n.renderProton.bind(n),n}return ce(h,[{key:"componentWillUnmount",value:function(){try{q.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,a,u){this.createProton(n,a,u),q.add(this.renderProton)}},{key:"onResize",value:function(){}},{key:"createProton",value:function(n,a,u){this.proton=new c;var r=new c.Emitter;r.rate=new c.Rate(this.props.num?new c.Span(this.props.num):new c.Span(4,8),new c.Span(.1,.25)),r.addInitialize(new c.Mass(1)),r.addInitialize(new c.Radius(20,200)),r.addInitialize(new c.Life(2,4)),r.addInitialize(new c.Velocity(new c.Span(4,7),new c.Span(0,360),"polar")),r.addInitialize(new c.Position(new c.CircleZone(a/2,u/2,100))),r.addBehaviour(new c.Alpha(1,0)),r.addBehaviour(new c.Scale(.2,1)),r.addBehaviour(this.createCustomBehaviour()),r.addBehaviour(new c.Color(this.colors,"random")),r.emit(),this.proton.addEmitter(r);var p=new c.CanvasRenderer(n);this.proton.addRenderer(p)}},{key:"createCustomBehaviour",value:function(){var n=1e3;return{initialize:function(u){u.f=new c.Vector2D(0,0)},applyBehaviour:function(u){var r=u.v.length()/1e3,p=u.v.getGradient();p+=3.14/2,u.f.x=n*r*Math.cos(p),u.f.y=n*r*Math.sin(p),u.a.add(u.f)}}}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return k.createElement(_e,{bg:this.props.bg,globalCompositeOperation:"xor",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),h}(k.Component),$r=function(o){ve(h,o);function h(l){return ue(this,h),ye(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,l))}return ce(h,[{key:"getRandom",value:function(){var n=this.props,a=n.num,u=n.bg,r=n.color;return this.random||(this.random=new Vr,this.random.set(.25,k.createElement(Ft,{num:a,bg:u,color:r})),this.random.set(.2,k.createElement(on,{num:a,bg:u,color:r})),this.random.set(.2,k.createElement(an,{num:a,bg:u,color:r})),this.random.set(.16,k.createElement(sn,{num:a,bg:u,color:r})),this.random.set(.18,k.createElement(un,{num:a,bg:u,color:r})),this.random.set(.04,k.createElement(hn,{num:a,bg:u,color:r})),this.random.set(.1,k.createElement(dn,{num:a,bg:u,color:r})),this.random.set(.08,k.createElement(ln,{num:a,bg:u,color:r})),this.random.set(.18,k.createElement(cn,{num:a,bg:u,color:r})),this.random.set(.15,k.createElement(pn,{num:a,bg:u,color:r}))),this.random.getResult()}},{key:"getBgParticles",value:function(){var n=this.props,a=n.type,u=n.num,r=n.bg,p=n.color,m=n.config,f=void 0;switch(String(a).toLowerCase()){case"color":f=k.createElement(Ft,{num:u,bg:r,color:p});break;case"ball":f=k.createElement(on,{num:u,bg:r,color:p});break;case"lines":f=k.createElement(an,{num:u,bg:r,color:p});break;case"thick":f=k.createElement(sn,{num:u,bg:r,color:p});break;case"circle":f=k.createElement(un,{num:u,bg:r,color:p});break;case"cobweb":f=k.createElement(hn,{num:u,bg:r,color:p});break;case"polygon":f=k.createElement(dn,{num:u,bg:r,color:p});break;case"square":f=k.createElement(ln,{num:u,bg:r,color:p});break;case"tadpole":f=k.createElement(cn,{num:u,bg:r,color:p});break;case"fountain":f=k.createElement(pn,{num:u,bg:r,color:p});break;case"custom":f=k.createElement(jr,{bg:r,config:m});break;case"random":f=this.getRandom(u);break;default:f=k.createElement(Ft,{num:u,bg:r,color:p});break}return f}},{key:"render",value:function(){var n=this.getBgParticles();return k.createElement(k.Fragment,null,n)}}]),h}(y.Component);function Nr(){const[o]=xt.useForm(),[h,l]=y.useState(!1),n=zi(),{defaultLang:a}=Zi,{t:u}=Di(),{theme:r}=ji,p={username:[{required:!0,message:"Please input your username!"}],password:[{required:!0,message:"Please input your password!"}]},m=f=>{l(!0),setTimeout(()=>{l(!1);const w={userInfo:{name:"liuhua",age:18,sex:1,role:f.username==="admin"?"admin":"test"},token:"xhshgsbzlgin"};Ui(w.token),!$i()&&Ni(a),f.remember?Wi(f.username):Hi(),qi(JSON.stringify(w.userInfo)),n("/home")},1500)};return te.jsxs("div",{className:"flex items-center justify-center h-full",children:[te.jsx($r,{type:"circle",bg:!0}),te.jsxs("div",{className:"w-[400px] h-[500px] rounded-lg form-box p-5",children:[te.jsxs("div",{className:"flex justify-center items-center flex-col mb-10",children:[te.jsx(Fi,{style:{fontSize:"35px",color:r.primaryColor}}),te.jsx("p",{className:"pt-2 text-2xl",children:"Liuhua"})]}),te.jsxs(xt,{name:"basic",initialValues:{remember:!!Xt(),username:Xt()},form:o,onFinish:m,autoComplete:"off",children:[te.jsx(xt.Item,{name:"username",rules:p.username,children:te.jsx(Yt,{placeholder:u("用户名")+"：admin/test",style:{borderColor:r.primaryColor}})}),te.jsx(xt.Item,{name:"password",rules:p.password,children:te.jsx(Yt,{placeholder:u("密码")+"：*",style:{borderColor:r.primaryColor}})}),te.jsx(Vi,{theme:{token:{colorBgContainer:"transparent",colorBorder:r.primaryColor}},children:te.jsx(xt.Item,{name:"remember",valuePropName:"checked",children:te.jsx(Xi,{children:u("记住账号")})})}),te.jsx(Li,{type:"primary",className:"w-full h-10",loading:h,htmlType:"submit",children:u("登录")})]}),te.jsxs("p",{className:"flex text-xs justify-between mt-4 gap-6",style:{color:r.primaryColor},children:[te.jsx("span",{className:" cursor-pointer",children:u("忘记密码")}),te.jsx("span",{className:" cursor-pointer",children:u("没有账号?注册")})]})]})]})}const Gr=Mi(Nr);export{Gr as default};
