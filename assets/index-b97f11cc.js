import{c as Lt,g as jt,R as w,r as Zt,o as wi,u as Pi,a as _i,j as S,T as ki,b as At,I as Tt,C as xi,B as Ri,d as Ei,s as Ci,e as Ii,f as Ai,h as Ti,i as Bi,k as Si,l as Oi}from"./index-ea677fc9.js";import{F as Ke}from"./index-1a7a0c31.js";import{C as zi}from"./index-bdb19dec.js";import"./row-ec8f029b.js";import"./responsiveObserver-c9258c1a.js";var Nt={exports:{}};/*!
* RAFManager v0.1.0
*
* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/(function(m,c){(function(u,n){m.exports=n()})(Lt,function(){return function(){for(var u=["ms","moz","webkit","o"],n=0;n<u.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[u[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[u[n]+"CancelAnimationFrame"]||window[u[n]+"CancelRequestAnimationFrame"]}(),{timer:0,state:"stop",animations:[],add:function(u){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,s={callback:u,fps:n,n:60/n,param:arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i:0};return this.animations.push(s),this.animations.length>=1&&this.start(),this},getIndex:function(u){for(var n=0;n<this.animations.length;n++)if(this.animations[n].callback===u)return n;return-1},remove:function(u){if(!(this.getIndex(u)<0))return this.deleteMap(u),this.animations.length===0&&this.stop(),this},deleteMap:function(u){var n=this.getIndex(u),s=this.animations[n];for(var l in s)delete s[l];this.animations.splice(n,1)},start:function(){if(this.state!=="start")return this.state="start",this.tick(),this},stop:function(){if(this.state!=="stop")return this.state="stop",cancelAnimationFrame(this.timer),this},tick:function(){var u=this;this.timer=requestAnimationFrame(function(){u.tick()});for(var n=0;n<this.animations.length;n++){var s=this.animations[n],l=s.callback,a=s.param;s.i++,s.i>=s.n&&(l(a),s.i=0)}}}})})(Nt);var Mi=Nt.exports;const E=jt(Mi);var Ht={exports:{}};/*!
* Proton v4.2.1
* https://github.com/drawcall/Proton
*
* Copyright 2013-2020, A-JIE
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/(function(m,c){(function(u,n){m.exports=n()})(Lt,function(){var u=3.1415926,n={PI:u,PIx2:2*u,PI_2:u/2,PI_180:u/180,N180_PI:180/u,Infinity:-999,isInfinity:function(e){return e===this.Infinity||e===1/0},randomAToB:function(e,t,i){return 2<arguments.length&&i!==void 0&&i?Math.floor(Math.random()*(t-e))+e:e+Math.random()*(t-e)},randomFloating:function(e,t,i){return this.randomAToB(e-t,e+t,i)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},randomZone:function(){},floor:function(e,t){return t=1<arguments.length&&t!==void 0?t:4,t=Math.pow(10,t),Math.floor(e*t)/t},degreeTransform:function(e){return e*u/180},toColor16:function(e){return"#"+e.toString(16)}},s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e};function d(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,i){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r!==void 0)return"value"in r?r.value:(r=r.get,r!==void 0?r.call(i):void 0);if((e=Object.getPrototypeOf(e))!==null)return y(e,t,i)}var v=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t},P=(a(_,[{key:"getValue",value:function(e){return e=0<arguments.length&&e!==void 0&&e,this.isArray?g.getRandFromArray(this.a):this.center?n.randomFloating(this.a,this.b,e):n.randomAToB(this.a,this.b,e)}}],[{key:"setSpanValue",value:function(e,t,i){return e instanceof _?e:t===void 0?new _(e):i===void 0?new _(e,t):new _(e,t,i)}},{key:"getSpanValue",value:function(e){return e instanceof _?e.getValue():e}}]),_);function _(e,t,i){l(this,_),g.isArray(e)?(this.isArray=!0,this.a=e):(this.isArray=!1,this.a=g.initValue(e,1),this.b=g.initValue(t,this.a),this.center=g.initValue(i,!1))}var k=function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1},O=function(e,t){return[1,0,0,0,1,0,e,t,1]},A=function(i){var t=Math.cos(i),i=Math.sin(i);return[t,-i,0,i,t,0,0,0,1]},X=function(e,t){return[e,0,0,0,t,0,0,0,1]},M=function(H,W){var i=H[0],r=H[1],h=H[2],p=H[3],I=H[4],N=H[5],T=H[6],B=H[7],we=H[8],D=W[0],J=W[1],Ze=W[2],Ne=W[3],V=W[4],U=W[5],bt=W[6],H=W[7],W=W[8];return[i*D+r*Ne+h*bt,i*J+r*V+h*H,i*Ze+r*U+h*W,p*D+I*Ne+N*bt,p*J+I*V+N*H,p*Ze+I*U+N*W,T*D+B*Ne+we*bt,T*J+B*V+we*H,T*Ze+B*U+we*W]},j={createCanvas:function(e,t,i,p){var h=3<arguments.length&&p!==void 0?p:"absolute",p=document.createElement("canvas");return p.id=e,p.width=t,p.height=i,p.style.opacity=0,p.style.position=h,this.transform(p,-500,-500,0,0),p},createDiv:function(e,t,i){var r=document.createElement("div");return r.id=e,r.style.position="absolute",this.resize(r,t,i),r},resize:function(e,t,i){e.style.width=t+"px",e.style.height=i+"px",e.style.marginLeft=-t/2+"px",e.style.marginTop=-i/2+"px"},transform:function(e,t,i,r,h){e.style.willChange="transform";var p="translate("+t+"px, "+i+"px) scale("+r+") rotate("+h+"deg)";this.css3(e,"transform",p)},transform3d:function(e,t,i,r,h){e.style.willChange="transform",h="translate3d("+t+"px, "+i+"px, 0) scale("+r+") rotate("+h+"deg)",this.css3(e,"backfaceVisibility","hidden"),this.css3(e,"transform",h)},css3:function(e,t,i){var r=t.charAt(0).toUpperCase()+t.substr(1);e.style["Webkit"+r]=i,e.style["Moz"+r]=i,e.style["O"+r]=i,e.style["ms"+r]=i,e.style[""+t]=i}},x={},Y={},Je=0,He=function(e,t,i){return e.drawImage(t,i.x,i.y),t=e.getImageData(i.x,i.y,i.width,i.height),e.clearRect(i.x,i.y,i.width,i.height),t},Pe=function(e,t,i){var r=typeof e=="string"?e:e.src;x[r]?t(x[r],i):((e=new Image).onload=function(h){x[r]=h.target,t(x[r],i)},e.src=r)},R=function(e,t,i){var r,h,p=e.src;return Y[p]||(r=k(e.width),h=k(e.height),(h=j.createCanvas("proton_canvas_cache_"+ ++Je,r,h)).getContext("2d").drawImage(e,0,0,e.width,e.height),Y[p]=h),t&&t(Y[p],i),Y[p]},g={initValue:function(e,t){return e=e??t},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},emptyArray:function(e){e&&(e.length=0)},toArray:function(e){return this.isArray(e)?e:[e]},getRandFromArray:function(e){return e?e[Math.floor(e.length*Math.random())]:null},emptyObject:function(e,t){var i,r=1<arguments.length&&t!==void 0?t:null;for(i in e)r&&-1<r.indexOf(i)||delete e[i]},classApply:function(e,t){return t=1<arguments.length&&t!==void 0?t:null,new(t?e.bind.apply(e,[null].concat(t)):e)},setVectorVal:function(e,t){t=1<arguments.length&&t!==void 0?t:null,t&&(this.hasProp(t,"x")&&(e.p.x=t.x),this.hasProp(t,"y")&&(e.p.y=t.y),this.hasProp(t,"vx")&&(e.v.x=t.vx),this.hasProp(t,"vy")&&(e.v.y=t.vy),this.hasProp(t,"ax")&&(e.a.x=t.ax),this.hasProp(t,"ay")&&(e.a.y=t.ay),this.hasProp(t,"p")&&e.p.copy(t.p),this.hasProp(t,"v")&&e.v.copy(t.v),this.hasProp(t,"a")&&e.a.copy(t.a),this.hasProp(t,"position")&&e.p.copy(t.position),this.hasProp(t,"velocity")&&e.v.copy(t.velocity),this.hasProp(t,"accelerate")&&e.a.copy(t.accelerate))},hasProp:function(e,t){return!!e&&e[t]!==void 0},setProp:function(e,t){for(var i in t)e.hasOwnProperty(i)&&(e[i]=P.getSpanValue(t[i]));return e},getImageData:function(e,t,i){return He(e,t,i)},destroyAll:function(e,t){for(var i=1<arguments.length&&t!==void 0?t:null,r=e.length;r--;){try{e[r].destroy(i)}catch{}delete e[r]}e.length=0},assign:function(e,t){if(typeof Object.assign=="function")return Object.assign(e,t);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}},_e={},We={_index:0,_cache:{},id:function(e){return _e[e]!==void 0&&_e[e]!==null||(_e[e]=0),e+"_"+_e[e]++},getId:function(e){var t=this.getIdFromCache(e);return t||(t="PUID_"+this._index++,this._cache[t]=e,t)},getIdFromCache:function(e){var t,i=void 0;for(i in this._cache)if((t=this._cache[i])===e||this.isBody(t,e)&&t.src===e.src)return i;return null},isBody:function(e,t){return(e===void 0?"undefined":s(e))==="object"&&(t===void 0?"undefined":s(t))==="object"&&e.isInner&&t.isInner},getTarget:function(e){return this._cache[e]}},qe=(a(Ge,[{key:"get",value:function(e,t,i){var r=void 0;return i=i||e.__puid||We.getId(e),(r=this.cache[i]&&0<this.cache[i].length?this.cache[i].pop():this.createOrClone(e,t)).__puid=e.__puid||i,r}},{key:"expire",value:function(e){return this.getCache(e.__puid).push(e)}},{key:"createOrClone",value:function(e,t){return this.total++,this.create?this.create(e,t):typeof e=="function"?g.classApply(e,t):e.clone()}},{key:"getCount",value:function(){var e,t=0;for(e in this.cache)t+=this.cache[e].length;return t++}},{key:"destroy",value:function(){for(var e in this.cache)this.cache[e].length=0,delete this.cache[e]}},{key:"getCache",value:function(e){return e=0<arguments.length&&e!==void 0?e:"default",this.cache[e]||(this.cache[e]=[]),this.cache[e]}}]),Ge);function Ge(e){l(this,Ge),this.total=0,this.cache={}}var et=(a(Xe,[{key:"update",value:function(r,h){this.add(r,h);var i=this.getEmitter(),r=this.getRenderer(),h="";switch(this.type){case 2:h+="emitter:"+this.proton.emitters.length+"<br>",i&&(h+="em speed:"+i.emitSpeed+"<br>"),i&&(h+="pos:"+this.getEmitterPos(i));break;case 3:i&&(h+="initializes:"+i.initializes.length+"<br>"),i&&(h+='<span style="display:inline-block;">'+this.concatArr(i.initializes)+"</span><br>"),i&&(h+="behaviours:"+i.behaviours.length+"<br>"),i&&(h+='<span style="display:inline-block;">'+this.concatArr(i.behaviours)+"</span><br>");break;case 4:r&&(h+=r.name+"<br>"),r&&(h+="body:"+this.getCreatedNumber(r)+"<br>");break;default:h+="particles:"+this.proton.getCount()+"<br>",h+="pool:"+this.proton.pool.getCount()+"<br>",h+="total:"+this.proton.pool.total}this.container.innerHTML=h}},{key:"add",value:function(e,t){var i=this;if(!this.container){this.type=1,this.container=document.createElement("div"),this.container.style.cssText=["position:absolute;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this.container.addEventListener("click",function(p){i.type++,4<i.type&&(i.type=1)},!1);var r=void 0,h=void 0;switch(e){case 2:r="#201",h="#f08";break;case 3:r="#020",h="#0f0";break;default:r="#002",h="#0ff"}this.container.style["background-color"]=r,this.container.style.color=h}this.container.parentNode||(t=t||this.body||document.body).appendChild(this.container)}},{key:"getEmitter",value:function(){return this.proton.emitters[this.emitterIndex]}},{key:"getRenderer",value:function(){return this.proton.renderers[this.rendererIndex]}},{key:"concatArr",value:function(e){var t="";if(!e||!e.length)return t;for(var i=0;i<e.length;i++)t+=(e[i].name||"").substr(0,1)+".";return t}},{key:"getCreatedNumber",value:function(e){return e.pool.total||e.cpool&&e.cpool.total||0}},{key:"getEmitterPos",value:function(e){return Math.round(e.p.x)+","+Math.round(e.p.y)}}]),Xe);function Xe(e){l(this,Xe),this.proton=e,this.container=null,this.type=1,this.emitterIndex=0,this.rendererIndex=0}var tt=(a(te,[{key:"addEventListener",value:function(e,t){return this._listeners?this.removeEventListener(e,t):this._listeners={},this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),t}},{key:"removeEventListener",value:function(e,t){if(this._listeners&&this._listeners[e]){for(var i=this._listeners[e],r=i.length,h=0;h<r;h++)if(i[h]===t){r===1?delete this._listeners[e]:i.splice(h,1);break}}}},{key:"removeAllEventListeners",value:function(e){e?this._listeners&&delete this._listeners[e]:this._listeners=null}},{key:"dispatchEvent",value:function(e,t){var i=!1,r=this._listeners;if(e&&r){var h=r[e];if(!h)return i;for(var p=void 0,I=h.length;I--;)p=h[I],i=i||p(t)}return!!i}},{key:"hasEventListener",value:function(e){var t=this._listeners;return!(!t||!t[e])}}],[{key:"bind",value:function(e){e.prototype.dispatchEvent=te.prototype.dispatchEvent,e.prototype.hasEventListener=te.prototype.hasEventListener,e.prototype.addEventListener=te.prototype.addEventListener,e.prototype.removeEventListener=te.prototype.removeEventListener,e.prototype.removeAllEventListeners=te.prototype.removeAllEventListeners}}]),te);function te(){l(this,te),this._listeners=null}var qt=(a(ht,[{key:"calculate",value:function(e,t,i){this.eulerIntegrate(e,t,i)}},{key:"eulerIntegrate",value:function(e,t,i){e.sleep||(e.old.p.copy(e.p),e.old.v.copy(e.v),e.a.multiplyScalar(1/e.mass),e.v.add(e.a.multiplyScalar(t)),e.p.add(e.old.v.multiplyScalar(t)),i&&e.v.multiplyScalar(i),e.a.clear())}}]),ht);function ht(e){l(this,ht),this.type=e}var f=(a(z,[{key:"addRenderer",value:function(e){e.init(this),this.renderers.push(e)}},{key:"removeRenderer",value:function(e){var t=this.renderers.indexOf(e);this.renderers.splice(t,1),e.remove(this)}},{key:"addEmitter",value:function(e){this.emitters.push(e),(e.parent=this).dispatchEvent(z.EMITTER_ADDED,e)}},{key:"removeEmitter",value:function(e){var t=this.emitters.indexOf(e);this.emitters.splice(t,1),e.parent=null,this.dispatchEvent(z.EMITTER_REMOVED,e)}},{key:"update",value:function(){this._fps==="auto"?(this.dispatchEvent(z.PROTON_UPDATE),z.USE_CLOCK?(this.then||(this.then=new Date().getTime()),this.now=new Date().getTime(),this.elapsed=.001*(this.now-this.then),this.amendChangeTabsBug(),0<this.elapsed&&this.emittersUpdate(this.elapsed),this.then=this.now):this.emittersUpdate(z.DEFAULT_INTERVAL),this.dispatchEvent(z.PROTON_UPDATE_AFTER)):(this.then||(this.then=new Date().getTime()),this.now=new Date().getTime(),this.elapsed=.001*(this.now-this.then),this.elapsed>this._interval&&(this.dispatchEvent(z.PROTON_UPDATE),this.emittersUpdate(this._interval),this.then=this.now-this.elapsed%this._interval*1e3,this.dispatchEvent(z.PROTON_UPDATE_AFTER)))}},{key:"emittersUpdate",value:function(e){for(var t=this.emitters.length;t--;)this.emitters[t].update(e)}},{key:"amendChangeTabsBug",value:function(){z.amendChangeTabsBug&&.5<this.elapsed&&(this.then=new Date().getTime(),this.elapsed=0)}},{key:"getCount",value:function(){for(var e=0,t=this.emitters.length;t--;)e+=this.emitters[t].particles.length;return e}},{key:"getAllParticles",value:function(){for(var e=[],t=this.emitters.length;t--;)e=e.concat(this.emitters[t].particles);return e}},{key:"destroyAllEmitters",value:function(){g.destroyAll(this.emitters)}},{key:"destroy",value:function(e){function t(){i.time=0,i.then=0,i.pool.destroy(),g.destroyAll(i.emitters),g.destroyAll(i.renderers,i.getAllParticles())}var i=this;0<arguments.length&&e!==void 0&&e?setTimeout(t,200):t()}},{key:"fps",set:function(e){this._fps=e,this._interval=e==="auto"?z.DEFAULT_INTERVAL:n.floor(1/e,7)},get:function(){return this._fps}}]),z);function z(e){l(this,z),this.emitters=[],this.renderers=[],this.time=0,this.now=0,this.then=0,this.elapsed=0,this.stats=new et(this),this.pool=new qe(80),this.integrationType=g.initValue(e,z.EULER),this.integrator=new qt(this.integrationType),this._fps="auto",this._interval=z.DEFAULT_INTERVAL}f.USE_CLOCK=!1,f.MEASURE=100,f.EULER="euler",f.RK2="runge-kutta2",f.PARTICLE_CREATED="PARTICLE_CREATED",f.PARTICLE_UPDATE="PARTICLE_UPDATE",f.PARTICLE_SLEEP="PARTICLE_SLEEP",f.PARTICLE_DEAD="PARTICLE_DEAD",f.EMITTER_ADDED="EMITTER_ADDED",f.EMITTER_REMOVED="EMITTER_REMOVED",f.PROTON_UPDATE="PROTON_UPDATE",f.PROTON_UPDATE_AFTER="PROTON_UPDATE_AFTER",f.DEFAULT_INTERVAL=.0167,f.amendChangeTabsBug=!0,tt.bind(f);var Gt=(a(lt,[{key:"reset",value:function(){this.r=255,this.g=255,this.b=255}}]),lt);function lt(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255,i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:255;l(this,lt),this.r=e,this.g=t,this.b=i}var Ye={easeLinear:function(e){return e},easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInSine:function(e){return 1-Math.cos(e*n.PI_2)},easeOutSine:function(e){return Math.sin(e*n.PI_2)},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return e===0?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return e===1?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e===0?0:e===1?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return--e*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},getEasing:function(e){return typeof e=="function"?e:this[e]||this.easeLinear}},C=(a(it,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"getGradient",value:function(){return this.x!==0?Math.atan2(this.y,this.x):0<this.y?n.PI_2:this.y<0?-n.PI_2:void 0}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return t!==void 0?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this)}},{key:"addXY",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"sub",value:function(e,t){return t!==void 0?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this)}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"divideScalar",value:function(e){return e!==0?(this.x/=e,this.y/=e):this.set(0,0),this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"negate",value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"rotate",value:function(e){var t=this.x,i=this.y;return this.x=t*Math.cos(e)+i*Math.sin(e),this.y=-t*Math.sin(e)+i*Math.cos(e),this}},{key:"distanceToSquared",value:function(i){var t=this.x-i.x,i=this.y-i.y;return t*t+i*i}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"clone",value:function(){return new it(this.x,this.y)}}]),it);function it(e,t){l(this,it),this.x=e||0,this.y=t||0}var ut=(a(ct,[{key:"getDirection",value:function(){return Math.atan2(this.v.x,-this.v.y)*n.N180_PI}},{key:"reset",value:function(){return this.life=1/0,this.age=0,this.dead=!1,this.sleep=!1,this.body=null,this.sprite=null,this.parent=null,this.energy=1,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.easing=Ye.easeLinear,this.rgb.reset(),g.emptyObject(this.data),this.removeAllBehaviours(),this}},{key:"update",value:function(e,t){this.sleep||(this.age+=e,this.applyBehaviours(e,t)),this.age<this.life?(t=this.easing(this.age/this.life),this.energy=Math.max(1-t,0)):this.destroy()}},{key:"applyBehaviours",value:function(e,t){for(var i=this.behaviours.length,r=void 0,r=0;r<i;r++)this.behaviours[r]&&this.behaviours[r].applyBehaviour(this,e,t)}},{key:"addBehaviour",value:function(e){this.behaviours.push(e),e.hasOwnProperty("parents")&&e.parents.push(this),e.initialize(this)}},{key:"addBehaviours",value:function(e){for(var t=e.length,i=void 0,i=0;i<t;i++)this.addBehaviour(e[i])}},{key:"removeBehaviour",value:function(e){e=this.behaviours.indexOf(e),-1<e&&(this.behaviours.splice(e,1).parents=null)}},{key:"removeAllBehaviours",value:function(){g.emptyArray(this.behaviours)}},{key:"destroy",value:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}]),ct);function ct(e){l(this,ct),this.id="",this.old={},this.data={},this.behaviours=[],this.p=[],this.v=[],this.a=[],this.rgb={},this.name="Particle",this.id=We.id(this.name),this.old={},this.data={},this.behaviours=[],this.p=new C,this.v=new C,this.a=new C,this.old.p=new C,this.old.v=new C,this.old.a=new C,this.rgb=new Gt,this.reset(),e&&g.setProp(this,e)}var ke={hexToRgb:function(e){return e=e.charAt(0)==="#"?e.substring(1,7):e,{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},rgbToHex:function(e){return"rgb("+e.r+", "+e.g+", "+e.b+")"},getHex16FromParticle:function(e){return 65536*Number(e.rgb.r)+256*Number(e.rgb.g)+Number(e.rgb.b)}},Pt=(a(nt,[{key:"set",value:function(e,t){return this.r=e,this.tha=t,this}},{key:"setR",value:function(e){return this.r=e,this}},{key:"setTha",value:function(e){return this.tha=e,this}},{key:"copy",value:function(e){return this.r=e.r,this.tha=e.tha,this}},{key:"toVector",value:function(){return new C(this.getX(),this.getY())}},{key:"getX",value:function(){return this.r*Math.sin(this.tha)}},{key:"getY",value:function(){return-this.r*Math.cos(this.tha)}},{key:"normalize",value:function(){return this.r=1,this}},{key:"equals",value:function(e){return e.r===this.r&&e.tha===this.tha}},{key:"clear",value:function(){return this.r=0,this.tha=0,this}},{key:"clone",value:function(){return new nt(this.r,this.tha)}}]),nt);function nt(e,t){l(this,nt),this.r=Math.abs(e)||0,this.tha=t||0}var $={create:function(e){var t=new Float32Array(9);return e&&this.set(e,t),t},set:function(e,t){for(var i=0;i<9;i++)t[i]=e[i];return t},multiply:function(V,U,i){var r=V[0],h=V[1],p=V[2],I=V[3],N=V[4],T=V[6],B=V[7],we=U[0],D=U[1],J=U[2],Ze=U[3],Ne=U[4],V=U[6],U=U[7];return i[0]=we*r+D*I,i[1]=we*h+D*N,i[2]=p*J,i[3]=Ze*r+Ne*I,i[4]=Ze*h+Ne*N,i[6]=V*r+U*I+T,i[7]=V*h+U*N+B,i},inverse:function(T,t){var i=T[0],r=T[1],B=T[3],h=T[4],p=T[6],I=T[7],N=-B,T=I*B-h*p,B=1/(i*h+r*N);return t[0]=h*B,t[1]=-r*B,t[3]=N*B,t[4]=i*B,t[6]=T*B,t[7]=(-I*i+r*p)*B,t},multiplyVec2:function(e,h,i){var r=h[0],h=h[1];return i[0]=r*e[0]+h*e[3]+e[6],i[1]=r*e[1]+h*e[4]+e[7],i}},xe=(v(ie,P),a(ie,[{key:"getValue",value:function(){var e=g.getRandFromArray(this._arr);return e==="random"||e==="Random"?n.randomColor():e}}],[{key:"createArraySpan",value:function(e){return e?e instanceof ie?e:new ie(e):null}}]),ie);function ie(e){l(this,ie);var t=b(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this));return t._arr=g.toArray(e),t}var _t=(a(dt,[{key:"contains",value:function(e,t){return e<=this.right&&e>=this.x&&t<=this.bottom&&t>=this.y}}]),dt);function dt(e,t,i,r){l(this,dt),this.x=e,this.y=t,this.width=i,this.height=r,this.bottom=this.y+this.height,this.right=this.x+this.width}var kt=(a(pt,[{key:"init",value:function(){this.startTime=0,this.nextTime=this.timePan.getValue()}},{key:"getValue",value:function(e){return this.startTime+=e,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),this.numPan.b===1?.5<this.numPan.getValue(!1)?1:0:this.numPan.getValue(!0)):0}}]),pt);function pt(e,t){l(this,pt),this.numPan=P.setSpanValue(g.initValue(e,1)),this.timePan=P.setSpanValue(g.initValue(t,1)),this.startTime=0,this.nextTime=0,this.init()}var ne=(a(vt,[{key:"reset",value:function(){}},{key:"init",value:function(e,t){t?this.initialize(t):this.initialize(e)}},{key:"initialize",value:function(){}}]),vt);function vt(){l(this,vt)}var Xt=(v(Re,ne),a(Re,[{key:"initialize",value:function(e){this.lifePan.a===1/0?e.life=1/0:e.life=this.lifePan.getValue()}}]),Re);function Re(e,t,i){l(this,Re);var r=b(this,(Re.__proto__||Object.getPrototypeOf(Re)).call(this));return r.lifePan=P.setSpanValue(e,t,i),r.name="Life",r}var Ee=(a(ft,[{key:"getPosition",value:function(){}},{key:"crossing",value:function(){}}]),ft);function ft(){l(this,ft),this.vector=new C(0,0),this.random=0,this.crossType="dead",this.alert=!0}var rt=(v(Ce,Ee),a(Ce,[{key:"getPosition",value:function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector}},{key:"crossing",value:function(){this.alert&&(console.error("Sorry, PointZone does not support crossing method!"),this.alert=!1)}}]),Ce);function Ce(e,t){l(this,Ce);var i=b(this,(Ce.__proto__||Object.getPrototypeOf(Ce)).call(this));return i.x=e,i.y=t,i}var Yt=(v(Ie,ne),a(Ie,[{key:"reset",value:function(e){this.zone=g.initValue(e,new rt)}},{key:"initialize",value:function(e){this.zone.getPosition(),e.p.x=this.zone.vector.x,e.p.y=this.zone.vector.y}}]),Ie);function Ie(e){l(this,Ie);var t=b(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this));return t.zone=g.initValue(e,new rt),t.name="Position",t}var $t=(v(Ae,ne),a(Ae,[{key:"reset",value:function(e,t,i){this.rPan=P.setSpanValue(e),this.thaPan=P.setSpanValue(t),this.type=g.initValue(i,"vector")}},{key:"normalizeVelocity",value:function(e){return e*f.MEASURE}},{key:"initialize",value:function(e){var t;this.type==="p"||this.type==="P"||this.type==="polar"?(t=new Pt(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*n.PI_180),e.v.x=t.getX(),e.v.y=t.getY()):(e.v.x=this.normalizeVelocity(this.rPan.getValue()),e.v.y=this.normalizeVelocity(this.thaPan.getValue()))}}]),Ae);function Ae(e,t,i){l(this,Ae);var r=b(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).call(this));return r.rPan=P.setSpanValue(e),r.thaPan=P.setSpanValue(t),r.type=g.initValue(i,"vector"),r.name="Velocity",r}var Qt=(v(Te,ne),a(Te,[{key:"initialize",value:function(e){e.mass=this.massPan.getValue()}}]),Te);function Te(e,t,i){l(this,Te);var r=b(this,(Te.__proto__||Object.getPrototypeOf(Te)).call(this));return r.massPan=P.setSpanValue(e,t,i),r.name="Mass",r}var Kt=(v(Be,ne),a(Be,[{key:"reset",value:function(e,t,i){this.radius=P.setSpanValue(e,t,i)}},{key:"initialize",value:function(e){e.radius=this.radius.getValue(),e.data.oldRadius=e.radius}}]),Be);function Be(e,t,i){l(this,Be);var r=b(this,(Be.__proto__||Object.getPrototypeOf(Be)).call(this));return r.radius=P.setSpanValue(e,t,i),r.name="Radius",r}var Jt=(v(Se,ne),a(Se,[{key:"initialize",value:function(e){var t=this.image.getValue();e.body=typeof t=="string"?{width:this.w,height:this.h,src:t,isInner:!0,inner:!0}:t}},{key:"setSpanValue",value:function(e){return e instanceof xe?e:new xe(e)}}]),Se);function Se(e,t,i){l(this,Se);var r=b(this,(Se.__proto__||Object.getPrototypeOf(Se)).call(this));return r.image=r.setSpanValue(e),r.w=g.initValue(t,20),r.h=g.initValue(i,r.w),r.name="Body",r}var Z=(a(at,[{key:"reset",value:function(e,t){this.life=g.initValue(e,1/0),this.easing=Ye.getEasing(t)}},{key:"normalizeForce",value:function(e){return e.multiplyScalar(f.MEASURE)}},{key:"normalizeValue",value:function(e){return e*f.MEASURE}},{key:"initialize",value:function(){}},{key:"calculate",value:function(e,t){this.age+=t,this.age>=this.life||this.dead?(this.energy=0,this.dead=!0,this.destroy()):(e=this.easing(e.age/e.life),this.energy=Math.max(1-e,0))}},{key:"destroy",value:function(){for(var e=this.parents.length;e--;)this.parents[e].removeBehaviour(this);this.parents.length=0}}]),at);function at(e,t){l(this,at),this.life=g.initValue(e,1/0),this.easing=Ye.getEasing(t),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.id="Behaviour_"+at.id++,this.name="Behaviour"}Z.id=0;var xt=(v(re,Z),a(re,[{key:"reset",value:function(e,t,i,r){this.force=this.normalizeForce(new C(e,t)),i&&y(re.prototype.__proto__||Object.getPrototypeOf(re.prototype),"reset",this).call(this,i,r)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.a.add(this.force)}}]),re);function re(e,t,i,r){return l(this,re),r=b(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,i,r)),r.force=r.normalizeForce(new C(e,t)),r.name="Force",r}var Rt=(v(ae,Z),a(ae,[{key:"reset",value:function(e,t,i,r,h){this.targetPosition=g.initValue(e,new C),this.radius=g.initValue(i,1e3),this.force=g.initValue(this.normalizeValue(t),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new C,this.lengthSq=0,r&&y(ae.prototype.__proto__||Object.getPrototypeOf(ae.prototype),"reset",this).call(this,r,h)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(e.p),this.lengthSq=this.attractionForce.lengthSq(),4e-5<this.lengthSq&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),e.a.add(this.attractionForce))}}]),ae);function ae(e,t,i,r,h){return l(this,ae),h=b(this,(ae.__proto__||Object.getPrototypeOf(ae)).call(this,r,h)),h.targetPosition=g.initValue(e,new C),h.radius=g.initValue(i,1e3),h.force=g.initValue(h.normalizeValue(t),100),h.radiusSq=h.radius*h.radius,h.attractionForce=new C,h.lengthSq=0,h.name="Attraction",h}var ei=(v(oe,Z),a(oe,[{key:"reset",value:function(e,t,i,r,h){this.panFoce=new C(e,t),this.panFoce=this.normalizeForce(this.panFoce),this.delay=i,r&&y(oe.prototype.__proto__||Object.getPrototypeOf(oe.prototype),"reset",this).call(this,r,h)}},{key:"initialize",value:function(e){e.data.time=0}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.data.time+=t,e.data.time>=this.delay&&(e.a.addXY(n.randomAToB(-this.panFoce.x,this.panFoce.x),n.randomAToB(-this.panFoce.y,this.panFoce.y)),e.data.time=0)}}]),oe);function oe(e,t,i,r,h){return l(this,oe),h=b(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this,r,h)),h.reset(e,t,i),h.time=0,h.name="RandomDrift",h}var ti=(v(se,xt),a(se,[{key:"reset",value:function(e,t,i){y(se.prototype.__proto__||Object.getPrototypeOf(se.prototype),"reset",this).call(this,0,e,t,i)}}]),se);function se(e,t,i){return l(this,se),i=b(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,0,e,t,i)),i.name="Gravity",i}var ii=(v(he,Z),a(he,[{key:"reset",value:function(e,t,i,r,h){this.emitter=g.initValue(e,null),this.mass=g.initValue(t,!0),this.callback=g.initValue(i,null),this.collisionPool=[],this.delta=new C,r&&y(he.prototype.__proto__||Object.getPrototypeOf(he.prototype),"reset",this).call(this,r,h)}},{key:"applyBehaviour",value:function(e,t,i){for(var r,h,p,I,N,T,B=(this.emitter?this.emitter.particles:this.pool).slice(i),we=B.length,D=void 0,J=void 0,J=0;J<we;J++)(D=B[J])!==e&&(this.delta.copy(D.p),this.delta.sub(e.p),(r=this.delta.lengthSq())<=(T=e.radius+D.radius)*T&&(h=T-Math.sqrt(r),h+=.5,p=e.mass+D.mass,I=this.mass?D.mass/p:.5,N=this.mass?e.mass/p:.5,e.p.add(this.delta.clone().normalize().multiplyScalar(h*-I)),D.p.add(this.delta.normalize().multiplyScalar(h*N)),this.callback&&this.callback(e,D)))}}]),he);function he(e,t,i,r,h){return l(this,he),h=b(this,(he.__proto__||Object.getPrototypeOf(he)).call(this,r,h)),h.reset(e,t,i),h.name="Collision",h}var ni=(v(le,Z),a(le,[{key:"reset",value:function(e,t,i,r){this.zone=e,this.zone.crossType=g.initValue(t,"dead"),i&&y(le.prototype.__proto__||Object.getPrototypeOf(le.prototype),"reset",this).call(this,i,r)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.zone.crossing(e)}}]),le);function le(e,t,i,r){return l(this,le),r=b(this,(le.__proto__||Object.getPrototypeOf(le)).call(this,i,r)),r.reset(e,t),r.name="CrossZone",r}var ri=(v(ue,Z),a(ue,[{key:"reset",value:function(e,t,i,r){this.same=t==null,this.a=P.setSpanValue(g.initValue(e,1)),this.b=P.setSpanValue(t),i&&y(ue.prototype.__proto__||Object.getPrototypeOf(ue.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(e){e.data.alphaA=this.a.getValue(),this.same?e.data.alphaB=e.data.alphaA:e.data.alphaB=this.b.getValue()}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.alpha=e.data.alphaB+(e.data.alphaA-e.data.alphaB)*this.energy,e.alpha<.001&&(e.alpha=0)}}]),ue);function ue(e,t,i,r){return l(this,ue),r=b(this,(ue.__proto__||Object.getPrototypeOf(ue)).call(this,i,r)),r.reset(e,t),r.name="Alpha",r}var ai=(v(ce,Z),a(ce,[{key:"reset",value:function(e,t,i,r){this.same=t==null,this.a=P.setSpanValue(g.initValue(e,1)),this.b=P.setSpanValue(t),i&&y(ce.prototype.__proto__||Object.getPrototypeOf(ce.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(e){e.data.scaleA=this.a.getValue(),e.data.oldRadius=e.radius,e.data.scaleB=this.same?e.data.scaleA:this.b.getValue()}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),e.scale=e.data.scaleB+(e.data.scaleA-e.data.scaleB)*this.energy,e.scale<1e-4&&(e.scale=0),e.radius=e.data.oldRadius*e.scale}}]),ce);function ce(e,t,i,r){return l(this,ce),r=b(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,i,r)),r.reset(e,t),r.name="Scale",r}var oi=(v(de,Z),a(de,[{key:"reset",value:function(e,t,i,r,h){this.same=t==null,this.a=P.setSpanValue(g.initValue(e,"Velocity")),this.b=P.setSpanValue(g.initValue(t,0)),this.style=g.initValue(i,"to"),r&&y(de.prototype.__proto__||Object.getPrototypeOf(de.prototype),"reset",this).call(this,r,h)}},{key:"initialize",value:function(e){e.rotation=this.a.getValue(),e.data.rotationA=this.a.getValue(),this.same||(e.data.rotationB=this.b.getValue())}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),this.same?this.a.a!=="V"&&this.a.a!=="Velocity"&&this.a.a!=="v"||(e.rotation=e.getDirection()):this.style==="to"||this.style==="TO"||this.style==="_"?e.rotation+=e.data.rotationB+(e.data.rotationA-e.data.rotationB)*this.energy:e.rotation+=e.data.rotationB}}]),de);function de(e,t,i,r,h){return l(this,de),h=b(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,r,h)),h.reset(e,t,i),h.name="Rotate",h}var si=(v(pe,Z),a(pe,[{key:"reset",value:function(e,t,i,r){this.a=xe.createArraySpan(e),this.b=xe.createArraySpan(t),i&&y(pe.prototype.__proto__||Object.getPrototypeOf(pe.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(e){e.color=this.a.getValue(),e.data.colorA=ke.hexToRgb(e.color),this.b&&(e.data.colorB=ke.hexToRgb(this.b.getValue()))}},{key:"applyBehaviour",value:function(e,t,i){this.b?(this.calculate(e,t,i),e.rgb.r=e.data.colorB.r+(e.data.colorA.r-e.data.colorB.r)*this.energy,e.rgb.g=e.data.colorB.g+(e.data.colorA.g-e.data.colorB.g)*this.energy,e.rgb.b=e.data.colorB.b+(e.data.colorA.b-e.data.colorB.b)*this.energy,e.rgb.r=Math.floor(e.rgb.r),e.rgb.g=Math.floor(e.rgb.g),e.rgb.b=Math.floor(e.rgb.b)):(e.rgb.r=e.data.colorA.r,e.rgb.g=e.data.colorA.g,e.rgb.b=e.data.colorA.b)}}]),pe);function pe(e,t,i,r){return l(this,pe),r=b(this,(pe.__proto__||Object.getPrototypeOf(pe)).call(this,i,r)),r.reset(e,t),r.name="Color",r}var yt="changing",hi=(v(ve,Z),a(ve,[{key:"setAngleAndForce",value:function(e,t){this.force=yt,this.angle=n.PI/2,e==="right"?this.angle=n.PI/2:e==="left"?this.angle=-n.PI/2:e==="random"?this.angle="random":e instanceof P?(this.angle="span",this.span=e):e&&(this.angle=e),String(t).toLowerCase()==="changing"||String(t).toLowerCase()==="chang"||String(t).toLowerCase()==="auto"?this.force=yt:t&&(this.force=t)}},{key:"reset",value:function(e,t,i,r){this.angle=n.PI/2,this.setAngleAndForce(e,t),i&&y(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(e){this.angle==="random"?e.data.cangle=n.randomAToB(-n.PI,n.PI):this.angle==="span"&&(e.data.cangle=this.span.getValue()),e.data.cyclone=new C(0,0)}},{key:"applyBehaviour",value:function(e,t,i){this.calculate(e,t,i),t=void 0,i=e.v.getGradient(),this.angle==="random"||this.angle==="span"?i+=e.data.cangle:i+=this.angle,t=this.force===yt?e.v.length()/100:this.force,e.data.cyclone.x=t*Math.cos(i),e.data.cyclone.y=t*Math.sin(i),e.data.cyclone=this.normalizeForce(e.data.cyclone),e.a.add(e.data.cyclone)}}]),ve);function ve(e,t,i,r){return l(this,ve),r=b(this,(ve.__proto__||Object.getPrototypeOf(ve)).call(this,i,r)),r.setAngleAndForce(e,t),r.name="Cyclone",r}var li=(v(fe,Rt),a(fe,[{key:"reset",value:function(e,t,i,r,h){y(fe.prototype.__proto__||Object.getPrototypeOf(fe.prototype),"reset",this).call(this,e,t,i,r,h),this.force*=-1}}]),fe);function fe(e,t,i,r,h){return l(this,fe),h=b(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this,e,t,i,r,h)),h.force*=-1,h.name="Repulsion",h}var ui=(v(ye,Z),a(ye,[{key:"reset",value:function(e,t,i,r){this.distanceVec=new C,this.centerPoint=g.initValue(e,new C),this.force=g.initValue(this.normalizeValue(t),100),i&&y(ye.prototype.__proto__||Object.getPrototypeOf(ye.prototype),"reset",this).call(this,i,r)}},{key:"initialize",value:function(){}},{key:"applyBehaviour",value:function(e,t){this.distanceVec.set(this.centerPoint.x-e.p.x,this.centerPoint.y-e.p.y);var i,r=this.distanceVec.lengthSq();r!==0&&(i=this.distanceVec.length(),i=this.force*t/(r*i),e.v.x+=i*this.distanceVec.x,e.v.y+=i*this.distanceVec.y)}}]),ye);function ye(e,t,i,r){return l(this,ye),r=b(this,(ye.__proto__||Object.getPrototypeOf(ye)).call(this,i,r)),r.distanceVec=new C,r.centerPoint=g.initValue(e,new C),r.force=g.initValue(r.normalizeValue(t),100),r.name="GravityWell",r}var ci={initialize:function(e,t,i){for(var r=i.length,h=void 0,h=0;h<r;h++)i[h]instanceof ne?i[h].init(e,t):this.init(e,t,i[h]);this.bindEmitter(e,t)},init:function(e,t,i){g.setProp(t,i),g.setVectorVal(t,i)},bindEmitter:function(e,t){e.bindEmitter&&(t.p.add(e.p),t.v.add(e.v),t.a.add(e.a),t.v.rotate(n.degreeTransform(e.rotation)))}},ot=(v(Oe,ut),a(Oe,[{key:"emit",value:function(e,t){this.stoped=!1,this.emitTime=0,this.totalTime=g.initValue(e,1/0),t===!0||t==="life"||t==="destroy"?this.life=e==="once"?1:this.totalTime:isNaN(t)||(this.life=t),this.rate.init()}},{key:"stop",value:function(){this.totalTime=-1,this.emitTime=0,this.stoped=!0}},{key:"preEmit",value:function(e){var t=this.stoped,i=this.emitTime,r=this.totalTime;for(this.stoped=!1,this.emitTime=0,this.totalTime=e,this.rate.init();.0167<e;)e-=.0167,this.update(.0167);this.stoped=t,this.emitTime=i+Math.max(e,0),this.totalTime=r}},{key:"removeAllParticles",value:function(){for(var e=this.particles.length;e--;)this.particles[e].dead=!0}},{key:"addSelfInitialize",value:function(e){e.init?e.init(this):this.initAll()}},{key:"addInitialize",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var r=t.length;r--;)this.initializes.push(t[r])}},{key:"removeInitialize",value:function(e){e=this.initializes.indexOf(e),-1<e&&this.initializes.splice(e,1)}},{key:"removeAllInitializers",value:function(){g.emptyArray(this.initializes)}},{key:"addBehaviour",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var r=arguments.length;r--;){var h=t[r];this.behaviours.push(h),h.parents&&h.parents.push(this)}}},{key:"removeBehaviour",value:function(e){var t=this.behaviours.indexOf(e);return this.behaviours.splice(t,1),e.parents&&(t=e.parents.indexOf(e),e.parents.splice(t,1)),t}},{key:"removeAllBehaviours",value:function(){g.emptyArray(this.behaviours)}},{key:"update",value:function(e){this.age+=e,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(e),this.integrate(e)}},{key:"integrate",value:function(e){if(this.parent){var t=1-this.damping;this.parent.integrator.calculate(this,e,t);for(var r=void 0,i=void 0,r=this.particles.length-1;0<=r;r--)(i=this.particles[r]).update(e,r),this.parent.integrator.calculate(i,e,t),this.dispatch("PARTICLE_UPDATE",i),i.dead&&(this.dispatch("PARTICLE_DEAD",i),this.parent.pool.expire(i),this.particles.splice(r,1))}}},{key:"dispatch",value:function(e,t){this.parent&&this.parent.dispatchEvent(e,t),this.bindEvent&&this.dispatchEvent(e,t)}},{key:"emitting",value:function(e){if(this.totalTime==="once"){var t=void 0,i=this.rate.getValue(99999);for(0<i&&(this.emitSpeed=i),t=0;t<i;t++)this.createParticle();this.totalTime="none"}else if(this.emitTime+=e,this.emitTime<this.totalTime){var r=this.rate.getValue(e),h=void 0;for(0<r&&(this.emitSpeed=r),h=0;h<r;h++)this.createParticle()}}},{key:"createParticle",value:function(e,t){var i=this.parent.pool.get(ut);return this.setupParticle(i,e,t),this.dispatch("PARTICLE_CREATED",i),i}},{key:"setupParticle",value:function(e,t,i){var r=this.initializes,h=this.behaviours;t&&(r=g.toArray(t)),i&&(h=g.toArray(i)),e.reset(),ci.initialize(this,e,r),e.addBehaviours(h),(e.parent=this).particles.push(e)}},{key:"remove",value:function(){this.stop(),g.destroyAll(this.particles)}},{key:"destroy",value:function(){this.dead=!0,this.remove(),this.removeAllInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this)}}]),Oe);function Oe(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return l(this,Oe),e=b(this,(Oe.__proto__||Object.getPrototypeOf(Oe)).call(this,e)),e.particles=[],e.behaviours=[],e.initializes=[],e.emitTime=0,e.emitSpeed=0,e.totalTime=-1,e.damping=.006,e.bindEmitter=!0,e.rate=new kt(1,.1),e.name="Emitter",e.id=We.id(e.name),e}tt.bind(ot);var di=(v(ge,ot),a(ge,[{key:"addSelfBehaviour",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var h=void 0,r=t.length,h=0;h<r;h++){var p=t[h];this.selfBehaviours.push(p),p.initialize(this)}}},{key:"removeSelfBehaviour",value:function(e){e=this.selfBehaviours.indexOf(e),-1<e&&this.selfBehaviours.splice(e,1)}},{key:"update",value:function(e){if(y(ge.prototype.__proto__||Object.getPrototypeOf(ge.prototype),"update",this).call(this,e),!this.sleep)for(var t=this.selfBehaviours.length,i=void 0,i=0;i<t;i++)this.selfBehaviours[i].applyBehaviour(this,e,i)}}]),ge);function ge(e){return l(this,ge),e=b(this,(ge.__proto__||Object.getPrototypeOf(ge)).call(this,e)),e.selfBehaviours=[],e}var pi=(v(K,ot),a(K,[{key:"initEventHandler",value:function(){var e=this;this.mousemoveHandler=function(t){return e.mousemove.call(e,t)},this.mousedownHandler=function(t){return e.mousedown.call(e,t)},this.mouseupHandler=function(t){return e.mouseup.call(e,t)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)}},{key:"emit",value:function(){this._allowEmitting=!0}},{key:"stop",value:function(){this._allowEmitting=!1}},{key:"mousemove",value:function(e){e.layerX||e.layerX===0?(this.p.x+=(e.layerX-this.p.x)*this.ease,this.p.y+=(e.layerY-this.p.y)*this.ease):!e.offsetX&&e.offsetX!==0||(this.p.x+=(e.offsetX-this.p.x)*this.ease,this.p.y+=(e.offsetY-this.p.y)*this.ease),this._allowEmitting&&y(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"emit",this).call(this,"once")}},{key:"destroy",value:function(){y(K.prototype.__proto__||Object.getPrototypeOf(K.prototype),"destroy",this).call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)}}]),K);function K(e,t,i){return l(this,K),i=b(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,i)),i.mouseTarget=g.initValue(e,window),i.ease=g.initValue(t,.7),i._allowEmitting=!1,i.initEventHandler(),i}var ee=(a(gt,[{key:"setStroke",value:function(e,t){e=0<arguments.length&&e!==void 0?e:"#000000",t=1<arguments.length&&t!==void 0?t:1,this.stroke={color:e,thinkness:t}}},{key:"initHandler",value:function(){var e=this;this._protonUpdateHandler=function(){e.onProtonUpdate.call(e)},this._protonUpdateAfterHandler=function(){e.onProtonUpdateAfter.call(e)},this._emitterAddedHandler=function(t){e.onEmitterAdded.call(e,t)},this._emitterRemovedHandler=function(t){e.onEmitterRemoved.call(e,t)},this._particleCreatedHandler=function(t){e.onParticleCreated.call(e,t)},this._particleUpdateHandler=function(t){e.onParticleUpdate.call(e,t)},this._particleDeadHandler=function(t){e.onParticleDead.call(e,t)}}},{key:"init",value:function(e){(this.parent=e).addEventListener("PROTON_UPDATE",this._protonUpdateHandler),e.addEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),e.addEventListener("EMITTER_ADDED",this._emitterAddedHandler),e.addEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),e.addEventListener("PARTICLE_CREATED",this._particleCreatedHandler),e.addEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),e.addEventListener("PARTICLE_DEAD",this._particleDeadHandler)}},{key:"resize",value:function(){}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){this.parent.removeEventListener("PROTON_UPDATE",this._protonUpdateHandler),this.parent.removeEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),this.parent.removeEventListener("EMITTER_ADDED",this._emitterAddedHandler),this.parent.removeEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),this.parent.removeEventListener("PARTICLE_CREATED",this._particleCreatedHandler),this.parent.removeEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),this.parent.removeEventListener("PARTICLE_DEAD",this._particleDeadHandler),this.parent=null}},{key:"onProtonUpdate",value:function(){}},{key:"onProtonUpdateAfter",value:function(){}},{key:"onEmitterAdded",value:function(){}},{key:"onEmitterRemoved",value:function(){}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(){}},{key:"onParticleDead",value:function(){}}]),gt);function gt(e,t){l(this,gt),this.pool=new qe,this.element=e,this.stroke=t,this.circleConf={isCircle:!0},this.initHandler(),this.name="BaseRenderer"}var vi=(v(ze,ee),a(ze,[{key:"resize",value:function(e,t){this.element.width=e,this.element.height=t}},{key:"onProtonUpdate",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"onParticleCreated",value:function(e){e.body?Pe(e.body,this.addImg2Body,e):e.color=e.color||"#ff0000"}},{key:"onParticleUpdate",value:function(e){e.body?e.body instanceof Image&&this.drawImage(e):this.drawCircle(e)}},{key:"onParticleDead",value:function(e){e.body=null}},{key:"addImg2Body",value:function(e,t){t.body=e}},{key:"drawImage",value:function(e){var t,i=e.body.width*e.scale|0,r=e.body.height*e.scale|0,h=e.p.x-i/2,p=e.p.y-r/2;e.color?(e.data.buffer||(e.data.buffer=this.createBuffer(e.body)),(t=e.data.buffer.getContext("2d")).clearRect(0,0,e.data.buffer.width,e.data.buffer.height),t.globalAlpha=e.alpha,t.drawImage(e.body,0,0),t.globalCompositeOperation="source-atop",t.fillStyle=ke.rgbToHex(e.rgb),t.fillRect(0,0,e.data.buffer.width,e.data.buffer.height),t.globalCompositeOperation="source-over",t.globalAlpha=1,this.context.drawImage(e.data.buffer,0,0,e.data.buffer.width,e.data.buffer.height,h,p,i,r)):(this.context.save(),this.context.globalAlpha=e.alpha,this.context.translate(e.p.x,e.p.y),this.context.rotate(n.degreeTransform(e.rotation)),this.context.translate(-e.p.x,-e.p.y),this.context.drawImage(e.body,0,0,e.body.width,e.body.height,h,p,i,r),this.context.globalAlpha=1,this.context.restore())}},{key:"drawCircle",value:function(e){e.rgb?this.context.fillStyle="rgba("+e.rgb.r+","+e.rgb.g+","+e.rgb.b+","+e.alpha+")":this.context.fillStyle=e.color,this.context.beginPath(),this.context.arc(e.p.x,e.p.y,e.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()}},{key:"createBuffer",value:function(e){if(e instanceof Image){var t=e.width+"_"+e.height,i=this.bufferCache[t];return i||((i=document.createElement("canvas")).width=e.width,i.height=e.height,this.bufferCache[t]=i),i}}}]),ze);function ze(e){return l(this,ze),e=b(this,(ze.__proto__||Object.getPrototypeOf(ze)).call(this,e)),e.stroke=null,e.context=e.element.getContext("2d"),e.bufferCache={},e.name="CanvasRenderer",e}var fi=(v(Me,ee),a(Me,[{key:"onParticleCreated",value:function(e){e.body?Pe(e.body,this.addImg2Body,e):(e.body=this.pool.get(this.circleConf,e),this.element.appendChild(e.body))}},{key:"onParticleUpdate",value:function(e){this.bodyReady(e)&&(this.transform3d?j.transform3d(e.body,e.p.x,e.p.y,e.scale,e.rotation):j.transform(e.body,e.p.x,e.p.y,e.scale,e.rotation),e.body.style.opacity=e.alpha,e.body.isCircle&&(e.body.style.backgroundColor=e.color||"#ff0000"))}},{key:"onParticleDead",value:function(e){this.bodyReady(e)&&(this.element.removeChild(e.body),this.pool.expire(e.body),e.body=null)}},{key:"bodyReady",value:function(e){return s(e.body)==="object"&&e.body&&!e.body.isInner}},{key:"addImg2Body",value:function(e,t){t.dead||(t.body=this.pool.get(e,t),j.resize(t.body,e.width,e.height),this.element.appendChild(t.body))}},{key:"createBody",value:function(e,t){return e.isCircle?this.createCircle(t):this.createSprite(e,t)}},{key:"createCircle",value:function(e){var t=j.createDiv(e.id+"_dom",2*e.radius,2*e.radius);return t.style.borderRadius=e.radius+"px",this.stroke&&(t.style.borderColor=this.stroke.color,t.style.borderWidth=this.stroke.thinkness+"px"),t.isCircle=!0,t}},{key:"createSprite",value:function(r,t){var i=typeof r=="string"?r:r.src,r=j.createDiv(t.id+"_dom",r.width,r.height);return r.style.backgroundImage="url("+i+")",r}}]),Me);function Me(e){l(this,Me);var t=b(this,(Me.__proto__||Object.getPrototypeOf(Me)).call(this,e));return t.stroke=null,t.pool.create=function(i,r){return t.createBody(i,r)},t.addImg2Body=t.addImg2Body.bind(t),t.transform3d=!1,t.name="DomRenderer",t}var yi=(v(De,ee),a(De,[{key:"onParticleCreated",value:function(e){e.body?this.createSprite(e):this.createCircle(e),this.element.addChild(e.body)}},{key:"onParticleUpdate",value:function(e){e.body&&(e.body.x=e.p.x,e.body.y=e.p.y,e.body.alpha=e.alpha,e.body.scaleX=e.body.scaleY=e.scale,e.body.rotation=e.rotation)}},{key:"onParticleDead",value:function(e){e.body&&(e.body.parent&&e.body.parent.removeChild(e.body),this.pool.expire(e.body),e.body=null),e.graphics&&this.pool.expire(e.graphics)}},{key:"createSprite",value:function(e){e.body=this.pool.get(e.body),e.body.parent||e.body.image&&(e.body.regX=e.body.image.width/2,e.body.regY=e.body.image.height/2)}},{key:"createCircle",value:function(e){var t=this.pool.get(createjs.Graphics);this.stroke&&(this.stroke instanceof String?t.beginStroke(this.stroke):t.beginStroke("#000000")),t.beginFill(e.color||"#ff0000").drawCircle(0,0,e.radius);var i=this.pool.get(createjs.Shape,[t]);e.body=i,e.graphics=t}}]),De);function De(e,t){return l(this,De),e=b(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,e)),e.stroke=t,e.name="EaselRenderer",e}var gi=(v(Ve,ee),a(Ve,[{key:"resize",value:function(e,t){this.element.width=e,this.element.height=t}},{key:"createImageData",value:function(e){this.rectangle=e||new _t(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onProtonUpdate",value:function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)}},{key:"onProtonUpdateAfter",value:function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(e){this.imageData&&this.setPixel(this.imageData,Math.floor(e.p.x-this.rectangle.x),Math.floor(e.p.y-this.rectangle.y),e)}},{key:"setPixel",value:function(e,t,i,r){var h=r.rgb;t<0||t>this.element.width||i<0||i>this.elementwidth||(t=4*((i>>0)*e.width+(t>>0)),e.data[t]=h.r,e.data[1+t]=h.g,e.data[2+t]=h.b,e.data[3+t]=255*r.alpha)}},{key:"onParticleDead",value:function(){}}]),Ve);function Ve(e,t){return l(this,Ve),e=b(this,(Ve.__proto__||Object.getPrototypeOf(Ve)).call(this,e)),e.context=e.element.getContext("2d"),e.imageData=null,e.rectangle=null,e.rectangle=t,e.createImageData(t),e.name="PixelRenderer",e}var $e=void 0,mi=(v(me,ee),a(me,[{key:"setPIXI",value:function(e){try{$e=e||{Sprite:{}},this.createFromImage=$e.Sprite.from||$e.Sprite.fromImage}catch{}}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(e){e.body?e.body=this.pool.get(e.body,e):e.body=this.pool.get(this.circleConf,e),this.blendMode&&(e.body.blendMode=this.blendMode),this.element.addChild(e.body)}},{key:"onParticleUpdate",value:function(e){this.transform(e,e.body),this.setColor!==!0&&this.color!==!0||(e.body.tint=ke.getHex16FromParticle(e))}},{key:"onParticleDead",value:function(e){this.element.removeChild(e.body),this.pool.expire(e.body),e.body=null}},{key:"destroy",value:function(e){y(me.prototype.__proto__||Object.getPrototypeOf(me.prototype),"destroy",this).call(this),this.pool.destroy();for(var t=e.length;t--;){var i=e[t];i.body&&this.element.removeChild(i.body)}}},{key:"transform",value:function(e,t){t.x=e.p.x,t.y=e.p.y,t.alpha=e.alpha,t.scale.x=e.scale,t.scale.y=e.scale,t.rotation=e.rotation*n.PI_180}},{key:"createBody",value:function(e,t){return e.isCircle?this.createCircle(t):this.createSprite(e)}},{key:"createSprite",value:function(e){return e=e.isInner?this.createFromImage(e.src):new $e.Sprite(e),e.anchor.x=.5,e.anchor.y=.5,e}},{key:"createCircle",value:function(e){var t,i=new $e.Graphics;return this.stroke&&(t=this.stroke instanceof String?this.stroke:0,i.beginStroke(t)),i.beginFill(e.color||36077),i.drawCircle(0,0,e.radius),i.endFill(),i}}]),me);function me(e,t){l(this,me);var i=b(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,e));return i.stroke=t,i.color=!1,i.setColor=!1,i.blendMode=null,i.pool.create=function(r,h){return i.createBody(r,h)},i.setPIXI(window.PIXI),i.name="PixiRenderer",i}var bi=(a(mt,[{key:"set",value:function(e,t){t===0?$.set(e,this.mats[0]):$.multiply(this.mats[t-1],e,this.mats[t]),this.size=Math.max(this.size,t+1)}},{key:"push",value:function(e){this.size===0?$.set(e,this.mats[0]):$.multiply(this.mats[this.size-1],e,this.mats[this.size]),this.size++}},{key:"pop",value:function(){0<this.size&&this.size--}},{key:"top",value:function(){return this.mats[this.size-1]}}]),mt);function mt(){l(this,mt),this.mats=[];for(var e=this.size=0;e<20;e++)this.mats.push($.create([0,0,0,0,0,0,0,0,0]))}v(be,ee),a(be,[{key:"init",value:function(e){y(be.prototype.__proto__||Object.getPrototypeOf(be.prototype),"init",this).call(this,e),this.resize(this.element.width,this.element.height)}},{key:"resize",value:function(e,t){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/e,this.smat[4]=1/t,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,e,t),this.element.width=e,this.element.height=t}},{key:"setMaxRadius",value:function(e){this.circleCanvasURL=this.createCircle(e)}},{key:"getVertexShader",value:function(){return["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join(`
`)}},{key:"getFragmentShader",value:function(){return["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join(`
`)}},{key:"initVar",value:function(){this.mstack=new bi,this.umat=$.create([2,0,1,0,-2,0,-1,1,1]),this.smat=$.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}}},{key:"blendEquation",value:function(e){this.gl.blendEquation(this.gl[e])}},{key:"blendFunc",value:function(e,t){this.gl.blendFunc(this.gl[e],this.gl[t])}},{key:"getShader",value:function(e,t,i){return i=i?e.createShader(e.FRAGMENT_SHADER):e.createShader(e.VERTEX_SHADER),e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(alert(e.getShaderInfoLog(i)),null)}},{key:"initShaders",value:function(){var e=this.getShader(this.gl,this.getFragmentShader(),!0),t=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,t),this.gl.attachShader(this.sprogram,e),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)}},{key:"initBuffers",value:function(){var e;this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,3,1,0,2,3]),this.gl.STATIC_DRAW);for(var i=void 0,t=[],i=0;i<100;i++)t.push(i);for(e=new Uint16Array(t),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.STATIC_DRAW),t=[],i=0;i<100;i++)t.push(i,i+1,i+2);e=new Uint16Array(t),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.STATIC_DRAW)}},{key:"createCircle",value:function(i){this.circleCanvasRadius=k(g.initValue(i,32));var t=j.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),i=t.getContext("2d");return i.beginPath(),i.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),i.closePath(),i.fillStyle="#FFF",i.fill(),t.toDataURL()}},{key:"drawImg2Canvas",value:function(e){var t=e.body.width,i=e.body.height,r=k(e.body.width),h=k(e.body.height),p=e.body.width/r,I=e.body.height/h;this.texturebuffers[e.data.src]||(this.texturebuffers[e.data.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),e.data.texture=this.texturebuffers[e.data.src][0],e.data.vcBuffer=this.texturebuffers[e.data.src][1],e.data.tcBuffer=this.texturebuffers[e.data.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,p,0,0,I,I,I]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,t,0,0,i,t,i]),this.gl.STATIC_DRAW),h=e.data.canvas.getContext("2d").getImageData(0,0,r,h),this.gl.bindTexture(this.gl.TEXTURE_2D,e.data.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),e.data.textureLoaded=!0,e.data.textureWidth=t,e.data.textureHeight=i}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(e){e.data.textureLoaded=!1,e.data.tmat=$.create(),e.data.tmat[8]=1,e.data.imat=$.create(),e.data.imat[8]=1,e.body?Pe(e.body,this.addImg2Body,e):(Pe(this.circleCanvasURL,this.addImg2Body,e),e.data.oldScale=e.radius/this.circleCanvasRadius)}},{key:"addImg2Body",value:function(e,t){t.dead||(t.body=e,t.data.src=e.src,t.data.canvas=R(e),t.data.oldScale=1,this.drawImg2Canvas(t))}},{key:"onParticleUpdate",value:function(e){e.data.textureLoaded&&(this.updateMatrix(e),this.gl.uniform3f(this.sprogram.color,e.rgb.r/255,e.rgb.g/255,e.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.data.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,e.data.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())}},{key:"onParticleDead",value:function(){}},{key:"updateMatrix",value:function(e){var t=O(-e.data.textureWidth/2,-e.data.textureHeight/2),i=O(e.p.x,e.p.y),h=e.rotation*n.PI_180,r=A(h),h=e.scale*e.data.oldScale,h=X(h,h),h=M(t,h),h=M(h,r);h=M(h,i),$.inverse(h,e.data.imat),h[2]=e.alpha,this.mstack.push(h)}}]),tt=be;function be(e){return l(this,be),e=b(this,(be.__proto__||Object.getPrototypeOf(be)).call(this,e)),e.gl=e.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),e.gl||alert("Sorry your browser do not suppest WebGL!"),e.initVar(),e.setMaxRadius(),e.initShaders(),e.initBuffers(),e.gl.blendEquation(e.gl.FUNC_ADD),e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA),e.gl.enable(e.gl.BLEND),e.addImg2Body=e.addImg2Body.bind(e),e.name="WebGLRenderer",e}v(Qe,ee),ee=Qe;function Qe(e){return l(this,Qe),e=b(this,(Qe.__proto__||Object.getPrototypeOf(Qe)).call(this,e)),e.name="CustomRenderer",e}var Et=(v(Ue,Ee),a(Ue,[{key:"getPosition",value:function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector}},{key:"getDirection",value:function(e,t){var i=this.dy,r=-this.dx;return 0<(i*e+r*t+this.dot)*(r==0?1:r)}},{key:"getDistance",value:function(e,t){return(this.dy*e+-this.dx*t+this.dot)/Math.sqrt(this.xxyy)}},{key:"getSymmetric",value:function(e){var r=e.getGradient(),t=2*(this.getGradient()-r),i=e.x,r=e.y;return e.x=i*Math.cos(t)-r*Math.sin(t),e.y=i*Math.sin(t)+r*Math.cos(t),e}},{key:"getGradient",value:function(){return Math.atan2(this.dy,this.dx)}},{key:"rangeOut",value:function(e){if(Math.abs(this.getGradient())<=n.PI/4){if(e.p.x<=this.maxx&&e.p.x>=this.minx)return!0}else if(e.p.y<=this.maxy&&e.p.y>=this.miny)return!0;return!1}},{key:"getLength",value:function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}},{key:"crossing",value:function(e){this.crossType==="dead"?this.direction===">"||this.direction==="R"||this.direction==="right"||this.direction==="down"?this.rangeOut(e)&&this.getDirection(e.p.x,e.p.y)&&(e.dead=!0):this.rangeOut(e)&&(this.getDirection(e.p.x,e.p.y)||(e.dead=!0)):this.crossType==="bound"?this.rangeOut(e)&&this.getDistance(e.p.x,e.p.y)<=e.radius&&(this.dx===0?e.v.x*=-1:this.dy===0?e.v.y*=-1:this.getSymmetric(e.v)):this.crossType==="cross"&&this.alert&&(console.error("Sorry, LineZone does not support cross method!"),this.alert=!1)}}]),Ue);function Ue(e,t,i,r,h){l(this,Ue);var p=b(this,(Ue.__proto__||Object.getPrototypeOf(Ue)).call(this));return 0<=i-e?(p.x1=e,p.y1=t,p.x2=i,p.y2=r):(p.x1=i,p.y1=r,p.x2=e,p.y2=t),p.dx=p.x2-p.x1,p.dy=p.y2-p.y1,p.minx=Math.min(p.x1,p.x2),p.miny=Math.min(p.y1,p.y2),p.maxx=Math.max(p.x1,p.x2),p.maxy=Math.max(p.y1,p.y2),p.dot=p.x2*p.y1-p.x1*p.y2,p.xxyy=p.dx*p.dx+p.dy*p.dy,p.gradient=p.getGradient(),p.length=p.getLength(),p.direction=g.initValue(h,">"),p}var Ct=(v(Fe,Ee),a(Fe,[{key:"getPosition",value:function(){return this.angle=n.PIx2*Math.random(),this.randomRadius=Math.random()*this.radius,this.vector.x=this.x+this.randomRadius*Math.cos(this.angle),this.vector.y=this.y+this.randomRadius*Math.sin(this.angle),this.vector}},{key:"setCenter",value:function(e,t){this.center.x=e,this.center.y=t}},{key:"crossing",value:function(e){var t=e.p.distanceTo(this.center);this.crossType==="dead"?t-e.radius>this.radius&&(e.dead=!0):this.crossType==="bound"?t+e.radius>=this.radius&&this.getSymmetric(e):this.crossType==="cross"&&this.alert&&(console.error("Sorry, CircleZone does not support cross method!"),this.alert=!1)}},{key:"getSymmetric",value:function(e){var r=e.v.getGradient(),t=2*(this.getGradient(e)-r),i=e.v.x,r=e.v.y;e.v.x=i*Math.cos(t)-r*Math.sin(t),e.v.y=i*Math.sin(t)+r*Math.cos(t)}},{key:"getGradient",value:function(e){return-n.PI_2+Math.atan2(e.p.y-this.center.y,e.p.x-this.center.x)}}]),Fe);function Fe(e,t,i){l(this,Fe);var r=b(this,(Fe.__proto__||Object.getPrototypeOf(Fe)).call(this));return r.x=e,r.y=t,r.radius=i,r.angle=0,r.center={x:e,y:t},r}var It=(v(Le,Ee),a(Le,[{key:"getPosition",value:function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector}},{key:"crossing",value:function(e){this.crossType==="dead"?((e.p.x+e.radius<this.x||e.p.x-e.radius>this.x+this.width)&&(e.dead=!0),(e.p.y+e.radius<this.y||e.p.y-e.radius>this.y+this.height)&&(e.dead=!0)):this.crossType==="bound"?(e.p.x-e.radius<this.x?(e.p.x=this.x+e.radius,e.v.x*=-1):e.p.x+e.radius>this.x+this.width&&(e.p.x=this.x+this.width-e.radius,e.v.x*=-1),e.p.y-e.radius<this.y?(e.p.y=this.y+e.radius,e.v.y*=-1):e.p.y+e.radius>this.y+this.height&&(e.p.y=this.y+this.height-e.radius,e.v.y*=-1)):this.crossType==="cross"&&(e.p.x+e.radius<this.x&&e.v.x<=0?e.p.x=this.x+this.width+e.radius:e.p.x-e.radius>this.x+this.width&&0<=e.v.x&&(e.p.x=this.x-e.radius),e.p.y+e.radius<this.y&&e.v.y<=0?e.p.y=this.y+this.height+e.radius:e.p.y-e.radius>this.y+this.height&&0<=e.v.y&&(e.p.y=this.y-e.radius))}}]),Le);function Le(e,t,i,r){l(this,Le);var h=b(this,(Le.__proto__||Object.getPrototypeOf(Le)).call(this));return h.x=e,h.y=t,h.width=i,h.height=r,h}v(je,Ee),a(je,[{key:"reset",value:function(e,t,i,r){this.imageData=e,this.x=g.initValue(t,0),this.y=g.initValue(i,0),this.d=g.initValue(r,2),this.vectors=[],this.setVectors()}},{key:"setVectors",value:function(){for(var r=void 0,e=void 0,t=this.imageData.width,i=this.imageData.height,r=0;r<t;r+=this.d)for(e=0;e<i;e+=this.d){var h=4*((e>>0)*t+(r>>0));0<this.imageData.data[3+h]&&this.vectors.push({x:r+this.x,y:e+this.y})}return this.vector}},{key:"getBound",value:function(e,t){return e=4*((t>>0)*this.imageData.width+(e>>0)),0<this.imageData.data[3+e]}},{key:"getPosition",value:function(){var e=g.getRandFromArray(this.vectors);return this.vector.copy(e)}},{key:"getColor",value:function(e,t){return e-=this.x,e=4*(((t-=this.y)>>0)*this.imageData.width+(e>>0)),{r:this.imageData.data[e],g:this.imageData.data[1+e],b:this.imageData.data[2+e],a:this.imageData.data[3+e]}}},{key:"crossing",value:function(e){this.crossType==="dead"?this.getBound(e.p.x-this.x,e.p.y-this.y)?e.dead=!0:e.dead=!1:this.crossType==="bound"&&(this.getBound(e.p.x-this.x,e.p.y-this.y)||e.v.negate())}}]),v=je;function je(e,t,i,r){l(this,je);var h=b(this,(je.__proto__||Object.getPrototypeOf(je)).call(this));return h.reset(e,t,i,r),h}return a={addEventListener:function(e,t){e.addEventListener("PROTON_UPDATE_AFTER",function(){return t()})},getStyle:function(e){return e=ke.hexToRgb(0<arguments.length&&e!==void 0?e:"#ff0000"),"rgba("+e.r+", "+e.g+", "+e.b+", 0.5)"},drawZone:function(e,t,i,r){var h=t.getContext("2d"),p=this.getStyle();this.addEventListener(e,function(){r&&h.clearRect(0,0,t.width,t.height),i instanceof rt?(h.beginPath(),h.fillStyle=p,h.arc(i.x,i.y,10,0,2*Math.PI,!0),h.fill(),h.closePath()):i instanceof Et?(h.beginPath(),h.strokeStyle=p,h.moveTo(i.x1,i.y1),h.lineTo(i.x2,i.y2),h.stroke(),h.closePath()):i instanceof It?(h.beginPath(),h.strokeStyle=p,h.drawRect(i.x,i.y,i.width,i.height),h.stroke(),h.closePath()):i instanceof Ct&&(h.beginPath(),h.strokeStyle=p,h.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),h.stroke(),h.closePath())})},drawEmitter:function(e,t,i,r){var h=t.getContext("2d"),p=this.getStyle();this.addEventListener(e,function(){r&&h.clearRect(0,0,t.width,t.height),h.beginPath(),h.fillStyle=p,h.arc(i.p.x,i.p.y,10,0,2*Math.PI,!0),h.fill(),h.closePath()})}},f.Particle=ut,f.Pool=qe,f.Util=g,f.ColorUtil=ke,f.MathUtil=n,f.Vector2D=f.Vector=C,f.Polar2D=f.Polar=Pt,f.ArraySpan=xe,f.Rectangle=_t,f.Rate=kt,f.ease=Ye,f.Span=P,f.Mat3=$,f.getSpan=function(e,t,i){return new P(e,t,i)},f.createArraySpan=xe.createArraySpan,f.Initialize=f.Init=ne,f.Life=f.L=Xt,f.Position=f.P=Yt,f.Velocity=f.V=$t,f.Mass=f.M=Qt,f.Radius=f.R=Kt,f.Body=f.B=Jt,f.Behaviour=Z,f.Force=f.F=xt,f.Attraction=f.A=Rt,f.RandomDrift=f.RD=ei,f.Gravity=f.G=ti,f.Collision=ii,f.CrossZone=ni,f.Alpha=ri,f.Scale=f.S=ai,f.Rotate=oi,f.Color=si,f.Repulsion=li,f.Cyclone=hi,f.GravityWell=ui,f.Emitter=ot,f.BehaviourEmitter=di,f.FollowEmitter=pi,f.Zone=Ee,f.LineZone=Et,f.CircleZone=Ct,f.PointZone=rt,f.RectZone=It,f.ImageZone=v,f.CanvasRenderer=vi,f.DomRenderer=fi,f.EaselRenderer=yi,f.PixiRenderer=mi,f.PixelRenderer=gi,f.WebGLRenderer=f.WebGlRenderer=tt,f.CustomRenderer=ee,f.Debug=a,g.assign(f,Ye),f})})(Ht);var Di=Ht.exports;const o=jt(Di);var Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},F=function(m,c){if(!(m instanceof c))throw new TypeError("Cannot call a class as a function")},L=function(){function m(c,u){for(var n=0;n<u.length;n++){var s=u[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}return function(c,u,n){return u&&m(c.prototype,u),n&&m(c,n),c}}(),q=function(m,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);m.prototype=Object.create(c&&c.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(m,c):m.__proto__=c)},G=function(m,c){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:m},Vi=function(){function m(){F(this,m),this.list=[]}return L(m,[{key:"set",value:function(u,n){this.list.push({probability:u,target:n,a:0,b:1}),this.calculation()}},{key:"calculation",value:function(){for(var u=0,n=0;n<this.list.length;n++)u+=this.list[n].probability;for(var s=0;s<this.list.length;s++){var l=this.list[s],a=l.probability/u;l.a=s===0?0:this.list[s-1].b,l.b=l.a+a}}},{key:"getResult",value:function(){for(var u=Math.random(),n=0;n<this.list.length;n++){var s=this.list[n];if(u<=s.b&&u>s.a)return s.target}return this.list[0].target}}]),m}(),Q=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n._iid=0,n._oid=0,n.size={width:0,height:0},n.canvasRef=w.createRef(),n}return L(c,[{key:"componentDidMount",value:function(){var n=this;this._oid=setTimeout(function(){n.initCanvas(),n.resize=n.resize.bind(n),window.addEventListener("resize",n.resize)},100);var s=this.getCanvas();this.props.onCanvasDidMount&&this.props.onCanvasDidMount(s)}},{key:"initCanvas",value:function(){var n=this.getCanvas();if(this.props.globalCompositeOperation){var s=n.getContext("2d");s.globalCompositeOperation=this.props.globalCompositeOperation}var l=this.setCanvasSize(n),a=l.width,d=l.height;this.heartbeatDetectionCanvasSize(n),this.props.onCanvasInited(n,a,d)}},{key:"getCanvas",value:function(){var n=this.canvasRef.current;return n}},{key:"heartbeatDetectionCanvasSize",value:function(n){var s=this;this._iid=setInterval(function(){if(s.canvasRef.current){var l=s.canvasRef.current.clientHeight;if(l!==s.size.height){var a=s.setCanvasSize(n),d=a.width,y=a.height;s.props.onResize&&s.props.onResize(d,y)}}},1e3/10)}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",this.resize),clearInterval(this._iid),clearTimeout(this._oid)}catch{}}},{key:"resize",value:function(){var n=this.getCanvas(),s=this.setCanvasSize(n),l=s.width,a=s.height;this.props.onResize&&this.props.onResize(l,a)}},{key:"setCanvasSize",value:function(n){var s=this.canvasRef.current.clientWidth,l=this.canvasRef.current.clientHeight;return this.size.width=s,this.size.height=l,n.width=s,n.height=l,{width:s,height:l}}},{key:"handleWaypointEnter",value:function(){E.start()}},{key:"handleWaypointLeave",value:function(){E.stop()}},{key:"getStyle",value:function(){var n=this.props.bg,s={width:"100%",height:"100%"};return n===!0?s=Object.assign(s,{position:"absolute",zIndex:-1,top:0,left:0}):n&&(typeof n>"u"?"undefined":Wt(n))==="object"&&(s=Object.assign(s,n)),s}},{key:"handleMouseDown",value:function(n){this.props.onMouseDown&&this.props.onMouseDown(n)}},{key:"render",value:function(){return w.createElement("canvas",{className:"particles-bg-canvas-self",ref:this.canvasRef,onMouseDown:this.handleMouseDown.bind(this),style:this.getStyle()})}}]),c}(w.Component);function Ui(m){var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(m);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:{}}function st(m,c){var u=void 0;return m?(u=Ui(m),"rgba("+u.r+","+u.g+","+u.b+", "+c+")"):null}var Bt=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),this.createMiniEmitter(n),E.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onResize",value:function(){}},{key:"createProton",value:function(n,s,l){var a=this,d=n.getContext("2d");this.proton=new o;var y=new o.Emitter;y.rate=new o.Rate(this.props.num?new o.Span(this.props.num):new o.Span(4,9),new o.Span(.8,1.3)),y.addInitialize(new o.Mass(1)),y.addInitialize(new o.Radius(1,50)),y.addInitialize(new o.Life(5,6)),y.addInitialize(new o.Velocity(new o.Span(5,8),new o.Span(30,70),"polar")),y.addBehaviour(new o.Alpha(1,0)),y.addBehaviour(new o.Color(["#36aaf3","#fd769c","#94ff22","#ffa545","#ffffff"])),y.addBehaviour(new o.Scale(.7,1)),y.addBehaviour(new o.Gravity(3)),y.addBehaviour(new o.Collision(y)),y.addBehaviour(this.customDeadBehaviour(n)),y.addBehaviour(new o.CrossZone(new o.RectZone(0,0,n.width,n.height),"bound")),y.p.x=Math.min(500,Math.max(n.width/2-400,50)),y.p.y=n.height/2+50,y.emit(),this.proton.addEmitter(y);var v=new o.CanvasRenderer(n);v.onProtonUpdate=function(){d.fillStyle=st(a.props.color,.2)||"rgba(255, 255, 255, 0.2)",d.fillRect(0,0,n.width,n.height)},this.proton.addRenderer(v)}},{key:"customDeadBehaviour",value:function(n){var s=this;return{initialize:function(a){},applyBehaviour:function(a){a.p.y+a.radius>=n.height&&a.radius>9&&(s.miniEmitteing(a),a.dead=!0)}}}},{key:"createMiniEmitter",value:function(n){var s=new o.Emitter;s.rate=new o.Rate(new o.Span(3,6),new o.Span(1,2)),s.addInitialize(new o.Mass(1)),s.radiusInitialize=new o.Radius,s.addInitialize(s.radiusInitialize),s.addInitialize(new o.Life(.5,1)),s.addInitialize(new o.V(new o.Span(1.5,3),new o.Span(0,70,!0),"polar")),s.colorBehaviour=new o.Color("#ffffff"),s.addBehaviour(new o.Alpha(1,0)),s.addBehaviour(s.colorBehaviour),s.addBehaviour(new o.Gravity(4)),s.addBehaviour(new o.Collision(s)),s.addBehaviour(new o.CrossZone(new o.RectZone(0,0,n.width,n.height),"bound")),this.proton.addEmitter(s),this.miniEmitter=s}},{key:"miniEmitteing",value:function(n){var s=this.miniEmitter;s.radiusInitialize.reset(n.radius*.05,n.radius*.2),s.colorBehaviour.reset(n.color),s.p.x=n.p.x,s.p.y=n.p.y,s.emit("once")}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),wt=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.colors=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),E.add(this.renderProton)}},{key:"onResize",value:function(){}},{key:"createProton",value:function(n,s,l){this.proton=new o;var a=new o.Emitter;a.rate=new o.Rate(this.props.num?new o.Span(this.props.num):new o.Span(5,8),new o.Span(.1,.25)),a.addInitialize(new o.Mass(1)),a.addInitialize(new o.Radius(20,200)),a.addInitialize(new o.Life(2,4)),a.addInitialize(new o.Position(new o.RectZone(0,0,s,l))),a.addBehaviour(new o.Alpha(0,1,1/0,o.easeOutCubic)),a.addBehaviour(new o.Scale(1,0,1/0,o.easeOutCubic)),a.addBehaviour(new o.Color(this.colors,"random")),a.emit(),this.proton.addEmitter(a);var d=new o.CanvasRenderer(n);this.proton.addRenderer(d)}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),Fi=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.colors=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),E.add(this.renderProton)}},{key:"onResize",value:function(n,s){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=s,this.proton.renderers[0].resize(n,s)}},{key:"getProp",value:function(n,s){var l=this.props.config||{},a=l[n]||s;return Array.isArray(a)?new o.Span(a[0],a[1]):a}},{key:"getArrProp",value:function(n,s){var l=this.props.config||{},a=l[n]||s;return a?Array.isArray(a)?a:[a,a]:null}},{key:"createProton",value:function(n,s,l){var a=this.getProp("num",[5,8]),d=this.getProp("rps",[.1,.2]),y=this.getProp("mass",1),v=this.getProp("radius",[10,30]),b=this.getProp("life",[2,3]),P=this.getProp("body"),_=this.getProp("position"),k=this.getProp("v",[2,3]),O=this.getProp("tha",[-15,15]),A=this.getArrProp("alpha"),X=this.getArrProp("scale"),M=this.getArrProp("color"),j=this.getProp("cross","dead"),x=this.getProp("random"),Y=this.getArrProp("rotate"),Je=this.getProp("g"),He=this.getArrProp("f"),Pe=this.getProp("emitter");this.proton=new o;var R=void 0;Pe==="follow"?R=new o.FollowEmitter:R=new o.Emitter,R.rate=new o.Rate(a,d),R.addInitialize(new o.Mass(y)),R.addInitialize(new o.Radius(v)),R.addInitialize(new o.Life(b)),R.addInitialize(new o.Velocity(k,O,"polar")),P&&R.addInitialize(new o.Body(P));var g=void 0;_==="all"||_==="screen"?g=new o.Position(new o.RectZone(0,0,n.width,n.height)):(typeof _>"u"?"undefined":Wt(_))==="object"?g=new o.Position(new o.RectZone(_.x,_.y,_.width,_.height)):(R.p.x=n.width/2,R.p.y=n.height/2),R.addInitialize(g);var _e=A?new o.Alpha(A[0],A[1]):new o.Alpha(0,1),We=X?new o.Scale(X[0],X[1]):new o.Scale(1,.2),qe=M?new o.Color(M[0],M[1]):new o.Color(this.colors);R.addBehaviour(_e),R.addBehaviour(We),P||R.addBehaviour(qe),Y&&(Y[0]===!0||Y[0]==="rotate"?R.addBehaviour(new o.Rotate):R.addBehaviour(new o.Rotate(Y[0],Y[1])));var Ge=new o.RectZone(0,0,n.width,n.height),et=new o.CrossZone(Ge,j);R.addBehaviour(et),x&&R.addBehaviour(new o.RandomDrift(x,x,.05)),Je&&R.addBehaviour(new o.G(Je)),He&&R.addBehaviour(new o.F(He[0],He[1])),R.emit(),this.proton.addEmitter(R);var Xe=this.createRenderer(n);this.proton.addRenderer(Xe),this.emitter=R,this.crossZoneBehaviour=et}},{key:"createRenderer",value:function(n){var s=n.width,l=n.height,a=n.getContext("2d"),d=new o.CanvasRenderer(n),y=this.getProp("onUpdate");y&&(d.onProtonUpdate=function(){y(a,s,l)});var v=this.getProp("onParticleCreated");v&&(d.onParticleCreated=function(P){v(a,P)});var b=this.getProp("onParticleUpdate");return b&&(d.onParticleUpdate=function(P){b(a,P)}),d}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"handleMouseDown",value:function(n){var s=this.getProp("onMouseDown");s&&s(n)}},{key:"render",value:function(){var n=this.props.globalCompositeOperation||this.props.operation||"source-over";return w.createElement(Q,{bg:this.props.bg,onMouseDown:this.handleMouseDown.bind(this),globalCompositeOperation:n,onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),St=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"onCanvasDidMount",value:function(n){this.props.color&&(n.style.backgroundColor=this.props.color)}},{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),E.add(this.renderProton)}},{key:"onResize",value:function(n,s){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=s,this.proton.renderers[0].resize(n,s)}},{key:"createProton",value:function(n,s,l){this.proton=new o;var a=new o.Emitter;a.damping=.008,a.rate=new o.Rate(this.props.num?this.props.num:250),a.addInitialize(new o.Mass(1)),a.addInitialize(new o.Radius(4)),a.addInitialize(new o.Velocity(new o.Span(1.5),new o.Span(0,360),"polar"));var d={x:s/2,y:l/2},y=new o.Attraction(d,0,0),v=new o.CrossZone(new o.RectZone(0,0,n.width,n.height),"cross");a.addBehaviour(new o.Color("random")),a.addBehaviour(y,v),a.addBehaviour(new o.RandomDrift(10,10,.05)),a.p.x=n.width/2,a.p.y=n.height/2,a.emit("once"),this.proton.addEmitter(a),this.proton.addRenderer(this.createRenderer(n)),this.crossZoneBehaviour=v}},{key:"createRenderer",value:function(n){var s=this,l=n.getContext("2d"),a=new o.CanvasRenderer(n);return a.onProtonUpdate=function(){l.fillStyle=st(s.props.color,.02)||"rgba(0, 0, 0, 0.02)",l.fillRect(0,0,n.width,n.height)},a.onParticleUpdate=function(d){l.beginPath(),l.strokeStyle=d.color,l.lineWidth=1,l.moveTo(d.old.p.x,d.old.p.y),l.lineTo(d.p.x,d.p.y),l.closePath(),l.stroke()},a}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),Ot=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.hue=0,n.index=0,n.colorTemplate="hsla(hue,80%,50%, 0.75)",n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"onCanvasDidMount",value:function(n){this.props.color&&(n.style.backgroundColor=this.props.color)}},{key:"onCanvasInited",value:function(n,s,l){this.canvas=n,this.createProton(n,s,l),E.add(this.renderProton)}},{key:"onResize",value:function(n,s){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=s,this.proton.renderers[0].resize(n,s)}},{key:"createProton",value:function(n,s,l){this.proton=new o;var a=new o.Emitter;a.damping=.008,a.rate=new o.Rate(this.props.num?this.props.num:150),a.addInitialize(new o.Mass(1)),a.addInitialize(new o.Radius(8)),a.addInitialize(new o.V(new o.Span(.1,.5),new o.Span(0,360),"polar")),a.addInitialize(new o.Position(new o.CircleZone(n.width/2,n.height/2,100)));var d=new o.CrossZone(new o.RectZone(0,0,n.width,n.height),"cross");a.addBehaviour(d),this.repulsion=new o.Repulsion({x:n.width/2,y:n.height/2-100},3,300),this.attraction=new o.Attraction({x:n.width/2,y:n.height/2},3,200),a.addBehaviour(this.attraction,this.repulsion),a.addBehaviour(new o.Color("random")),a.addBehaviour(new o.RandomDrift(20,15,.15)),a.emit("once"),this.proton.addEmitter(a),this.proton.addRenderer(this.createRenderer(n)),this.crossZoneBehaviour=d}},{key:"createRenderer",value:function(n){var s=this,l=n.getContext("2d"),a=new o.CanvasRenderer(n);return a.onProtonUpdate=function(){s.hue+=1,l.fillStyle=st(s.props.color,.02)||"rgba(0, 0, 0, 0.02)",l.fillRect(0,0,n.width,n.height)},a.onParticleCreated=function(d){d.data.begin=o.MathUtil.randomAToB(1,120),d.data.tha=o.MathUtil.randomAToB(0,Math.PI*2)},a.onParticleUpdate=function(d){var y=d.data.begin+s.hue;d.color=s.colorTemplate.replace("hue",y%360);var v=3/4,b=d.radius*(1-v)*Math.cos(d.data.tha+=.01)+d.radius*v;l.beginPath(),l.fillStyle=d.color,l.arc(d.p.x,d.p.y,b,0,Math.PI*2,!0),l.closePath(),l.fill()},a}},{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"renderProton",value:function(){var n=this.canvas;this.proton.update(),this.index%200===0&&(this.attraction.targetPosition.x=Math.random()*n.width,this.attraction.targetPosition.y=Math.random()*n.height,this.repulsion.targetPosition.x=Math.random()*n.width,this.repulsion.targetPosition.y=Math.random()*n.height),this.index++}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),zt=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.colors=["#fad390","#81ecec","#ffffff","#badc58","#f9ca24","#FEA47F"],n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasDidMount",value:function(n){}},{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),E.add(this.renderProton)}},{key:"onResize",value:function(n,s){var l=150;this.crossZoneBehaviour.zone.width=n+2*l,this.crossZoneBehaviour.zone.height=s+2*l,this.proton.renderers[0].resize(n,s)}},{key:"createProton",value:function(n,s,l){this.proton=new o;var a=new o.Emitter;a.rate=new o.Rate(this.props.num?this.props.num:50),a.damping=0,a.addInitialize(new o.Mass(1)),a.addInitialize(new o.Radius(4,70)),a.addInitialize(new o.Velocity(new o.Span(2,10),new o.Span(0),"polar")),a.addInitialize(new o.Position(new o.LineZone(0,n.height,n.width,n.height)));var d=150,y=new o.CrossZone(new o.RectZone(0-d,0-d,n.width+2*d,n.height+2*d),"cross");a.addBehaviour(y),a.addBehaviour(new o.Alpha(o.getSpan(.1,.55))),a.addBehaviour(new o.Color(this.colors)),a.emit("once"),this.proton.addEmitter(a);var v=this.createRenderer(n);this.proton.addRenderer(v),this.crossZoneBehaviour=y,a.preEmit(2)}},{key:"createRenderer",value:function(n){var s=n.getContext("2d"),l=new o.CustomRenderer;return l.onProtonUpdate=function(){s.clearRect(0,0,n.width,n.height)},l.onParticleCreated=function(a){var d=a.radius||60,y=o.MathUtil.randomAToB(100,200,"int");a.data.w=d,a.data.h=y},l.onParticleUpdate=function(a){var d=a.data.w,y=a.data.h;s.save(),s.globalAlpha=a.alpha,s.fillStyle=a.color,s.translate(a.p.x,a.p.y),s.rotate(o.MathUtil.degreeTransform(a.rotation)),s.translate(-a.p.x,-a.p.y),s.beginPath(),s.rect(a.p.x-d/2,a.p.y-y/2,d,y),s.closePath(),s.fill(),s.globalAlpha=1,s.restore()},l}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"lighter",onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),Mt=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),E.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onResize",value:function(n,s){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=s,this.proton.renderers[0].resize(n,s)}},{key:"createProton",value:function(n,s,l){this.proton=new o;var a=new o.Emitter;a.rate=new o.Rate(this.props.num?new o.Span(this.props.num):new o.Span(100),new o.Span(.05,.2)),a.addInitialize(new o.Mass(1)),a.addInitialize(new o.Radius(1,4)),a.addInitialize(new o.Life(1/0));var d=new o.Position(new o.RectZone(0,0,s,l));a.addInitialize(d),a.addInitialize(new o.Velocity(new o.Span(.3,.6),new o.Span(0,360),"polar")),a.addBehaviour(new o.Alpha(o.getSpan(.2,.9))),a.addBehaviour(new o.Color(this.props.color||"#333")),this.crossZoneBehaviour=new o.CrossZone(new o.RectZone(0,0,s,l),"cross"),a.addBehaviour(this.crossZoneBehaviour),a.emit("once"),a.damping=0,this.proton.addEmitter(a),this.proton.addRenderer(this.createRenderer(n,a))}},{key:"createRenderer",value:function(n,s){var l=this,a=n.getContext("2d"),d=new o.CanvasRenderer(n),y=140;return d.onProtonUpdateAfter=function(){for(var v=s.particles,b=0;b<v.length;b++)for(var P=b+1;P<v.length;P++){var _=v[b],k=v[P],O=_.p.distanceTo(k.p);if(O<y){var A=(1-O/y)*.5;a.strokeStyle=st(l.props.color,A)||"rgba(3, 3, 3, "+A+")",a.beginPath(),a.moveTo(_.p.x,_.p.y),a.lineTo(k.p.x,k.p.y),a.closePath(),a.stroke()}}},d}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),Dt=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.colors=["#74b9ff","#e84393","#6c5ce7","#00b894","#fdcb6e","#006266","#1B1464"],n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),E.add(this.renderProton)}},{key:"onResize",value:function(n,s){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=s,this.proton.renderers[0].resize(n,s)}},{key:"createProton",value:function(n,s,l){this.proton=new o;var a=new o.Emitter;a.rate=new o.Rate(this.props.num||20),a.damping=.008,a.addInitialize(new o.Mass(1)),a.addInitialize(new o.Radius(30,600)),a.addInitialize(new o.Velocity(new o.Span(.5),new o.Span(0,360),"polar")),a.addInitialize(new o.Position(new o.RectZone(0,0,n.width,n.height)));var d=new o.CrossZone(new o.RectZone(0,0,n.width,n.height),"cross");a.addBehaviour(d),a.addBehaviour(new o.Alpha(o.getSpan(.35,.55))),a.addBehaviour(new o.Color(this.getColor())),a.addBehaviour(new o.RandomDrift(50,50,.5)),a.emit("once"),this.proton.addEmitter(a);var y=new o.CanvasRenderer(n);this.proton.addRenderer(y),this.crossZoneBehaviour=d}},{key:"getColor",value:function(){var n=this.colors;return this.props.color&&(Array.isArray(this.props.color)?n=this.props.color:n=[this.props.color]),n}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"darken",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),Vt=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"onCanvasDidMount",value:function(n){}},{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),this.renderProton()}},{key:"onResize",value:function(n,s){this.crossZoneBehaviour.zone.width=n,this.crossZoneBehaviour.zone.height=s,this.proton.renderers[0].resize(n,s)}},{key:"createProton",value:function(n,s,l){this.proton=new o;var a=new o.Emitter;a.damping=.008,a.rate=new o.Rate(this.props.num?this.props.num:50),a.addInitialize(new o.Mass(1)),a.addInitialize(new o.Radius(5,9)),a.addInitialize(new o.Velocity(new o.Span(1.5),new o.Span(0,360),"polar")),a.addInitialize(new o.Position(new o.RectZone(0,0,s,l)));var d={x:s/2,y:l/2},y=new o.Attraction(d,0,0),v=new o.CrossZone(new o.RectZone(0,0,n.width,n.height),"bound");a.addBehaviour(new o.Color(this.props.color||"#bbb")),a.addBehaviour(y,v),a.addBehaviour(new o.RandomDrift(15,15,.05)),a.emit("once"),this.proton.addEmitter(a),this.proton.addRenderer(this.createRenderer(n)),this.crossZoneBehaviour=v}},{key:"createRenderer",value:function(n){var s=10,l=8,a=n.getContext("2d"),d=new o.CanvasRenderer(n);d.onProtonUpdate=function(){a.clearRect(0,0,n.width,n.height)},d.onParticleCreated=function(_){_.data.points=[],_.data.index=0},d.onParticleUpdate=function(_){b(_),_.data.index%l===0&&y(_),v(_),_.data.index++};var y=function(k){k.data.points.unshift(k.p.y),k.data.points.unshift(k.p.x),k.data.points.length>s&&(k.data.points.pop(),k.data.points.pop())},v=function(k){a.fillStyle=k.color,a.beginPath(),a.arc(k.p.x,k.p.y,k.radius,0,Math.PI*2,!0),a.closePath(),a.fill()},b=function(k){a.beginPath(),a.strokeStyle=k.color,a.moveTo(k.p.x,k.p.y);for(var O=k.data.points.length,A=0;A<O;A+=2){var X=k.data.points[A],M=k.data.points[A+1];a.lineWidth=P(A,O),a.lineTo(X,M),a.stroke()}},P=function(k,O){if(O<=2)return 1;var A=6,X=(A-1)/(2/O-1),M=1-X,j=(k+2)/O,x=X*j+M;return x=x>>0,x};return d}},{key:"renderProton",value:function(){var n=this;E.add(function(){n.proton.update()})}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),Li=["#f6b93b","#18dcff","#cd84f1","#ED4C67","#ffffff","#b71540","#32ff7e","#ff3838"],Ut=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"onCanvasInited",value:function(n,s,l){this.createProton(n),this.createEmitter({canvas:n,x:s/2,y:l/2,mainEmitter:!0,zone:"bound"}),E.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onResize",value:function(){}},{key:"createProton",value:function(n){this.proton=new o;var s=this.createRenderer(n);this.proton.addRenderer(s)}},{key:"createRenderer",value:function(n){var s=n.getContext("2d"),l=new o.CustomRenderer;l.onProtonUpdate=function(){s.clearRect(0,0,n.width,n.height)},l.onParticleCreated=function(d){d.data.count=o.MathUtil.randomAToB(3,10,!0)},l.onParticleUpdate=function(d){s.save(),s.globalAlpha=d.alpha,s.fillStyle=d.color,s.translate(d.p.x,d.p.y),s.rotate(o.MathUtil.degreeTransform(d.rotation)),s.translate(-d.p.x,-d.p.y),s.beginPath(),a(d,d.data.count),s.closePath(),s.fill(),s.globalAlpha=1,s.restore()},l.onParticleDead=function(d){};var a=function(y,v){if(v>=7)s.arc(y.p.x,y.p.y,y.radius,0,Math.PI*2,!0);else for(var b=y.radius,P=0;P<=v;P++){var _=y.p.x+b*Math.cos(Math.PI/180*360/v*P),k=y.p.y+b*Math.sin(Math.PI/180*360/v*P);P===0?s.moveTo(_,k):s.lineTo(_,k)}};return l}},{key:"createEmitter",value:function(n){var s=n.mainEmitter,l=n.canvas,a=n.x,d=n.y,y=n.radius,v=n.color,b=v===void 0?Li:v,P=n.zone,_=P===void 0?"dead":P,k=n.once,O=k===void 0?"all":k,A=n.alpha,X=A===void 0?.85:A,M=n.gravity,j=M===void 0?3.5:M,x=this.proton.pool.get(o.Emitter);if(!x.completed){x.rate=new o.Rate(this.props.num?new o.Span(this.props.num):new o.Span(4,9),new o.Span(1.6,2.2));var Y=s?new o.Radius(10,110):new o.Radius(3,y);x.addInitialize(new o.Mass(1)),x.addInitialize(Y),x.addInitialize(new o.Life(3,6)),x.addInitialize(new o.Velocity(new o.Span(4,6),new o.Span(-90,90),"polar")),x.addBehaviour(new o.Alpha(X,.2)),x.addBehaviour(new o.Color(b)),x.addBehaviour(new o.Scale(1,.3)),x.addBehaviour(new o.Rotate),x.addBehaviour(new o.Gravity(j)),x.addBehaviour(this.customDeadBehaviour(l)),x.addBehaviour(new o.CrossZone(new o.RectZone(0,0,l.width,l.height),_))}x.p.x=a,x.p.y=d,O==="once"?x.emit("once"):x.emit(),this.proton.addEmitter(x)}},{key:"expireEmitter",value:function(n){var s=this;setTimeout(function(){n.completed=!0,s.proton.pool.expire(n),s.proton.removeEmitter(n)},500)}},{key:"customDeadBehaviour",value:function(n){var s=this;return{initialize:function(a){a.data=a.data||{},a.data.oldRadius=a.radius,a.data.emitterCount=0},applyBehaviour:function(a){a.radius<5||a.data.emitterCount>=2||a.radius<=1/3*a.data.oldRadius&&(a.data.emitterCount++,s.createEmitter({canvas:n,x:a.p.x,y:a.p.y,radius:a.radius*(1/2),alpha:.5,gravity:5,color:a.color,once:"once"}))}}}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),Ft=function(m){q(c,m);function c(u){F(this,c);var n=G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return n.colors=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],n.renderProton=n.renderProton.bind(n),n}return L(c,[{key:"componentWillUnmount",value:function(){try{E.remove(this.renderProton),this.proton.destroy()}catch{}}},{key:"onCanvasInited",value:function(n,s,l){this.createProton(n,s,l),E.add(this.renderProton)}},{key:"onResize",value:function(){}},{key:"createProton",value:function(n,s,l){this.proton=new o;var a=new o.Emitter;a.rate=new o.Rate(this.props.num?new o.Span(this.props.num):new o.Span(4,8),new o.Span(.1,.25)),a.addInitialize(new o.Mass(1)),a.addInitialize(new o.Radius(20,200)),a.addInitialize(new o.Life(2,4)),a.addInitialize(new o.Velocity(new o.Span(4,7),new o.Span(0,360),"polar")),a.addInitialize(new o.Position(new o.CircleZone(s/2,l/2,100))),a.addBehaviour(new o.Alpha(1,0)),a.addBehaviour(new o.Scale(.2,1)),a.addBehaviour(this.createCustomBehaviour()),a.addBehaviour(new o.Color(this.colors,"random")),a.emit(),this.proton.addEmitter(a);var d=new o.CanvasRenderer(n);this.proton.addRenderer(d)}},{key:"createCustomBehaviour",value:function(){var n=1e3;return{initialize:function(l){l.f=new o.Vector2D(0,0)},applyBehaviour:function(l){var a=l.v.length()/1e3,d=l.v.getGradient();d+=3.14/2,l.f.x=n*a*Math.cos(d),l.f.y=n*a*Math.sin(d),l.a.add(l.f)}}}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return w.createElement(Q,{bg:this.props.bg,globalCompositeOperation:"xor",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),c}(w.Component),ji=function(m){q(c,m);function c(u){return F(this,c),G(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u))}return L(c,[{key:"getRandom",value:function(){var n=this.props,s=n.num,l=n.bg,a=n.color;return this.random||(this.random=new Vi,this.random.set(.25,w.createElement(wt,{num:s,bg:l,color:a})),this.random.set(.2,w.createElement(Bt,{num:s,bg:l,color:a})),this.random.set(.2,w.createElement(St,{num:s,bg:l,color:a})),this.random.set(.16,w.createElement(Ot,{num:s,bg:l,color:a})),this.random.set(.18,w.createElement(Dt,{num:s,bg:l,color:a})),this.random.set(.04,w.createElement(Mt,{num:s,bg:l,color:a})),this.random.set(.1,w.createElement(Ut,{num:s,bg:l,color:a})),this.random.set(.08,w.createElement(zt,{num:s,bg:l,color:a})),this.random.set(.18,w.createElement(Vt,{num:s,bg:l,color:a})),this.random.set(.15,w.createElement(Ft,{num:s,bg:l,color:a}))),this.random.getResult()}},{key:"getBgParticles",value:function(){var n=this.props,s=n.type,l=n.num,a=n.bg,d=n.color,y=n.config,v=void 0;switch(String(s).toLowerCase()){case"color":v=w.createElement(wt,{num:l,bg:a,color:d});break;case"ball":v=w.createElement(Bt,{num:l,bg:a,color:d});break;case"lines":v=w.createElement(St,{num:l,bg:a,color:d});break;case"thick":v=w.createElement(Ot,{num:l,bg:a,color:d});break;case"circle":v=w.createElement(Dt,{num:l,bg:a,color:d});break;case"cobweb":v=w.createElement(Mt,{num:l,bg:a,color:d});break;case"polygon":v=w.createElement(Ut,{num:l,bg:a,color:d});break;case"square":v=w.createElement(zt,{num:l,bg:a,color:d});break;case"tadpole":v=w.createElement(Vt,{num:l,bg:a,color:d});break;case"fountain":v=w.createElement(Ft,{num:l,bg:a,color:d});break;case"custom":v=w.createElement(Fi,{bg:a,config:y});break;case"random":v=this.getRandom(l);break;default:v=w.createElement(wt,{num:l,bg:a,color:d});break}return v}},{key:"render",value:function(){var n=this.getBgParticles();return w.createElement(w.Fragment,null,n)}}]),c}(Zt.Component);function Zi(){const[m]=Ke.useForm(),[c,u]=Zt.useState(!1),n=Pi(),{defaultLang:s}=Oi,{t:l}=_i(),{theme:a}=Ei,d={username:[{required:!0,message:"Please input your username!"}],password:[{required:!0,message:"Please input your password!"}]},y=v=>{u(!0),setTimeout(()=>{u(!1);const b={userInfo:{name:"liuhua",age:18,sex:1,role:v.username==="admin"?"admin":"test"},token:"xhshgsbzlgin"};Ci(b.token),!Ii()&&Ai(s),v.remember?Ti(v.username):Bi(),Si(JSON.stringify(b.userInfo)),n("/home")},1500)};return S.jsxs("div",{className:"flex items-center justify-center h-full",children:[S.jsx(ji,{type:"circle",bg:!0}),S.jsxs("div",{className:"w-[400px] h-[500px] rounded-lg form-box p-5",children:[S.jsxs("div",{className:"flex justify-center items-center flex-col mb-10",children:[S.jsx(ki,{style:{fontSize:"35px",color:a.primaryColor}}),S.jsx("p",{className:"pt-2 text-2xl",children:"Liuhua"})]}),S.jsxs(Ke,{name:"basic",initialValues:{remember:!!At(),username:At()},form:m,onFinish:y,autoComplete:"off",children:[S.jsx(Ke.Item,{name:"username",rules:d.username,children:S.jsx(Tt,{placeholder:l("用户名")+"：admin/test",style:{borderColor:a.primaryColor}})}),S.jsx(Ke.Item,{name:"password",rules:d.password,children:S.jsx(Tt,{placeholder:l("密码")+"：*",style:{borderColor:a.primaryColor}})}),S.jsx(xi,{theme:{token:{colorBgContainer:"transparent",colorBorder:a.primaryColor}},children:S.jsx(Ke.Item,{name:"remember",valuePropName:"checked",children:S.jsx(zi,{children:l("记住账号")})})}),S.jsx(Ri,{type:"primary",className:"w-full h-10",loading:c,htmlType:"submit",children:l("登录")})]}),S.jsxs("p",{className:"flex text-xs justify-between mt-4 gap-6",style:{color:a.primaryColor},children:[S.jsx("span",{className:" cursor-pointer",children:l("忘记密码")}),S.jsx("span",{className:" cursor-pointer",children:l("没有账号?注册")})]})]})]})}const Xi=wi(Zi);export{Xi as default};
